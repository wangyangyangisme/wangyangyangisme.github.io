<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>GraphQLæ–‡æ¡£ | Blank</title><meta name="author" content="Blank"><meta name="copyright" content="Blank"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="GraphQLæ–‡æ¡£ https:&#x2F;&#x2F;graphql.cn&#x2F;learn&#x2F;   GraphQL å…¥é—¨ åœ¨æ¥ä¸‹æ¥çš„ä¸€ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šäº†è§£ GraphQL æ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•è¿ä½œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒã€‚åœ¨æ‰¾å¦‚ä½•æ­å»º GraphQL æœåŠ¡çš„æ–‡æ¡£ï¼Ÿè¿™æœ‰ä¸€äº›ç±»åº“å¯ä»¥å¸®ä½ ç”¨å¤šç§ä¸åŒè¯­è¨€å®ç° GraphQLã€‚é€šè¿‡å®ç”¨æ•™ç¨‹æ·±å…¥å­¦ä¹ ä½“éªŒï¼Œè¯·è®¿é—® How to GraphQL å…¨æ ˆæ•™ç¨‹ç½‘ç«™ã€‚æˆ‘ä»¬è¿˜ä¸ edX åˆä½œåˆ›å»ºäº†å…è´¹çš„åœ¨çº¿">
<meta property="og:type" content="article">
<meta property="og:title" content="GraphQLæ–‡æ¡£">
<meta property="og:url" content="http://wangyangyangisme.github.io/posts/260dbad6/">
<meta property="og:site_name" content="Blank">
<meta property="og:description" content="GraphQLæ–‡æ¡£ https:&#x2F;&#x2F;graphql.cn&#x2F;learn&#x2F;   GraphQL å…¥é—¨ åœ¨æ¥ä¸‹æ¥çš„ä¸€ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šäº†è§£ GraphQL æ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•è¿ä½œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒã€‚åœ¨æ‰¾å¦‚ä½•æ­å»º GraphQL æœåŠ¡çš„æ–‡æ¡£ï¼Ÿè¿™æœ‰ä¸€äº›ç±»åº“å¯ä»¥å¸®ä½ ç”¨å¤šç§ä¸åŒè¯­è¨€å®ç° GraphQLã€‚é€šè¿‡å®ç”¨æ•™ç¨‹æ·±å…¥å­¦ä¹ ä½“éªŒï¼Œè¯·è®¿é—® How to GraphQL å…¨æ ˆæ•™ç¨‹ç½‘ç«™ã€‚æˆ‘ä»¬è¿˜ä¸ edX åˆä½œåˆ›å»ºäº†å…è´¹çš„åœ¨çº¿">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/cover/microservice/1975ab13a16d7203e5f79efb3e499123.jpg">
<meta property="article:published_time" content="2020-10-22T02:30:11.000Z">
<meta property="article:modified_time" content="2020-10-22T02:30:11.000Z">
<meta property="article:author" content="Blank">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/cover/microservice/1975ab13a16d7203e5f79efb3e499123.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/theme/favicon.ico"><link rel="canonical" href="http://wangyangyangisme.github.io/posts/260dbad6/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹ï¼š${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç°¡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"è·ç¦»ä¸Šæ¬¡æ›´æ–°å·²ç»è¿‡äº†","messageNext":"å¤©ï¼Œæ–‡ç« æ‰€æè¿°çš„å…§å®¹å¯èƒ½å·²ç»å‘ç”Ÿå˜åŒ–ï¼Œè¯·ç•™æ„ã€‚"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":500},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: 'å¤©',
  date_suffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'mediumZoom',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'GraphQLæ–‡æ¡£',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-10-22 10:30:11'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    })(window)</script><link rel="alternate" href="/atom.xml" title="Blank" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/theme/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">294</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">28</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">48</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> å¨±ä¹</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa fa-image"></i><span> ç›¸å†Œ</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> æ•™ç¨‹</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿé–‹å§‹</span></a></li><li><a class="site-page child" href="/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¡Œé é¢</span></a></li><li><a class="site-page child" href="/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¡Œé…ç½®-1</span></a></li><li><a class="site-page child" href="/posts/ceeb73f/"><span> âš”ï¸ ä¸»é¡Œé…ç½®-2</span></a></li><li><a class="site-page child" href="/posts/98d20436/"><span> â“ ä¸»é¡Œå•ç­”</span></a></li><li><a class="site-page child" href="/posts/4073eda/"><span> âš¡ï¸ é€²éšæ•™ç¨‹</span></a></li><li><a class="site-page child" href="/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥èªŒ</span></a></li><li><a class="site-page child" href="/posts/507c070f/"><span> ğŸ“‘ Aplayeræ•™ç¨‹</span></a></li><li><a class="site-page child" href="/posts/2df239ce/"><span> ğŸ“‘ æ¨™ç±¤å¤–æ›</span></a></li><li><a class="site-page child" href="/posts/b37b5fe3/"><span> ğŸ“‘ è‡ªå®šç¾©ä»£ç¢¼é…è‰²</span></a></li><li><a class="site-page child" href="/posts/ea33ab97/"><span> ğŸ“‘ è‡ªå®šç¾©å´é‚Šæ¬„</span></a></li><li><a class="site-page child" href="/posts/89757140/"><span> ğŸ“‘ Markdown</span></a></li><li><a class="site-page child" href="/posts/9db656e5/"><span> ğŸ“‘ ä»£ç é«˜äº®æµ‹è¯•</span></a></li><li><a class="site-page child" href="/posts/c9711c19/"><span> ğŸ“‘ ç•¶è¨­ç½®top_imgç‚ºfalseæ™‚</span></a></li><li><a class="site-page child" href="/posts/39b121ef/"><span> ğŸ“‘ Hexoå…§ç½®æ¨™ç±¤å¤–æ›</span></a></li><li><a class="site-page child" href="/posts/7670b080/"><span> ğŸ“‘ Butterfly ç¾åŒ–/å„ªåŒ–/é­”æ”¹ æ•™ç¨‹åˆé›†</span></a></li><li><a class="site-page child" href="/posts/913b2502/"><span> ğŸ“‘ æ²¡æœ‰å°é¢</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/cover/microservice/1975ab13a16d7203e5f79efb3e499123.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Blank</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> ä¸»é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹é“¾</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw fa fa-coffee"></i><span> ç•™è¨€æ¿</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> å¨±ä¹</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> ç”µå½±</span></a></li><li><a class="site-page child" href="/gallery/"><i class="fa-fw fa fa-image"></i><span> ç›¸å†Œ</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> æ•™ç¨‹</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/posts/21cfbf15/"><span> ğŸš€ å¿«é€Ÿé–‹å§‹</span></a></li><li><a class="site-page child" href="/posts/dc584b87/"><span> ğŸ“‘ ä¸»é¡Œé é¢</span></a></li><li><a class="site-page child" href="/posts/4aa8abbe/"><span> ğŸ›  ä¸»é¡Œé…ç½®-1</span></a></li><li><a class="site-page child" href="/posts/ceeb73f/"><span> âš”ï¸ ä¸»é¡Œé…ç½®-2</span></a></li><li><a class="site-page child" href="/posts/98d20436/"><span> â“ ä¸»é¡Œå•ç­”</span></a></li><li><a class="site-page child" href="/posts/4073eda/"><span> âš¡ï¸ é€²éšæ•™ç¨‹</span></a></li><li><a class="site-page child" href="/posts/198a4240/"><span> âœ¨ æ›´æ–°æ—¥èªŒ</span></a></li><li><a class="site-page child" href="/posts/507c070f/"><span> ğŸ“‘ Aplayeræ•™ç¨‹</span></a></li><li><a class="site-page child" href="/posts/2df239ce/"><span> ğŸ“‘ æ¨™ç±¤å¤–æ›</span></a></li><li><a class="site-page child" href="/posts/b37b5fe3/"><span> ğŸ“‘ è‡ªå®šç¾©ä»£ç¢¼é…è‰²</span></a></li><li><a class="site-page child" href="/posts/ea33ab97/"><span> ğŸ“‘ è‡ªå®šç¾©å´é‚Šæ¬„</span></a></li><li><a class="site-page child" href="/posts/89757140/"><span> ğŸ“‘ Markdown</span></a></li><li><a class="site-page child" href="/posts/9db656e5/"><span> ğŸ“‘ ä»£ç é«˜äº®æµ‹è¯•</span></a></li><li><a class="site-page child" href="/posts/c9711c19/"><span> ğŸ“‘ ç•¶è¨­ç½®top_imgç‚ºfalseæ™‚</span></a></li><li><a class="site-page child" href="/posts/39b121ef/"><span> ğŸ“‘ Hexoå…§ç½®æ¨™ç±¤å¤–æ›</span></a></li><li><a class="site-page child" href="/posts/7670b080/"><span> ğŸ“‘ Butterfly ç¾åŒ–/å„ªåŒ–/é­”æ”¹ æ•™ç¨‹åˆé›†</span></a></li><li><a class="site-page child" href="/posts/913b2502/"><span> ğŸ“‘ æ²¡æœ‰å°é¢</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">GraphQLæ–‡æ¡£</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2020-10-22T02:30:11.000Z" title="å‘è¡¨äº 2020-10-22 10:30:11">2020-10-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2020-10-22T02:30:11.000Z" title="æ›´æ–°äº 2020-10-22 10:30:11">2020-10-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/microservice/">microservice</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">å­—æ•°æ€»è®¡:</span><span class="word-count">22.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»æ—¶é•¿:</span><span>82åˆ†é’Ÿ</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="GraphQLæ–‡æ¡£"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="GraphQLæ–‡æ¡£"><a href="#GraphQLæ–‡æ¡£" class="headerlink" title="GraphQLæ–‡æ¡£"></a>GraphQLæ–‡æ¡£</h1><blockquote>
<p><a target="_blank" rel="noopener" href="https://graphql.cn/learn/">https://graphql.cn/learn/</a></p>
</blockquote>
<p><img src="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/blog/microserive/185619-15a111b82e841cf1.png" alt=""></p>
<h2 id="GraphQL-å…¥é—¨"><a href="#GraphQL-å…¥é—¨" class="headerlink" title="GraphQL å…¥é—¨"></a>GraphQL å…¥é—¨</h2><blockquote>
<p>åœ¨æ¥ä¸‹æ¥çš„ä¸€ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šäº†è§£ GraphQL æ˜¯ä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•è¿ä½œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒã€‚åœ¨æ‰¾å¦‚ä½•æ­å»º GraphQL æœåŠ¡çš„æ–‡æ¡£ï¼Ÿè¿™æœ‰ä¸€äº›ç±»åº“å¯ä»¥å¸®ä½ ç”¨<a target="_blank" rel="noopener" href="https://graphql.cn/code/">å¤šç§ä¸åŒè¯­è¨€</a>å®ç° GraphQLã€‚é€šè¿‡å®ç”¨æ•™ç¨‹æ·±å…¥å­¦ä¹ ä½“éªŒï¼Œè¯·è®¿é—® <a target="_blank" rel="noopener" href="https://www.howtographql.com/">How to GraphQL</a> å…¨æ ˆæ•™ç¨‹ç½‘ç«™ã€‚æˆ‘ä»¬è¿˜ä¸ edX åˆä½œåˆ›å»ºäº†å…è´¹çš„åœ¨çº¿è¯¾ç¨‹ï¼Œ<a target="_blank" rel="noopener" href="https://www.edx.org/course/exploring-graphql-a-query-language-for-apis">æ¢ç´¢ GraphQLï¼šä¸€ç§ç”¨äº API çš„æŸ¥è¯¢è¯­è¨€</a>ã€‚</p>
</blockquote>
<p>GraphQL æ˜¯ä¸€ä¸ªç”¨äº API çš„æŸ¥è¯¢è¯­è¨€ï¼Œæ˜¯ä¸€ä¸ªä½¿ç”¨åŸºäºç±»å‹ç³»ç»Ÿæ¥æ‰§è¡ŒæŸ¥è¯¢çš„æœåŠ¡ç«¯è¿è¡Œæ—¶ï¼ˆç±»å‹ç³»ç»Ÿç”±ä½ çš„æ•°æ®å®šä¹‰ï¼‰ã€‚GraphQL å¹¶æ²¡æœ‰å’Œä»»ä½•ç‰¹å®šæ•°æ®åº“æˆ–è€…å­˜å‚¨å¼•æ“ç»‘å®šï¼Œè€Œæ˜¯ä¾é ä½ ç°æœ‰çš„ä»£ç å’Œæ•°æ®æ”¯æ’‘ã€‚</p>
<p>ä¸€ä¸ª GraphQL æœåŠ¡æ˜¯é€šè¿‡å®šä¹‰ç±»å‹å’Œç±»å‹ä¸Šçš„å­—æ®µæ¥åˆ›å»ºçš„ï¼Œç„¶åç»™æ¯ä¸ªç±»å‹ä¸Šçš„æ¯ä¸ªå­—æ®µæä¾›è§£æå‡½æ•°ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª GraphQL æœåŠ¡å‘Šè¯‰æˆ‘ä»¬å½“å‰ç™»å½•ç”¨æˆ·æ˜¯ <code>me</code>ï¼Œè¿™ä¸ªç”¨æˆ·çš„åç§°å¯èƒ½åƒè¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">type Query &#123;</span><br><span class="line">  me: User</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type User &#123;</span><br><span class="line">  id: ID</span><br><span class="line">  name: String</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€å¹¶çš„è¿˜æœ‰æ¯ä¸ªç±»å‹ä¸Šå­—æ®µçš„è§£æå‡½æ•°ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Query_me</span>(<span class="params">request</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request.auth.user;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">User_name</span>(<span class="params">user</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> user.getName();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€æ—¦ä¸€ä¸ª GraphQL æœåŠ¡è¿è¡Œèµ·æ¥ï¼ˆé€šå¸¸åœ¨ web æœåŠ¡çš„ä¸€ä¸ª URL ä¸Šï¼‰ï¼Œå®ƒå°±èƒ½æ¥æ”¶ GraphQL æŸ¥è¯¢ï¼Œå¹¶éªŒè¯å’Œæ‰§è¡Œã€‚æ¥æ”¶åˆ°çš„æŸ¥è¯¢é¦–å…ˆä¼šè¢«æ£€æŸ¥ç¡®ä¿å®ƒåªå¼•ç”¨äº†å·²å®šä¹‰çš„ç±»å‹å’Œå­—æ®µï¼Œç„¶åè¿è¡ŒæŒ‡å®šçš„è§£æå‡½æ•°æ¥ç”Ÿæˆç»“æœã€‚</p>
<p>ä¾‹å¦‚è¿™ä¸ªæŸ¥è¯¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  me &#123;</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¼šäº§ç”Ÿè¿™æ ·çš„JSONç»“æœï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;me&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ç³»åˆ—æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä¼šå­¦ä¹ æ›´å¤šå…³äº GraphQL çš„çŸ¥è¯†ï¼ŒåŒ…æ‹¬æŸ¥è¯¢è¯­è¨€ã€ç±»å‹ç³»ç»Ÿã€GraphQL æœåŠ¡çš„å·¥ä½œåŸç†ä»¥åŠä½¿ç”¨ GraphQL è§£å†³å¸¸è§é—®é¢˜çš„æœ€ä½³å®è·µã€‚</p>
<h2 id="æŸ¥è¯¢å’Œå˜æ›´"><a href="#æŸ¥è¯¢å’Œå˜æ›´" class="headerlink" title="æŸ¥è¯¢å’Œå˜æ›´"></a>æŸ¥è¯¢å’Œå˜æ›´</h2><p>ä½ å¯ä»¥åœ¨æœ¬é¡µå­¦åˆ°æœ‰å…³å¦‚ä½•æŸ¥è¯¢ GraphQL æœåŠ¡å™¨çš„è¯¦ç»†ä¿¡æ¯ã€‚</p>
<h3 id="å­—æ®µï¼ˆFieldsï¼‰"><a href="#å­—æ®µï¼ˆFieldsï¼‰" class="headerlink" title="å­—æ®µï¼ˆFieldsï¼‰"></a>å­—æ®µï¼ˆFieldsï¼‰</h3><p>ç®€å•è€Œè¨€ï¼ŒGraphQL æ˜¯å…³äºè¯·æ±‚å¯¹è±¡ä¸Šçš„ç‰¹å®šå­—æ®µã€‚æˆ‘ä»¬ä»¥ä¸€ä¸ªéå¸¸ç®€å•çš„æŸ¥è¯¢ä»¥åŠå…¶ç»“æœä¸ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ ç«‹å³å°±èƒ½å‘ç°ï¼ŒæŸ¥è¯¢å’Œå…¶ç»“æœæ‹¥æœ‰å‡ ä¹ä¸€æ ·çš„ç»“æ„ã€‚è¿™æ˜¯ GraphQL æœ€é‡è¦çš„ç‰¹æ€§ï¼Œå› ä¸ºè¿™æ ·ä¸€æ¥ï¼Œä½ å°±æ€»æ˜¯èƒ½å¾—åˆ°ä½ æƒ³è¦çš„æ•°æ®ï¼Œè€ŒæœåŠ¡å™¨ä¹Ÿå‡†ç¡®åœ°çŸ¥é“å®¢æˆ·ç«¯è¯·æ±‚çš„å­—æ®µã€‚</p>
<p><code>name</code> å­—æ®µè¿”å› <code>String</code> ç±»å‹ï¼Œåœ¨è¿™ä¸ªç¤ºä¾‹ä¸­æ˜¯ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ä¸»è§’çš„åå­—æ˜¯ï¼š<code>&quot;R2-D2&quot;</code>ã€‚</p>
<blockquote>
<p>å¯¹äº†ï¼Œè¿˜æœ‰ä¸€ç‚¹ â€”â€” ä¸Šè¿°æŸ¥è¯¢æ˜¯<strong>å¯äº¤äº’çš„</strong>ã€‚ä¹Ÿå°±æ˜¯ä½ å¯ä»¥æŒ‰ä½ å–œæ¬¢æ¥æ”¹å˜æŸ¥è¯¢ï¼Œç„¶åçœ‹çœ‹æ–°çš„ç»“æœã€‚å°è¯•ç»™æŸ¥è¯¢ä¸­çš„ <code>hero</code> å¯¹è±¡æ·»åŠ ä¸€ä¸ª<code>appearsIn</code> å­—æ®µï¼Œçœ‹çœ‹æ–°çš„ç»“æœå§ã€‚</p>
</blockquote>
<p>åœ¨å‰ä¸€ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è¯·æ±‚äº†æˆ‘ä»¬ä¸»è§’çš„åå­—ï¼Œè¿”å›äº†ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼ˆStringï¼‰ï¼Œä½†æ˜¯å­—æ®µä¹Ÿèƒ½æŒ‡ä»£å¯¹è±¡ç±»å‹ï¼ˆObjectï¼‰ã€‚è¿™ä¸ªæ—¶å€™ï¼Œä½ å¯ä»¥å¯¹è¿™ä¸ªå¯¹è±¡çš„å­—æ®µè¿›è¡Œ<strong>æ¬¡çº§é€‰æ‹©ï¼ˆsub-selectionï¼‰</strong>ã€‚GraphQL æŸ¥è¯¢èƒ½å¤Ÿéå†ç›¸å…³å¯¹è±¡åŠå…¶å­—æ®µï¼Œä½¿å¾—å®¢æˆ·ç«¯å¯ä»¥ä¸€æ¬¡è¯·æ±‚æŸ¥è¯¢å¤§é‡ç›¸å…³æ•°æ®ï¼Œè€Œä¸åƒä¼ ç»Ÿ REST æ¶æ„ä¸­é‚£æ ·éœ€è¦å¤šæ¬¡å¾€è¿”æŸ¥è¯¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    # æŸ¥è¯¢å¯ä»¥æœ‰å¤‡æ³¨ï¼</span><br><span class="line">    friends &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;friends&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æ³¨æ„è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>friends</code> è¿”å›äº†ä¸€ä¸ªæ•°ç»„çš„é¡¹ç›®ï¼ŒGraphQL æŸ¥è¯¢ä¼šåŒç­‰çœ‹å¾…å•ä¸ªé¡¹ç›®æˆ–è€…ä¸€ä¸ªåˆ—è¡¨çš„é¡¹ç›®ï¼Œç„¶è€Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ schema æ‰€æŒ‡ç¤ºçš„å†…å®¹æ¥é¢„æµ‹å°†ä¼šå¾—åˆ°å“ªä¸€ç§ã€‚</p>
<h3 id="å‚æ•°ï¼ˆArgumentsï¼‰"><a href="#å‚æ•°ï¼ˆArgumentsï¼‰" class="headerlink" title="å‚æ•°ï¼ˆArgumentsï¼‰"></a>å‚æ•°ï¼ˆArgumentsï¼‰</h3><p>å³ä½¿æˆ‘ä»¬èƒ½åšçš„ä»…ä»…æ˜¯éå†å¯¹è±¡åŠå…¶å­—æ®µï¼ŒGraphQL å°±å·²ç»æ˜¯ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„æ•°æ®æŸ¥è¯¢è¯­è¨€äº†ã€‚ä½†æ˜¯å½“ä½ åŠ å…¥ç»™å­—æ®µä¼ é€’å‚æ•°çš„èƒ½åŠ›æ—¶ï¼Œäº‹æƒ…ä¼šå˜å¾—æ›´åŠ æœ‰è¶£ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  human(id: &quot;1000&quot;) &#123;</span><br><span class="line">    name</span><br><span class="line">    height</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;human&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;height&quot;</span>: <span class="number">1.72</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ç±»ä¼¼ REST çš„ç³»ç»Ÿä¸­ï¼Œä½ åªèƒ½ä¼ é€’ä¸€ç»„ç®€å•å‚æ•° â€”â€” è¯·æ±‚ä¸­çš„ query å‚æ•°å’Œ URL æ®µã€‚ä½†æ˜¯åœ¨ GraphQL ä¸­ï¼Œæ¯ä¸€ä¸ªå­—æ®µå’ŒåµŒå¥—å¯¹è±¡éƒ½èƒ½æœ‰è‡ªå·±çš„ä¸€ç»„å‚æ•°ï¼Œä»è€Œä½¿å¾— GraphQL å¯ä»¥å®Œç¾æ›¿ä»£å¤šæ¬¡ API è·å–è¯·æ±‚ã€‚ç”šè‡³ä½ ä¹Ÿå¯ä»¥ç»™ æ ‡é‡ï¼ˆscalarï¼‰å­—æ®µä¼ é€’å‚æ•°ï¼Œç”¨äºå®ç°æœåŠ¡ç«¯çš„ä¸€æ¬¡è½¬æ¢ï¼Œè€Œä¸ç”¨æ¯ä¸ªå®¢æˆ·ç«¯åˆ†åˆ«è½¬æ¢ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  human(id: &quot;1000&quot;) &#123;</span><br><span class="line">    name</span><br><span class="line">    height(unit: FOOT)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;human&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;height&quot;</span>: <span class="number">5.6430448</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‚æ•°å¯ä»¥æ˜¯å¤šç§ä¸åŒçš„ç±»å‹ã€‚ä¸Šé¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œå…¶ä»£è¡¨äº†ä¸€ä¸ªæœ‰é™é€‰é¡¹é›†åˆï¼ˆæœ¬ä¾‹ä¸­ä¸ºé•¿åº¦å•ä½ï¼Œå³æ˜¯ <code>METER</code> æˆ–è€… <code>FOOT</code>ï¼‰ã€‚GraphQL è‡ªå¸¦ä¸€å¥—é»˜è®¤ç±»å‹ï¼Œä½†æ˜¯ GraphQL æœåŠ¡å™¨å¯ä»¥å£°æ˜ä¸€å¥—è‡ªå·±çš„å®šåˆ¶ç±»å‹ï¼Œåªè¦èƒ½åºåˆ—åŒ–æˆä½ çš„ä¼ è¾“æ ¼å¼å³å¯ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://graphql.cn/learn/schema">æ›´å¤šçš„ GraphQL ç±»å‹ç³»ç»Ÿè¯·ç‚¹å‡»è¿™é‡Œã€‚</a></p>
<h3 id="åˆ«åï¼ˆAliasesï¼‰"><a href="#åˆ«åï¼ˆAliasesï¼‰" class="headerlink" title="åˆ«åï¼ˆAliasesï¼‰"></a>åˆ«åï¼ˆAliasesï¼‰</h3><p>å¦‚æœä½ çœ¼ç›å¤Ÿé”åˆ©ï¼Œä½ å¯èƒ½å·²ç»å‘ç°ï¼Œå³ä¾¿ç»“æœä¸­çš„å­—æ®µä¸æŸ¥è¯¢ä¸­çš„å­—æ®µèƒ½å¤ŸåŒ¹é…ï¼Œä½†æ˜¯å› ä¸ºä»–ä»¬å¹¶ä¸åŒ…å«å‚æ•°ï¼Œä½ å°±æ²¡æ³•é€šè¿‡ä¸åŒå‚æ•°æ¥æŸ¥è¯¢ç›¸åŒå­—æ®µã€‚è¿™ä¾¿æ˜¯ä¸ºä½•ä½ éœ€è¦<strong>åˆ«å</strong> â€”â€” è¿™å¯ä»¥è®©ä½ é‡å‘½åç»“æœä¸­çš„å­—æ®µä¸ºä»»æ„ä½ æƒ³åˆ°çš„åå­—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  empireHero: hero(episode: EMPIRE) &#123;</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">  jediHero: hero(episode: JEDI) &#123;</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;empireHero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;jediHero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šä¾‹ä¸­ï¼Œä¸¤ä¸ª <code>hero</code> å­—æ®µå°†ä¼šå­˜åœ¨å†²çªï¼Œä½†æ˜¯å› ä¸ºæˆ‘ä»¬å¯ä»¥å°†å…¶å¦å–ä¸€ä¸ªåˆ«åï¼Œæˆ‘ä»¬ä¹Ÿå°±å¯ä»¥åœ¨ä¸€æ¬¡è¯·æ±‚ä¸­å¾—åˆ°ä¸¤ä¸ªç»“æœã€‚</p>
<h3 id="ç‰‡æ®µï¼ˆFragmentsï¼‰"><a href="#ç‰‡æ®µï¼ˆFragmentsï¼‰" class="headerlink" title="ç‰‡æ®µï¼ˆFragmentsï¼‰"></a>ç‰‡æ®µï¼ˆFragmentsï¼‰</h3><p>å‡è®¾æˆ‘ä»¬çš„ app æœ‰æ¯”è¾ƒå¤æ‚çš„é¡µé¢ï¼Œå°†æ­£åæ´¾ä¸»è§’åŠå…¶å‹å†›åˆ†ä¸ºä¸¤æ‹¨ã€‚ä½ ç«‹é©¬å°±èƒ½æƒ³åˆ°å¯¹åº”çš„æŸ¥è¯¢ä¼šå˜å¾—å¤æ‚ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å°†ä¸€äº›å­—æ®µé‡å¤è‡³å°‘ä¸€æ¬¡ â€”â€” ä¸¤æ–¹å„ä¸€æ¬¡ä»¥ä½œæ¯”è¾ƒã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä½• GraphQL åŒ…å«äº†ç§°ä½œ<strong>ç‰‡æ®µ</strong>çš„å¯å¤ç”¨å•å…ƒã€‚ç‰‡æ®µä½¿ä½ èƒ½å¤Ÿç»„ç»‡ä¸€ç»„å­—æ®µï¼Œç„¶ååœ¨éœ€è¦å®ƒä»¬çš„çš„åœ°æ–¹å¼•å…¥ã€‚ä¸‹é¢ä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ç‰‡æ®µè§£å†³ä¸Šè¿°åœºæ™¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  leftComparison: hero(episode: EMPIRE) &#123;</span><br><span class="line">    ...comparisonFields</span><br><span class="line">  &#125;</span><br><span class="line">  rightComparison: hero(episode: JEDI) &#123;</span><br><span class="line">    ...comparisonFields</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fragment comparisonFields on Character &#123;</span><br><span class="line">  name</span><br><span class="line">  appearsIn</span><br><span class="line">  friends &#123;</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;leftComparison&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;friends&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;C-3PO&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;rightComparison&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;friends&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„æŸ¥è¯¢å¦‚ä½•æ¼‚äº®åœ°é‡å¤äº†å­—æ®µã€‚ç‰‡æ®µçš„æ¦‚å¿µç»å¸¸ç”¨äºå°†å¤æ‚çš„åº”ç”¨æ•°æ®éœ€æ±‚åˆ†å‰²æˆå°å—ï¼Œç‰¹åˆ«æ˜¯ä½ è¦å°†å¤§é‡ä¸åŒç‰‡æ®µçš„ UI ç»„ä»¶ç»„åˆæˆä¸€ä¸ªåˆå§‹æ•°æ®è·å–çš„æ—¶å€™ã€‚</p>
<h4 id="åœ¨ç‰‡æ®µå†…ä½¿ç”¨å˜é‡"><a href="#åœ¨ç‰‡æ®µå†…ä½¿ç”¨å˜é‡" class="headerlink" title="åœ¨ç‰‡æ®µå†…ä½¿ç”¨å˜é‡"></a>åœ¨ç‰‡æ®µå†…ä½¿ç”¨å˜é‡</h4><p>ç‰‡æ®µå¯ä»¥è®¿é—®æŸ¥è¯¢æˆ–å˜æ›´ä¸­å£°æ˜çš„å˜é‡ã€‚è¯¦è§ <a target="_blank" rel="noopener" href="https://graphql.cn/learn/queries/#variables">å˜é‡</a>ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">query HeroComparison($first: Int &#x3D; 3) &#123;</span><br><span class="line">  leftComparison: hero(episode: EMPIRE) &#123;</span><br><span class="line">    ...comparisonFields</span><br><span class="line">  &#125;</span><br><span class="line">  rightComparison: hero(episode: JEDI) &#123;</span><br><span class="line">    ...comparisonFields</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fragment comparisonFields on Character &#123;</span><br><span class="line">  name</span><br><span class="line">  friendsConnection(first: $first) &#123;</span><br><span class="line">    totalCount</span><br><span class="line">    edges &#123;</span><br><span class="line">      node &#123;</span><br><span class="line">        name</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;leftComparison&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;friendsConnection&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;totalCount&quot;</span>: <span class="number">4</span>,</span><br><span class="line">        <span class="attr">&quot;edges&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;node&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;node&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;node&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;C-3PO&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;rightComparison&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;friendsConnection&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;totalCount&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">&quot;edges&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;node&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;node&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;node&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ“ä½œåç§°ï¼ˆOperation-nameï¼‰"><a href="#æ“ä½œåç§°ï¼ˆOperation-nameï¼‰" class="headerlink" title="æ“ä½œåç§°ï¼ˆOperation nameï¼‰"></a>æ“ä½œåç§°ï¼ˆOperation nameï¼‰</h3><p>è¿™ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½ä½¿ç”¨äº†ç®€å†™å¥æ³•ï¼Œçœç•¥äº† <code>query</code> å…³é”®å­—å’ŒæŸ¥è¯¢åç§°ï¼Œä½†æ˜¯ç”Ÿäº§ä¸­ä½¿ç”¨è¿™äº›å¯ä»¥ä½¿æˆ‘ä»¬ä»£ç å‡å°‘æ­§ä¹‰ã€‚</p>
<p>ä¸‹é¢çš„ç¤ºä¾‹åŒ…å«äº†ä½œä¸º<strong>æ“ä½œç±»å‹</strong>çš„å…³é”®å­— <code>query</code> ä»¥åŠ<strong>æ“ä½œåç§°</strong> <code>HeroNameAndFriends</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">query HeroNameAndFriends &#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    friends &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;friends&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æ“ä½œç±»å‹</strong>å¯ä»¥æ˜¯ <em>query<em>ã€</em>mutation</em> æˆ– <em>subscription</em>ï¼Œæè¿°ä½ æ‰“ç®—åšä»€ä¹ˆç±»å‹çš„æ“ä½œã€‚æ“ä½œç±»å‹æ˜¯å¿…éœ€çš„ï¼Œé™¤éä½ ä½¿ç”¨æŸ¥è¯¢ç®€å†™è¯­æ³•ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ æ— æ³•ä¸ºæ“ä½œæä¾›åç§°æˆ–å˜é‡å®šä¹‰ã€‚</p>
<p><strong>æ“ä½œåç§°</strong>æ˜¯ä½ çš„æ“ä½œçš„æœ‰æ„ä¹‰å’Œæ˜ç¡®çš„åç§°ã€‚å®ƒä»…åœ¨æœ‰å¤šä¸ªæ“ä½œçš„æ–‡æ¡£ä¸­æ˜¯å¿…éœ€çš„ï¼Œä½†æˆ‘ä»¬é¼“åŠ±ä½¿ç”¨å®ƒï¼Œå› ä¸ºå®ƒå¯¹äºè°ƒè¯•å’ŒæœåŠ¡å™¨ç«¯æ—¥å¿—è®°å½•éå¸¸æœ‰ç”¨ã€‚ å½“åœ¨ä½ çš„ç½‘ç»œæˆ–æ˜¯ GraphQL æœåŠ¡å™¨çš„æ—¥å¿—ä¸­å‡ºç°é—®é¢˜æ—¶ï¼Œé€šè¿‡åç§°æ¥ä»ä½ çš„ä»£ç åº“ä¸­æ‰¾åˆ°ä¸€ä¸ªæŸ¥è¯¢æ¯”å°è¯•å»ç ´è¯‘å†…å®¹æ›´åŠ å®¹æ˜“ã€‚ å°±æŠŠå®ƒæƒ³æˆä½ å–œæ¬¢çš„ç¨‹åºè¯­è¨€ä¸­çš„å‡½æ•°åã€‚ä¾‹å¦‚ï¼Œåœ¨ JavaScript ä¸­ï¼Œæˆ‘ä»¬åªç”¨åŒ¿åå‡½æ•°å°±å¯ä»¥å·¥ä½œï¼Œä½†æ˜¯å½“æˆ‘ä»¬ç»™äº†å‡½æ•°åä¹‹åï¼Œå°±æ›´åŠ å®¹æ˜“è¿½è¸ªã€è°ƒè¯•æˆ‘ä»¬çš„ä»£ç ï¼Œå¹¶åœ¨å…¶è¢«è°ƒç”¨çš„æ—¶å€™åšæ—¥å¿—ã€‚åŒç†ï¼ŒGraphQL çš„æŸ¥è¯¢å’Œå˜æ›´åç§°ï¼Œä»¥åŠç‰‡æ®µåç§°ï¼Œéƒ½å¯ä»¥æˆä¸ºæœåŠ¡ç«¯ä¾§ç”¨æ¥è¯†åˆ«ä¸åŒ GraphQL è¯·æ±‚çš„æœ‰æ•ˆè°ƒè¯•å·¥å…·ã€‚</p>
<h3 id="å˜é‡ï¼ˆVariablesï¼‰"><a href="#å˜é‡ï¼ˆVariablesï¼‰" class="headerlink" title="å˜é‡ï¼ˆVariablesï¼‰"></a>å˜é‡ï¼ˆVariablesï¼‰</h3><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å°†å‚æ•°å†™åœ¨äº†æŸ¥è¯¢å­—ç¬¦ä¸²å†…ã€‚ä½†æ˜¯åœ¨å¾ˆå¤šåº”ç”¨ä¸­ï¼Œå­—æ®µçš„å‚æ•°å¯èƒ½æ˜¯åŠ¨æ€çš„ï¼šä¾‹å¦‚ï¼Œå¯èƒ½æ˜¯ä¸€ä¸ª&quot;ä¸‹æ‹‰èœå•&quot;è®©ä½ é€‰æ‹©æ„Ÿå…´è¶£çš„ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ç»­é›†ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªæœç´¢åŒºï¼Œæˆ–è€…æ˜¯ä¸€ç»„è¿‡æ»¤å™¨ã€‚</p>
<p>å°†è¿™äº›åŠ¨æ€å‚æ•°ç›´æ¥ä¼ è¿›æŸ¥è¯¢å­—ç¬¦ä¸²å¹¶ä¸æ˜¯å¥½ä¸»æ„ï¼Œå› ä¸ºè¿™æ ·æˆ‘ä»¬çš„å®¢æˆ·ç«¯å°±å¾—åŠ¨æ€åœ°åœ¨è¿è¡Œæ—¶æ“ä½œè¿™äº›æŸ¥è¯¢å­—ç¬¦ä¸²äº†ï¼Œå†æŠŠå®ƒåºåˆ—åŒ–æˆ GraphQL ä¸“ç”¨çš„æ ¼å¼ã€‚å…¶å®ï¼ŒGraphQL æ‹¥æœ‰ä¸€çº§æ–¹æ³•å°†åŠ¨æ€å€¼æå–åˆ°æŸ¥è¯¢ä¹‹å¤–ï¼Œç„¶åä½œä¸ºåˆ†ç¦»çš„å­—å…¸ä¼ è¿›å»ã€‚è¿™äº›åŠ¨æ€å€¼å³ç§°ä¸º<strong>å˜é‡</strong>ã€‚</p>
<p>ä½¿ç”¨å˜é‡ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—åšä¸‰ä»¶äº‹ï¼š</p>
<ol>
<li>ä½¿ç”¨ <code>$variableName</code> æ›¿ä»£æŸ¥è¯¢ä¸­çš„é™æ€å€¼ã€‚</li>
<li>å£°æ˜ <code>$variableName</code> ä¸ºæŸ¥è¯¢æ¥å—çš„å˜é‡ä¹‹ä¸€ã€‚</li>
<li>å°† <code>variableName: value</code> é€šè¿‡ä¼ è¾“ä¸“ç”¨ï¼ˆé€šå¸¸æ˜¯ JSONï¼‰çš„åˆ†ç¦»çš„å˜é‡å­—å…¸ä¸­ã€‚</li>
</ol>
<p>å…¨éƒ¨åšå®Œä¹‹åå°±åƒè¿™ä¸ªæ ·å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># &#123; &quot;graphiql&quot;: true, &quot;variables&quot;: &#123; &quot;episode&quot;: JEDI &#125; &#125;</span><br><span class="line">query HeroNameAndFriends($episode: Episode) &#123;</span><br><span class="line">  hero(episode: $episode) &#123;</span><br><span class="line">    name</span><br><span class="line">    friends &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¸€æ¥ï¼Œæˆ‘ä»¬çš„å®¢æˆ·ç«¯ä»£ç å°±åªéœ€è¦ä¼ å…¥ä¸åŒçš„å˜é‡ï¼Œè€Œä¸ç”¨æ„å»ºä¸€ä¸ªå…¨æ–°çš„æŸ¥è¯¢äº†ã€‚è¿™äº‹å®ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªè‰¯å¥½å®è·µï¼Œæ„å‘³ç€æŸ¥è¯¢çš„å‚æ•°å°†æ˜¯åŠ¨æ€çš„ â€”â€” æˆ‘ä»¬å†³ä¸èƒ½ä½¿ç”¨ç”¨æˆ·æä¾›çš„å€¼æ¥å­—ç¬¦ä¸²æ’å€¼ä»¥æ„å»ºæŸ¥è¯¢ã€‚</p>
<h4 id="å˜é‡å®šä¹‰ï¼ˆVariable-definitionsï¼‰"><a href="#å˜é‡å®šä¹‰ï¼ˆVariable-definitionsï¼‰" class="headerlink" title="å˜é‡å®šä¹‰ï¼ˆVariable definitionsï¼‰"></a>å˜é‡å®šä¹‰ï¼ˆVariable definitionsï¼‰</h4><p>å˜é‡å®šä¹‰çœ‹ä¸Šå»åƒæ˜¯ä¸Šè¿°æŸ¥è¯¢ä¸­çš„ <code>($episode: Episode)</code>ã€‚å…¶å·¥ä½œæ–¹å¼è·Ÿç±»å‹è¯­è¨€ä¸­å‡½æ•°çš„å‚æ•°å®šä¹‰ä¸€æ ·ã€‚å®ƒä»¥åˆ—å‡ºæ‰€æœ‰å˜é‡ï¼Œå˜é‡å‰ç¼€å¿…é¡»ä¸º <code>$</code>ï¼Œåè·Ÿå…¶ç±»å‹ï¼Œæœ¬ä¾‹ä¸­ä¸º <code>Episode</code>ã€‚</p>
<p>æ‰€æœ‰å£°æ˜çš„å˜é‡éƒ½å¿…é¡»æ˜¯æ ‡é‡ã€æšä¸¾å‹æˆ–è€…è¾“å…¥å¯¹è±¡ç±»å‹ã€‚æ‰€ä»¥å¦‚æœæƒ³è¦ä¼ é€’ä¸€ä¸ªå¤æ‚å¯¹è±¡åˆ°ä¸€ä¸ªå­—æ®µä¸Šï¼Œä½ å¿…é¡»çŸ¥é“æœåŠ¡å™¨ä¸Šå…¶åŒ¹é…çš„ç±»å‹ã€‚å¯ä»¥ä»Schemaé¡µé¢äº†è§£æ›´å¤šå…³äºè¾“å…¥å¯¹è±¡ç±»å‹çš„ä¿¡æ¯ã€‚</p>
<p>å˜é‡å®šä¹‰å¯ä»¥æ˜¯å¯é€‰çš„æˆ–è€…å¿…è¦çš„ã€‚ä¸Šä¾‹ä¸­ï¼Œ<code>Episode</code> åå¹¶æ²¡æœ‰ <code>!</code>ï¼Œå› æ­¤å…¶æ˜¯å¯é€‰çš„ã€‚ä½†æ˜¯å¦‚æœä½ ä¼ é€’å˜é‡çš„å­—æ®µè¦æ±‚éç©ºå‚æ•°ï¼Œé‚£å˜é‡ä¸€å®šæ˜¯å¿…è¦çš„ã€‚</p>
<p>å¦‚æœæƒ³è¦è¿›ä¸€æ­¥äº†è§£å˜é‡å®šä¹‰çš„å¥æ³•ï¼Œå¯ä»¥å­¦ä¹  GraphQL çš„ schema è¯­è¨€ã€‚schema è¯­è¨€åœ¨ Schema ä¸­æœ‰ç»†è¿°ã€‚</p>
<h4 id="é»˜è®¤å˜é‡ï¼ˆDefault-variablesï¼‰"><a href="#é»˜è®¤å˜é‡ï¼ˆDefault-variablesï¼‰" class="headerlink" title="é»˜è®¤å˜é‡ï¼ˆDefault variablesï¼‰"></a>é»˜è®¤å˜é‡ï¼ˆDefault variablesï¼‰</h4><p>å¯ä»¥é€šè¿‡åœ¨æŸ¥è¯¢ä¸­çš„ç±»å‹å®šä¹‰åé¢é™„å¸¦é»˜è®¤å€¼çš„æ–¹å¼ï¼Œå°†é»˜è®¤å€¼èµ‹ç»™å˜é‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">query HeroNameAndFriends($episode: Episode &#x3D; &quot;JEDI&quot;) &#123;</span><br><span class="line">  hero(episode: $episode) &#123;</span><br><span class="line">    name</span><br><span class="line">    friends &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“æ‰€æœ‰å˜é‡éƒ½æœ‰é»˜è®¤å€¼çš„æ—¶å€™ï¼Œä½ å¯ä»¥ä¸ä¼ å˜é‡ç›´æ¥è°ƒç”¨æŸ¥è¯¢ã€‚å¦‚æœä»»ä½•å˜é‡ä½œä¸ºå˜é‡å­—å…¸çš„éƒ¨åˆ†ä¼ é€’äº†ï¼Œå®ƒå°†è¦†ç›–å…¶é»˜è®¤å€¼ã€‚</p>
<h3 id="æŒ‡ä»¤ï¼ˆDirectivesï¼‰"><a href="#æŒ‡ä»¤ï¼ˆDirectivesï¼‰" class="headerlink" title="æŒ‡ä»¤ï¼ˆDirectivesï¼‰"></a>æŒ‡ä»¤ï¼ˆDirectivesï¼‰</h3><p>æˆ‘ä»¬ä¸Šé¢è®¨è®ºçš„å˜é‡ä½¿å¾—æˆ‘ä»¬å¯ä»¥é¿å…æ‰‹åŠ¨å­—ç¬¦ä¸²æ’å€¼æ„å»ºåŠ¨æ€æŸ¥è¯¢ã€‚ä¼ é€’å˜é‡ç»™å‚æ•°è§£å†³äº†ä¸€å¤§å †è¿™æ ·çš„é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬å¯èƒ½ä¹Ÿéœ€è¦ä¸€ä¸ªæ–¹å¼ä½¿ç”¨å˜é‡åŠ¨æ€åœ°æ”¹å˜æˆ‘ä»¬æŸ¥è¯¢çš„ç»“æ„ã€‚è­¬å¦‚æˆ‘ä»¬å‡è®¾æœ‰ä¸ª UI ç»„ä»¶ï¼Œå…¶æœ‰æ¦‚æ‹¬è§†å›¾å’Œè¯¦æƒ…è§†å›¾ï¼Œåè€…æ¯”å‰è€…æ‹¥æœ‰æ›´å¤šçš„å­—æ®µã€‚</p>
<p>æˆ‘ä»¬æ¥æ„å»ºä¸€ä¸ªè¿™ç§ç»„ä»¶çš„æŸ¥è¯¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">query Hero($episode: Episode, $withFriends: Boolean!) &#123;</span><br><span class="line">  hero(episode: $episode) &#123;</span><br><span class="line">    name</span><br><span class="line">    friends @include(if: $withFriends) &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;episode&quot;</span>: <span class="string">&quot;JEDI&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;withFriends&quot;</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°è¯•ä¿®æ”¹ä¸Šé¢çš„å˜é‡ï¼Œä¼ é€’ <code>true</code> ç»™ <code>withFriends</code>ï¼Œçœ‹çœ‹ç»“æœçš„å˜åŒ–ã€‚</p>
<p>æˆ‘ä»¬ç”¨äº† GraphQL ä¸­ä¸€ç§ç§°ä½œ<strong>æŒ‡ä»¤</strong>çš„æ–°ç‰¹æ€§ã€‚ä¸€ä¸ªæŒ‡ä»¤å¯ä»¥é™„ç€åœ¨å­—æ®µæˆ–è€…ç‰‡æ®µåŒ…å«çš„å­—æ®µä¸Šï¼Œç„¶åä»¥ä»»ä½•æœåŠ¡ç«¯æœŸå¾…çš„æ–¹å¼æ¥æ”¹å˜æŸ¥è¯¢çš„æ‰§è¡Œã€‚GraphQL çš„æ ¸å¿ƒè§„èŒƒåŒ…å«ä¸¤ä¸ªæŒ‡ä»¤ï¼Œå…¶å¿…é¡»è¢«ä»»ä½•è§„èŒƒå…¼å®¹çš„ GraphQL æœåŠ¡å™¨å®ç°æ‰€æ”¯æŒï¼š</p>
<ul>
<li><code>@include(if: Boolean)</code> ä»…åœ¨å‚æ•°ä¸º <code>true</code> æ—¶ï¼ŒåŒ…å«æ­¤å­—æ®µã€‚</li>
<li><code>@skip(if: Boolean)</code> å¦‚æœå‚æ•°ä¸º <code>true</code>ï¼Œè·³è¿‡æ­¤å­—æ®µã€‚</li>
</ul>
<p>æŒ‡ä»¤åœ¨ä½ ä¸å¾—ä¸é€šè¿‡å­—ç¬¦ä¸²æ“ä½œæ¥å¢å‡æŸ¥è¯¢çš„å­—æ®µæ—¶è§£æ•‘ä½ ã€‚æœåŠ¡ç«¯å®ç°ä¹Ÿå¯ä»¥å®šä¹‰æ–°çš„æŒ‡ä»¤æ¥æ·»åŠ æ–°çš„ç‰¹æ€§ã€‚</p>
<h3 id="å˜æ›´ï¼ˆMutationsï¼‰"><a href="#å˜æ›´ï¼ˆMutationsï¼‰" class="headerlink" title="å˜æ›´ï¼ˆMutationsï¼‰"></a>å˜æ›´ï¼ˆMutationsï¼‰</h3><p>GraphQL çš„å¤§éƒ¨åˆ†è®¨è®ºé›†ä¸­åœ¨æ•°æ®è·å–ï¼Œä½†æ˜¯ä»»ä½•å®Œæ•´çš„æ•°æ®å¹³å°ä¹Ÿéƒ½éœ€è¦ä¸€ä¸ªæ”¹å˜æœåŠ¡ç«¯æ•°æ®çš„æ–¹æ³•ã€‚</p>
<p>REST ä¸­ï¼Œä»»ä½•è¯·æ±‚éƒ½å¯èƒ½æœ€åå¯¼è‡´ä¸€äº›æœåŠ¡ç«¯å‰¯ä½œç”¨ï¼Œä½†æ˜¯çº¦å®šä¸Šå»ºè®®ä¸è¦ä½¿ç”¨ <code>GET</code> è¯·æ±‚æ¥ä¿®æ”¹æ•°æ®ã€‚GraphQL ä¹Ÿæ˜¯ç±»ä¼¼ â€”â€” æŠ€æœ¯ä¸Šè€Œè¨€ï¼Œä»»ä½•æŸ¥è¯¢éƒ½å¯ä»¥è¢«å®ç°ä¸ºå¯¼è‡´æ•°æ®å†™å…¥ã€‚ç„¶è€Œï¼Œå»ºä¸€ä¸ªçº¦å®šæ¥è§„èŒƒä»»ä½•å¯¼è‡´å†™å…¥çš„æ“ä½œéƒ½åº”è¯¥æ˜¾å¼é€šè¿‡å˜æ›´ï¼ˆmutationï¼‰æ¥å‘é€ã€‚</p>
<p>å°±å¦‚åŒæŸ¥è¯¢ä¸€æ ·ï¼Œå¦‚æœä»»ä½•å˜æ›´å­—æ®µè¿”å›ä¸€ä¸ªå¯¹è±¡ç±»å‹ï¼Œä½ ä¹Ÿèƒ½è¯·æ±‚å…¶åµŒå¥—å­—æ®µã€‚è·å–ä¸€ä¸ªå¯¹è±¡å˜æ›´åçš„æ–°çŠ¶æ€ä¹Ÿæ˜¯ååˆ†æœ‰ç”¨çš„ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªå˜æ›´ä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mutation CreateReviewForEpisode($ep: Episode!, $review: ReviewInput!) &#123;</span><br><span class="line">  createReview(episode: $ep, review: $review) &#123;</span><br><span class="line">    stars</span><br><span class="line">    commentary</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;ep&quot;</span>: <span class="string">&quot;JEDI&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;review&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;stars&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">&quot;commentary&quot;</span>: <span class="string">&quot;This is a great movie!&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;createReview&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;stars&quot;</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="attr">&quot;commentary&quot;</span>: <span class="string">&quot;This is a great movie!&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ <code>createReview</code> å­—æ®µå¦‚ä½•è¿”å›äº†æ–°å»ºçš„ review çš„ <code>stars</code> å’Œ <code>commentary</code> å­—æ®µã€‚è¿™åœ¨å˜æ›´å·²æœ‰æ•°æ®æ—¶ç‰¹åˆ«æœ‰ç”¨ï¼Œä¾‹å¦‚ï¼Œå½“ä¸€ä¸ªå­—æ®µè‡ªå¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªè¯·æ±‚ä¸­å˜æ›´å¹¶æŸ¥è¯¢è¿™ä¸ªå­—æ®µçš„æ–°å€¼ã€‚</p>
<p>ä½ ä¹Ÿå¯èƒ½æ³¨æ„åˆ°ï¼Œè¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¼ é€’çš„ <code>review</code> å˜é‡å¹¶éæ ‡é‡ã€‚å®ƒæ˜¯ä¸€ä¸ª<strong>è¾“å…¥å¯¹è±¡ç±»å‹</strong>ï¼Œä¸€ç§ç‰¹æ®Šçš„å¯¹è±¡ç±»å‹ï¼Œå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ä½ å¯ä»¥åœ¨ Schema é¡µé¢ä¸Šäº†è§£åˆ°æ›´å¤šå…³äºè¾“å…¥ç±»å‹çš„ä¿¡æ¯ã€‚</p>
<h4 id="å˜æ›´ä¸­çš„å¤šä¸ªå­—æ®µï¼ˆMultiple-fields-in-mutationsï¼‰"><a href="#å˜æ›´ä¸­çš„å¤šä¸ªå­—æ®µï¼ˆMultiple-fields-in-mutationsï¼‰" class="headerlink" title="å˜æ›´ä¸­çš„å¤šä¸ªå­—æ®µï¼ˆMultiple fields in mutationsï¼‰"></a>å˜æ›´ä¸­çš„å¤šä¸ªå­—æ®µï¼ˆMultiple fields in mutationsï¼‰</h4><p>ä¸€ä¸ªå˜æ›´ä¹Ÿèƒ½åŒ…å«å¤šä¸ªå­—æ®µï¼Œä¸€å¦‚æŸ¥è¯¢ã€‚æŸ¥è¯¢å’Œå˜æ›´ä¹‹é—´åç§°ä¹‹å¤–çš„ä¸€ä¸ªé‡è¦åŒºåˆ«æ˜¯ï¼š</p>
<p><strong>æŸ¥è¯¢å­—æ®µæ—¶ï¼Œæ˜¯å¹¶è¡Œæ‰§è¡Œï¼Œè€Œå˜æ›´å­—æ®µæ—¶ï¼Œæ˜¯çº¿æ€§æ‰§è¡Œï¼Œä¸€ä¸ªæ¥ç€ä¸€ä¸ªã€‚</strong></p>
<p>è¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬ä¸€ä¸ªè¯·æ±‚ä¸­å‘é€äº†ä¸¤ä¸ª <code>incrementCredits</code> å˜æ›´ï¼Œç¬¬ä¸€ä¸ªä¿è¯åœ¨ç¬¬äºŒä¸ªä¹‹å‰æ‰§è¡Œï¼Œä»¥ç¡®ä¿æˆ‘ä»¬ä¸ä¼šå‡ºç°ç«æ€ã€‚</p>
<h3 id="å†…è”ç‰‡æ®µï¼ˆInline-Fragmentsï¼‰"><a href="#å†…è”ç‰‡æ®µï¼ˆInline-Fragmentsï¼‰" class="headerlink" title="å†…è”ç‰‡æ®µï¼ˆInline Fragmentsï¼‰"></a>å†…è”ç‰‡æ®µï¼ˆInline Fragmentsï¼‰</h3><p>è·Ÿè®¸å¤šç±»å‹ç³»ç»Ÿä¸€æ ·ï¼ŒGraphQL schema ä¹Ÿå…·å¤‡å®šä¹‰æ¥å£å’Œè”åˆç±»å‹çš„èƒ½åŠ›ã€‚<a target="_blank" rel="noopener" href="https://graphql.cn/learn/schema/#interfaces">åœ¨ schema æŒ‡å—ä¸­å¯äº†è§£æ›´å¤šã€‚</a></p>
<p>å¦‚æœä½ æŸ¥è¯¢çš„å­—æ®µè¿”å›çš„æ˜¯æ¥å£æˆ–è€…è”åˆç±»å‹ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦ä½¿ç”¨<strong>å†…è”ç‰‡æ®µ</strong>æ¥å–å‡ºä¸‹å±‚å…·ä½“ç±»å‹çš„æ•°æ®ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">query HeroForEpisode($ep: Episode!) &#123;</span><br><span class="line">  hero(episode: $ep) &#123;</span><br><span class="line">    name</span><br><span class="line">    ... on Droid &#123;</span><br><span class="line">      primaryFunction</span><br><span class="line">    &#125;</span><br><span class="line">    ... on Human &#123;</span><br><span class="line">      height</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;ep&quot;</span>: <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;primaryFunction&quot;</span>: <span class="string">&quot;Astromech&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæŸ¥è¯¢ä¸­ï¼Œ<code>hero</code> å­—æ®µè¿”å› <code>Character</code> ç±»å‹ï¼Œå–å†³äº <code>episode</code> å‚æ•°ï¼Œå…¶å¯èƒ½æ˜¯ <code>Human</code> æˆ–è€… <code>Droid</code> ç±»å‹ã€‚åœ¨ç›´æ¥é€‰æ‹©çš„æƒ…å†µä¸‹ï¼Œä½ åªèƒ½è¯·æ±‚ <code>Character</code> ä¸Šå­˜åœ¨çš„å­—æ®µï¼Œè­¬å¦‚ <code>name</code>ã€‚</p>
<p>å¦‚æœè¦è¯·æ±‚å…·ä½“ç±»å‹ä¸Šçš„å­—æ®µï¼Œä½ éœ€è¦ä½¿ç”¨ä¸€ä¸ªç±»å‹æ¡ä»¶<strong>å†…è”ç‰‡æ®µ</strong>ã€‚å› ä¸ºç¬¬ä¸€ä¸ªç‰‡æ®µæ ‡æ³¨ä¸º <code>... on Droid</code>ï¼Œ<code>primaryFunction</code> ä»…åœ¨ <code>hero</code> è¿”å›çš„ <code>Character</code> ä¸º <code>Droid</code> ç±»å‹æ—¶æ‰ä¼šæ‰§è¡Œã€‚åŒç†é€‚ç”¨äº <code>Human</code> ç±»å‹çš„ <code>height</code> å­—æ®µã€‚</p>
<p>å…·åç‰‡æ®µä¹Ÿå¯ä»¥ç”¨äºåŒæ ·çš„æƒ…å†µï¼Œå› ä¸ºå…·åç‰‡æ®µæ€»æ˜¯é™„å¸¦äº†ä¸€ä¸ªç±»å‹ã€‚</p>
<h4 id="å…ƒå­—æ®µï¼ˆMeta-fieldsï¼‰"><a href="#å…ƒå­—æ®µï¼ˆMeta-fieldsï¼‰" class="headerlink" title="å…ƒå­—æ®µï¼ˆMeta fieldsï¼‰"></a>å…ƒå­—æ®µï¼ˆMeta fieldsï¼‰</h4><p>æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¹¶ä¸çŸ¥é“ä½ å°†ä» GraphQL æœåŠ¡è·å¾—ä»€ä¹ˆç±»å‹ï¼Œè¿™æ—¶å€™ä½ å°±éœ€è¦ä¸€äº›æ–¹æ³•åœ¨å®¢æˆ·ç«¯æ¥å†³å®šå¦‚ä½•å¤„ç†è¿™äº›æ•°æ®ã€‚GraphQL å…è®¸ä½ åœ¨æŸ¥è¯¢çš„ä»»ä½•ä½ç½®è¯·æ±‚ <code>__typename</code>ï¼Œä¸€ä¸ªå…ƒå­—æ®µï¼Œä»¥è·å¾—é‚£ä¸ªä½ç½®çš„å¯¹è±¡ç±»å‹åç§°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  search(text: &quot;an&quot;) &#123;</span><br><span class="line">    __typename</span><br><span class="line">    ... on Human &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">    ... on Droid &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">    ... on Starship &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;search&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;__typename&quot;</span>: <span class="string">&quot;Human&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;__typename&quot;</span>: <span class="string">&quot;Human&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;__typename&quot;</span>: <span class="string">&quot;Starship&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;TIE Advanced x1&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„æŸ¥è¯¢ä¸­ï¼Œ<code>search</code> è¿”å›äº†ä¸€ä¸ªè”åˆç±»å‹ï¼Œå…¶å¯èƒ½æ˜¯ä¸‰ç§é€‰é¡¹ä¹‹ä¸€ã€‚æ²¡æœ‰ <code>__typename</code> å­—æ®µçš„æƒ…å†µä¸‹ï¼Œå‡ ä¹ä¸å¯èƒ½åœ¨å®¢æˆ·ç«¯åˆ†è¾¨å¼€è¿™ä¸‰ä¸ªä¸åŒçš„ç±»å‹ã€‚</p>
<p>GraphQL æœåŠ¡æä¾›äº†ä¸å°‘å…ƒå­—æ®µï¼Œå‰©ä¸‹çš„éƒ¨åˆ†ç”¨äºæè¿° <a target="_blank" rel="noopener" href="https://graphql.cn/learn/introspection/">å†…çœ</a> ç³»ç»Ÿã€‚</p>
<h2 id="Schema-å’Œç±»å‹"><a href="#Schema-å’Œç±»å‹" class="headerlink" title="Schema å’Œç±»å‹"></a>Schema å’Œç±»å‹</h2><p>åœ¨æœ¬é¡µï¼Œä½ å°†å­¦åˆ°å…³äº GraphQL ç±»å‹ç³»ç»Ÿä¸­æ‰€æœ‰ä½ éœ€è¦äº†è§£çš„çŸ¥è¯†ï¼Œä»¥åŠç±»å‹ç³»ç»Ÿå¦‚ä½•æè¿°å¯ä»¥æŸ¥è¯¢çš„æ•°æ®ã€‚å› ä¸º GraphQL å¯ä»¥è¿è¡Œåœ¨ä»»ä½•åç«¯æ¡†æ¶æˆ–è€…ç¼–ç¨‹è¯­è¨€ä¹‹ä¸Šï¼Œæˆ‘ä»¬å°†æ‘’é™¤å®ç°ä¸Šçš„ç»†èŠ‚è€Œä»…ä»…ä¸“æ³¨äºå…¶æ¦‚å¿µã€‚</p>
<p>GraphQL æœåŠ¡ç«¯çš„åº”ç”¨ä»£ç çš„åŸºæœ¬å®ç°æµç¨‹</p>
<ol>
<li>å®šä¹‰ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ã€‚ç±»å‹çš„æ¯ä¸ªå­—æ®µéƒ½å¿…é¡»æ˜¯å·²å®šä¹‰çš„ï¼Œä¸”æœ€ç»ˆéƒ½æ˜¯ GraphQL ä¸­å®šä¹‰çš„ç±»å‹ã€‚</li>
<li>å®šä¹‰æ ¹ç±»å‹ã€‚æ¯ç§æ ¹ç±»å‹ä¸­åŒ…å«äº†å‡†å¤‡æš´éœ²ç»™æœåŠ¡è°ƒç”¨æ–¹çš„ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ã€‚</li>
<li>å®šä¹‰ Schemaã€‚æ¯ä¸€ä¸ª Schema ä¸­å…è®¸å‡ºç°ä¸‰ç§æ ¹ç±»å‹ï¼šqueryï¼Œmutationï¼Œsubscriptionï¼Œå…¶ä¸­è‡³å°‘è¦æœ‰ queryã€‚</li>
</ol>
<p>æ¯æ¬¡è°ƒç”¨ GraphQL æœåŠ¡ï¼Œéœ€è¦æ˜ç¡®æŒ‡å®šè°ƒç”¨ Schema ä¸­çš„å“ªä¸ªæ ¹ç±»å‹ï¼ˆé»˜è®¤æ˜¯ queryï¼‰ï¼Œç„¶åæŒ‡å®šè¿™ä¸ªæ ¹ç±»å‹ä¸‹çš„å“ªå‡ ä¸ªå­—æ®µï¼ˆæ¯ä¸ªå­—æ®µå¯¹åº”ä¸€ä¸ªç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ï¼‰ï¼Œç„¶åæŒ‡å®šè¿™äº›å­—æ®µä¸­çš„é‚£äº›å­å­—æ®µçš„å“ªå‡ ä¸ªã€‚ä¸€ç›´åˆ°æ‰€æœ‰çš„å­—æ®µéƒ½æ²¡æœ‰å­å­—æ®µä¸ºæ­¢ã€‚<br>Schema æ˜ç¡®äº†æœåŠ¡ç«¯æœ‰å“ªäº›å­—æ®µï¼ˆç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ï¼‰å¯ä»¥ç”¨ï¼Œæ¯ä¸ªå­—æ®µçš„ç±»å‹å’Œå­å­—æ®µã€‚æ¯æ¬¡æŸ¥è¯¢æ—¶ï¼ŒæœåŠ¡å™¨å°±ä¼šæ ¹æ® Schema éªŒè¯å¹¶æ‰§è¡ŒæŸ¥è¯¢ã€‚</p>
<p>å®šä¹‰ Schemaï¼ˆæ¨¡å‹ï¼‰ï¼ŒSchema æ–‡ä»¶é‡Œæœ‰4ä¸ªå…³é”®å­—ï¼š</p>
<ul>
<li>schemaâ€“è¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ªGraphQL schemaå®šä¹‰ï¼›</li>
<li>queryâ€“å®šä¹‰æŸ¥è¯¢æ“ä½œï¼Œå¿…é¡»æœ‰ã€‚</li>
<li>mutationâ€“å®šä¹‰å˜æ›´æ“ä½œï¼Œå¯ä»¥çœç•¥ã€‚</li>
<li>subscriptionâ€“å®šä¹‰è®¢é˜…æ“ä½œï¼Œå¯ä»¥çœç•¥ã€‚</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">schema &#123;  </span><br><span class="line"> query: Query</span><br><span class="line"> mutation: Mutation</span><br><span class="line"> subscription: Subscription</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç±»å‹ç³»ç»Ÿï¼ˆType-Systemï¼‰"><a href="#ç±»å‹ç³»ç»Ÿï¼ˆType-Systemï¼‰" class="headerlink" title="ç±»å‹ç³»ç»Ÿï¼ˆType Systemï¼‰"></a>ç±»å‹ç³»ç»Ÿï¼ˆType Systemï¼‰</h3><p>å¦‚æœä½ ä¹‹å‰è§åˆ°è¿‡ GraphQL æŸ¥è¯¢ï¼Œä½ å°±çŸ¥é“ GraphQL æŸ¥è¯¢è¯­è¨€åŸºæœ¬ä¸Šå°±æ˜¯å…³äºé€‰æ‹©å¯¹è±¡ä¸Šçš„å­—æ®µã€‚å› æ­¤ï¼Œä¾‹å¦‚åœ¨ä¸‹åˆ—æŸ¥è¯¢ä¸­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    appearsIn</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>æˆ‘ä»¬ä»¥ä¸€ä¸ªç‰¹æ®Šçš„å¯¹è±¡ &quot;root&quot; å¼€å§‹</li>
<li>é€‰æ‹©å…¶ä¸Šçš„ <code>hero</code> å­—æ®µ</li>
<li>å¯¹äº <code>hero</code> è¿”å›çš„å¯¹è±¡ï¼Œæˆ‘ä»¬é€‰æ‹© <code>name</code> å’Œ <code>appearsIn</code> å­—æ®µ</li>
</ol>
<p>å› ä¸ºä¸€ä¸ª GraphQL æŸ¥è¯¢çš„ç»“æ„å’Œç»“æœéå¸¸ç›¸ä¼¼ï¼Œå› æ­¤å³ä¾¿ä¸çŸ¥é“æœåŠ¡å™¨çš„æƒ…å†µï¼Œä½ ä¹Ÿèƒ½é¢„æµ‹æŸ¥è¯¢ä¼šè¿”å›ä»€ä¹ˆç»“æœã€‚ä½†æ˜¯ä¸€ä¸ªå…³äºæˆ‘ä»¬æ‰€éœ€è¦çš„æ•°æ®çš„ç¡®åˆ‡æè¿°ä¾ç„¶å¾ˆæœ‰æ„ä¹‰ï¼Œæˆ‘ä»¬èƒ½é€‰æ‹©ä»€ä¹ˆå­—æ®µï¼ŸæœåŠ¡å™¨ä¼šè¿”å›å“ªç§å¯¹è±¡ï¼Ÿè¿™äº›å¯¹è±¡ä¸‹æœ‰å“ªäº›å­—æ®µå¯ç”¨ï¼Ÿè¿™ä¾¿æ˜¯å¼•å…¥ schema çš„åŸå› ã€‚</p>
<p>æ¯ä¸€ä¸ª GraphQL æœåŠ¡éƒ½ä¼šå®šä¹‰ä¸€å¥—ç±»å‹ï¼Œç”¨ä»¥æè¿°ä½ å¯èƒ½ä»é‚£ä¸ªæœåŠ¡æŸ¥è¯¢åˆ°çš„æ•°æ®ã€‚æ¯å½“æŸ¥è¯¢åˆ°æ¥ï¼ŒæœåŠ¡å™¨å°±ä¼šæ ¹æ® schema éªŒè¯å¹¶æ‰§è¡ŒæŸ¥è¯¢ã€‚</p>
<h3 id="ç±»å‹è¯­è¨€ï¼ˆType-Languageï¼‰"><a href="#ç±»å‹è¯­è¨€ï¼ˆType-Languageï¼‰" class="headerlink" title="ç±»å‹è¯­è¨€ï¼ˆType Languageï¼‰"></a>ç±»å‹è¯­è¨€ï¼ˆType Languageï¼‰</h3><p>GraphQL æœåŠ¡å¯ä»¥ç”¨ä»»ä½•è¯­è¨€ç¼–å†™ï¼Œå› ä¸ºæˆ‘ä»¬å¹¶ä¸ä¾èµ–äºä»»ä½•ç‰¹å®šè¯­è¨€çš„å¥æ³•å¥å¼ï¼ˆè­¬å¦‚ JavaScriptï¼‰æ¥ä¸ GraphQL schema æ²Ÿé€šï¼Œæˆ‘ä»¬å®šä¹‰äº†è‡ªå·±çš„ç®€å•è¯­è¨€ï¼Œç§°ä¹‹ä¸º â€œGraphQL schema languageâ€ â€”â€” å®ƒå’Œ GraphQL çš„æŸ¥è¯¢è¯­è¨€å¾ˆç›¸ä¼¼ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿå’Œ GraphQL schema ä¹‹é—´å¯ä»¥æ— è¯­è¨€å·®å¼‚åœ°æ²Ÿé€šã€‚</p>
<h3 id="å¯¹è±¡ç±»å‹å’Œå­—æ®µï¼ˆObject-Types-and-Fieldsï¼‰"><a href="#å¯¹è±¡ç±»å‹å’Œå­—æ®µï¼ˆObject-Types-and-Fieldsï¼‰" class="headerlink" title="å¯¹è±¡ç±»å‹å’Œå­—æ®µï¼ˆObject Types and Fieldsï¼‰"></a>å¯¹è±¡ç±»å‹å’Œå­—æ®µï¼ˆObject Types and Fieldsï¼‰</h3><p>ä¸€ä¸ª GraphQL schema ä¸­çš„æœ€åŸºæœ¬çš„ç»„ä»¶æ˜¯å¯¹è±¡ç±»å‹ï¼Œå®ƒå°±è¡¨ç¤ºä½ å¯ä»¥ä»æœåŠ¡ä¸Šè·å–åˆ°ä»€ä¹ˆç±»å‹çš„å¯¹è±¡ï¼Œä»¥åŠè¿™ä¸ªå¯¹è±¡æœ‰ä»€ä¹ˆå­—æ®µã€‚ä½¿ç”¨ GraphQL schema languageï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·è¡¨ç¤ºå®ƒï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type Character &#123;</span><br><span class="line">  name: String!</span><br><span class="line">  appearsIn: [Episode!]!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è™½ç„¶è¿™è¯­è¨€å¯è¯»æ€§ç›¸å½“å¥½ï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯ä¸€èµ·çœ‹çœ‹å…¶ç”¨è¯­ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥æœ‰äº›å…±é€šçš„è¯æ±‡ï¼š</p>
<ul>
<li><code>Character</code> æ˜¯ä¸€ä¸ª <strong>GraphQL å¯¹è±¡ç±»å‹</strong>ï¼Œè¡¨ç¤ºå…¶æ˜¯ä¸€ä¸ªæ‹¥æœ‰ä¸€äº›å­—æ®µçš„ç±»å‹ã€‚ä½ çš„ schema ä¸­çš„å¤§å¤šæ•°ç±»å‹éƒ½ä¼šæ˜¯å¯¹è±¡ç±»å‹ã€‚</li>
<li><code>name</code> å’Œ <code>appearsIn</code> æ˜¯ <code>Character</code> ç±»å‹ä¸Šçš„<strong>å­—æ®µ</strong>ã€‚è¿™æ„å‘³ç€åœ¨ä¸€ä¸ªæ“ä½œ <code>Character</code> ç±»å‹çš„ GraphQL æŸ¥è¯¢ä¸­çš„ä»»ä½•éƒ¨åˆ†ï¼Œéƒ½åªèƒ½å‡ºç° <code>name</code> å’Œ <code>appearsIn</code> å­—æ®µã€‚</li>
<li><code>String</code> æ˜¯å†…ç½®çš„<strong>æ ‡é‡</strong>ç±»å‹ä¹‹ä¸€ â€”â€” æ ‡é‡ç±»å‹æ˜¯è§£æåˆ°å•ä¸ªæ ‡é‡å¯¹è±¡çš„ç±»å‹ï¼Œæ— æ³•åœ¨æŸ¥è¯¢ä¸­å¯¹å®ƒè¿›è¡Œæ¬¡çº§é€‰æ‹©ã€‚åé¢æˆ‘ä»¬å°†ç»†è¿°æ ‡é‡ç±»å‹ã€‚</li>
<li><code>String!</code> è¡¨ç¤ºè¿™ä¸ªå­—æ®µæ˜¯<strong>éç©ºçš„</strong>ï¼ŒGraphQL æœåŠ¡ä¿è¯å½“ä½ æŸ¥è¯¢è¿™ä¸ªå­—æ®µåæ€»ä¼šç»™ä½ è¿”å›ä¸€ä¸ªå€¼ã€‚åœ¨ç±»å‹è¯­è¨€é‡Œé¢ï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªæ„Ÿå¹å·æ¥è¡¨ç¤ºè¿™ä¸ªç‰¹æ€§ã€‚</li>
<li><code>[Episode!]!</code> è¡¨ç¤ºä¸€ä¸ª <code>Episode</code> <strong>æ•°ç»„</strong>ã€‚å› ä¸ºå®ƒä¹Ÿæ˜¯<strong>éç©ºçš„</strong>ï¼Œæ‰€ä»¥å½“ä½ æŸ¥è¯¢ <code>appearsIn</code> å­—æ®µçš„æ—¶å€™ï¼Œä½ ä¹Ÿæ€»èƒ½å¾—åˆ°ä¸€ä¸ªæ•°ç»„ï¼ˆé›¶ä¸ªæˆ–è€…å¤šä¸ªå…ƒç´ ï¼‰ã€‚ä¸”ç”±äº <code>Episode!</code> ä¹Ÿæ˜¯<strong>éç©ºçš„</strong>ï¼Œä½ æ€»æ˜¯å¯ä»¥é¢„æœŸåˆ°æ•°ç»„ä¸­çš„æ¯ä¸ªé¡¹ç›®éƒ½æ˜¯ä¸€ä¸ª <code>Episode</code> å¯¹è±¡ã€‚</li>
</ul>
<p>ç°åœ¨ä½ çŸ¥é“ä¸€ä¸ª GraphQL å¯¹è±¡ç±»å‹çœ‹ä¸Šå»æ˜¯æ€æ ·ï¼Œä¹ŸçŸ¥é“å¦‚ä½•é˜…è¯»åŸºç¡€çš„ GraphQL ç±»å‹è¯­è¨€äº†ã€‚</p>
<h3 id="å‚æ•°ï¼ˆArgumentsï¼‰-1"><a href="#å‚æ•°ï¼ˆArgumentsï¼‰-1" class="headerlink" title="å‚æ•°ï¼ˆArgumentsï¼‰"></a>å‚æ•°ï¼ˆArgumentsï¼‰</h3><p>GraphQL å¯¹è±¡ç±»å‹ä¸Šçš„æ¯ä¸€ä¸ªå­—æ®µéƒ½å¯èƒ½æœ‰é›¶ä¸ªæˆ–è€…å¤šä¸ªå‚æ•°ï¼Œä¾‹å¦‚ä¸‹é¢çš„ <code>length</code> å­—æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Starship &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  length(unit: LengthUnit &#x3D; METER): Float</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€æœ‰å‚æ•°éƒ½æ˜¯å…·åçš„ï¼Œä¸åƒ JavaScript æˆ–è€… Python ä¹‹ç±»çš„è¯­è¨€ï¼Œå‡½æ•°æ¥å—ä¸€ä¸ªæœ‰åºå‚æ•°åˆ—è¡¨ï¼Œè€Œåœ¨ GraphQL ä¸­ï¼Œæ‰€æœ‰å‚æ•°å¿…é¡»å…·åä¼ é€’ã€‚æœ¬ä¾‹ä¸­ï¼Œ<code>length</code> å­—æ®µå®šä¹‰äº†ä¸€ä¸ªå‚æ•°ï¼Œ<code>unit</code>ã€‚</p>
<p>å‚æ•°å¯èƒ½æ˜¯å¿…é€‰æˆ–è€…å¯é€‰çš„ï¼Œå½“ä¸€ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª<strong>é»˜è®¤å€¼</strong> â€”â€” å¦‚æœ <code>unit</code> å‚æ•°æ²¡æœ‰ä¼ é€’ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šè¢«é»˜è®¤è®¾ç½®ä¸º <code>METER</code>ã€‚</p>
<h3 id="æŸ¥è¯¢å’Œå˜æ›´ç±»å‹ï¼ˆThe-Query-and-Mutation-Typesï¼‰"><a href="#æŸ¥è¯¢å’Œå˜æ›´ç±»å‹ï¼ˆThe-Query-and-Mutation-Typesï¼‰" class="headerlink" title="æŸ¥è¯¢å’Œå˜æ›´ç±»å‹ï¼ˆThe Query and Mutation Typesï¼‰"></a>æŸ¥è¯¢å’Œå˜æ›´ç±»å‹ï¼ˆThe Query and Mutation Typesï¼‰</h3><p>ä½ çš„ schema ä¸­å¤§éƒ¨åˆ†çš„ç±»å‹éƒ½æ˜¯æ™®é€šå¯¹è±¡ç±»å‹ï¼Œä½†æ˜¯ä¸€ä¸ª schema å†…æœ‰ä¸¤ä¸ªç‰¹æ®Šç±»å‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">schema &#123;</span><br><span class="line">  query: Query</span><br><span class="line">  mutation: Mutation</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ¯ä¸€ä¸ª GraphQL æœåŠ¡éƒ½æœ‰ä¸€ä¸ª <code>query</code> ç±»å‹ï¼Œå¯èƒ½æœ‰ä¸€ä¸ª <code>mutation</code> ç±»å‹ã€‚è¿™ä¸¤ä¸ªç±»å‹å’Œå¸¸è§„å¯¹è±¡ç±»å‹æ— å·®ï¼Œä½†æ˜¯å®ƒä»¬ä¹‹æ‰€ä»¥ç‰¹æ®Šï¼Œæ˜¯å› ä¸ºå®ƒä»¬å®šä¹‰äº†æ¯ä¸€ä¸ª GraphQL æŸ¥è¯¢çš„<strong>å…¥å£</strong>ã€‚å› æ­¤å¦‚æœä½ çœ‹åˆ°ä¸€ä¸ªåƒè¿™æ ·çš„æŸ¥è¯¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">query &#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">  droid(id: &quot;2000&quot;) &#123;</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;droid&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;C-3PO&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>é‚£è¡¨ç¤ºè¿™ä¸ª GraphQL æœåŠ¡éœ€è¦ä¸€ä¸ª <code>Query</code> ç±»å‹ï¼Œä¸”å…¶ä¸Šæœ‰ <code>hero</code> å’Œ <code>droid</code> å­—æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type Query &#123;</span><br><span class="line">  hero(episode: Episode): Character</span><br><span class="line">  droid(id: ID!): Droid</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å˜æ›´ä¹Ÿæ˜¯ç±»ä¼¼çš„å·¥ä½œæ–¹å¼ â€”â€” ä½ åœ¨ <code>Mutation</code> ç±»å‹ä¸Šå®šä¹‰ä¸€äº›å­—æ®µï¼Œç„¶åè¿™äº›å­—æ®µå°†ä½œä¸º mutation æ ¹å­—æ®µä½¿ç”¨ï¼Œæ¥ç€ä½ å°±èƒ½åœ¨ä½ çš„æŸ¥è¯¢ä¸­è°ƒç”¨ã€‚</p>
<p>æœ‰å¿…è¦è®°ä½çš„æ˜¯ï¼Œé™¤äº†ä½œä¸º schema çš„å…¥å£ï¼Œ<code>Query</code> å’Œ <code>Mutation</code> ç±»å‹ä¸å…¶å®ƒ GraphQL å¯¹è±¡ç±»å‹åˆ«æ— äºŒè‡´ï¼Œå®ƒä»¬çš„å­—æ®µä¹Ÿæ˜¯ä¸€æ ·çš„å·¥ä½œæ–¹å¼ã€‚</p>
<h3 id="æ ‡é‡ç±»å‹ï¼ˆScalar-Typesï¼‰"><a href="#æ ‡é‡ç±»å‹ï¼ˆScalar-Typesï¼‰" class="headerlink" title="æ ‡é‡ç±»å‹ï¼ˆScalar Typesï¼‰"></a>æ ‡é‡ç±»å‹ï¼ˆScalar Typesï¼‰</h3><p>ä¸€ä¸ªå¯¹è±¡ç±»å‹æœ‰è‡ªå·±çš„åå­—å’Œå­—æ®µï¼Œè€ŒæŸäº›æ—¶å€™ï¼Œè¿™äº›å­—æ®µå¿…ç„¶ä¼šè§£æåˆ°å…·ä½“æ•°æ®ã€‚è¿™å°±æ˜¯æ ‡é‡ç±»å‹çš„æ¥æºï¼šå®ƒä»¬è¡¨ç¤ºå¯¹åº” GraphQL æŸ¥è¯¢çš„å¶å­èŠ‚ç‚¹ã€‚</p>
<p>ä¸‹åˆ—æŸ¥è¯¢ä¸­ï¼Œ<code>name</code> å’Œ <code>appearsIn</code> å­—æ®µå°†è§£æåˆ°æ ‡é‡ç±»å‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    appearsIn</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æˆ‘ä»¬çŸ¥é“è¿™äº›å­—æ®µæ²¡æœ‰ä»»ä½•æ¬¡çº§å­—æ®µ â€”â€” å› ä¸ºè®©å®ƒä»¬æ˜¯æŸ¥è¯¢çš„å¶å­èŠ‚ç‚¹ã€‚</p>
<p>GraphQL è‡ªå¸¦ä¸€ç»„é»˜è®¤æ ‡é‡ç±»å‹ï¼š</p>
<ul>
<li><code>Int</code>ï¼šæœ‰ç¬¦å· 32 ä½æ•´æ•°ã€‚</li>
<li><code>Float</code>ï¼šæœ‰ç¬¦å·åŒç²¾åº¦æµ®ç‚¹å€¼ã€‚</li>
<li><code>String</code>ï¼šUTFâ€8 å­—ç¬¦åºåˆ—ã€‚</li>
<li><code>Boolean</code>ï¼š<code>true</code> æˆ–è€… <code>false</code>ã€‚</li>
<li><code>ID</code>ï¼šID æ ‡é‡ç±»å‹è¡¨ç¤ºä¸€ä¸ªå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œé€šå¸¸ç”¨ä»¥é‡æ–°è·å–å¯¹è±¡æˆ–è€…ä½œä¸ºç¼“å­˜ä¸­çš„é”®ã€‚ID ç±»å‹ä½¿ç”¨å’Œ String ä¸€æ ·çš„æ–¹å¼åºåˆ—åŒ–ï¼›ç„¶è€Œå°†å…¶å®šä¹‰ä¸º ID æ„å‘³ç€å¹¶ä¸éœ€è¦äººç±»å¯è¯»å‹ã€‚</li>
</ul>
<p>å¤§éƒ¨åˆ†çš„ GraphQL æœåŠ¡å®ç°ä¸­ï¼Œéƒ½æœ‰è‡ªå®šä¹‰æ ‡é‡ç±»å‹çš„æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ª <code>Date</code> ç±»å‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scalar Date</span><br></pre></td></tr></table></figure>

<p>ç„¶åå°±å–å†³äºæˆ‘ä»¬çš„å®ç°ä¸­å¦‚ä½•å®šä¹‰å°†å…¶åºåˆ—åŒ–ã€ååºåˆ—åŒ–å’ŒéªŒè¯ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æŒ‡å®š <code>Date</code> ç±»å‹åº”è¯¥æ€»æ˜¯è¢«åºåˆ—åŒ–æˆæ•´å‹æ—¶é—´æˆ³ï¼Œè€Œå®¢æˆ·ç«¯åº”è¯¥çŸ¥é“å»è¦æ±‚ä»»ä½• date å­—æ®µéƒ½æ˜¯è¿™ä¸ªæ ¼å¼ã€‚</p>
<h3 id="æšä¸¾ç±»å‹ï¼ˆEnumeration-Typesï¼‰"><a href="#æšä¸¾ç±»å‹ï¼ˆEnumeration-Typesï¼‰" class="headerlink" title="æšä¸¾ç±»å‹ï¼ˆEnumeration Typesï¼‰"></a>æšä¸¾ç±»å‹ï¼ˆEnumeration Typesï¼‰</h3><p>ä¹Ÿç§°ä½œ<strong>æšä¸¾ï¼ˆenumï¼‰</strong>ï¼Œæšä¸¾ç±»å‹æ˜¯ä¸€ç§ç‰¹æ®Šçš„æ ‡é‡ï¼Œå®ƒé™åˆ¶åœ¨ä¸€ä¸ªç‰¹æ®Šçš„å¯é€‰å€¼é›†åˆå†…ã€‚è¿™è®©ä½ èƒ½å¤Ÿï¼š</p>
<ol>
<li>éªŒè¯è¿™ä¸ªç±»å‹çš„ä»»ä½•å‚æ•°æ˜¯å¯é€‰å€¼çš„çš„æŸä¸€ä¸ª</li>
<li>ä¸ç±»å‹ç³»ç»Ÿæ²Ÿé€šï¼Œä¸€ä¸ªå­—æ®µæ€»æ˜¯ä¸€ä¸ªæœ‰é™å€¼é›†åˆçš„å…¶ä¸­ä¸€ä¸ªå€¼ã€‚</li>
</ol>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨ GraphQL schema è¯­è¨€è¡¨ç¤ºçš„ enum å®šä¹‰ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">enum Episode &#123;</span><br><span class="line">  NEWHOPE</span><br><span class="line">  EMPIRE</span><br><span class="line">  JEDI</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™è¡¨ç¤ºæ— è®ºæˆ‘ä»¬åœ¨ schema çš„å“ªå¤„ä½¿ç”¨äº† <code>Episode</code>ï¼Œéƒ½å¯ä»¥è‚¯å®šå®ƒè¿”å›çš„æ˜¯ <code>NEWHOPE</code>ã€<code>EMPIRE</code> å’Œ <code>JEDI</code> ä¹‹ä¸€ã€‚</p>
<p>æ³¨æ„ï¼Œå„ç§è¯­è¨€å®ç°çš„ GraphQL æœåŠ¡ä¼šæœ‰å…¶ç‹¬ç‰¹çš„æšä¸¾å¤„ç†æ–¹å¼ã€‚å¯¹äºå°†æšä¸¾ä½œä¸ºä¸€ç­‰å…¬æ°‘çš„è¯­è¨€ï¼Œå®ƒçš„å®ç°å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ï¼›è€Œå¯¹äºåƒ JavaScript è¿™æ ·æ²¡æœ‰æšä¸¾æ”¯æŒçš„è¯­è¨€ï¼Œè¿™äº›æšä¸¾å€¼å¯èƒ½å°±è¢«å†…éƒ¨æ˜ å°„æˆæ•´æ•°å€¼ã€‚å½“ç„¶ï¼Œè¿™äº›ç»†èŠ‚éƒ½ä¸ä¼šæ³„æ¼åˆ°å®¢æˆ·ç«¯ï¼Œå®¢æˆ·ç«¯ä¼šæ ¹æ®å­—ç¬¦ä¸²åç§°æ¥æ“ä½œæšä¸¾å€¼ã€‚</p>
<h3 id="åˆ—è¡¨å’Œéç©ºï¼ˆLists-and-Non-Nullï¼‰"><a href="#åˆ—è¡¨å’Œéç©ºï¼ˆLists-and-Non-Nullï¼‰" class="headerlink" title="åˆ—è¡¨å’Œéç©ºï¼ˆLists and Non-Nullï¼‰"></a>åˆ—è¡¨å’Œéç©ºï¼ˆLists and Non-Nullï¼‰</h3><p>å¯¹è±¡ç±»å‹ã€æ ‡é‡ä»¥åŠæšä¸¾æ˜¯ GraphQL ä¸­ä½ å”¯ä¸€å¯ä»¥å®šä¹‰çš„ç±»å‹ç§ç±»ã€‚ä½†æ˜¯å½“ä½ åœ¨ schema çš„å…¶ä»–éƒ¨åˆ†ä½¿ç”¨è¿™äº›ç±»å‹æ—¶ï¼Œæˆ–è€…åœ¨ä½ çš„æŸ¥è¯¢å˜é‡å£°æ˜å¤„ä½¿ç”¨æ—¶ï¼Œä½ å¯ä»¥ç»™å®ƒä»¬åº”ç”¨é¢å¤–çš„<strong>ç±»å‹ä¿®é¥°ç¬¦</strong>æ¥å½±å“è¿™äº›å€¼çš„éªŒè¯ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">type Character &#123;</span><br><span class="line">  name: String!</span><br><span class="line">  appearsIn: [Episode]!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤å¤„æˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ª <code>String</code> ç±»å‹ï¼Œå¹¶é€šè¿‡åœ¨ç±»å‹ååé¢æ·»åŠ ä¸€ä¸ªæ„Ÿå¹å·<code>!</code>å°†å…¶æ ‡æ³¨ä¸º<strong>éç©º</strong>ã€‚è¿™è¡¨ç¤ºæˆ‘ä»¬çš„æœåŠ¡å™¨å¯¹äºè¿™ä¸ªå­—æ®µï¼Œæ€»æ˜¯ä¼šè¿”å›ä¸€ä¸ªéç©ºå€¼ï¼Œå¦‚æœå®ƒç»“æœå¾—åˆ°äº†ä¸€ä¸ªç©ºå€¼ï¼Œé‚£ä¹ˆäº‹å®ä¸Šå°†ä¼šè§¦å‘ä¸€ä¸ª GraphQL æ‰§è¡Œé”™è¯¯ï¼Œä»¥è®©å®¢æˆ·ç«¯çŸ¥é“å‘ç”Ÿäº†é”™è¯¯ã€‚</p>
<p>éç©ºç±»å‹ä¿®é¥°ç¬¦ä¹Ÿå¯ä»¥ç”¨äºå®šä¹‰å­—æ®µä¸Šçš„å‚æ•°ï¼Œå¦‚æœè¿™ä¸ªå‚æ•°ä¸Šä¼ é€’äº†ä¸€ä¸ªç©ºå€¼ï¼ˆä¸ç®¡é€šè¿‡ GraphQL å­—ç¬¦ä¸²è¿˜æ˜¯å˜é‡ï¼‰ï¼Œé‚£ä¹ˆä¼šå¯¼è‡´æœåŠ¡å™¨è¿”å›ä¸€ä¸ªéªŒè¯é”™è¯¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">query DroidById($id: ID!) &#123;</span><br><span class="line">  droid(id: $id) &#123;</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;id&quot;</span>: <span class="literal">null</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;errors&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;Variable \&quot;$id\&quot; of required type \&quot;ID!\&quot; was not provided.&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;locations&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;line&quot;</span>: <span class="number">1</span>,</span><br><span class="line">          <span class="attr">&quot;column&quot;</span>: <span class="number">17</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ—è¡¨çš„è¿ä½œæ–¹å¼ä¹Ÿç±»ä¼¼ï¼šæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªç±»å‹ä¿®é¥°ç¬¦æ¥æ ‡è®°ä¸€ä¸ªç±»å‹ä¸º <code>List</code>ï¼Œè¡¨ç¤ºè¿™ä¸ªå­—æ®µä¼šè¿”å›è¿™ä¸ªç±»å‹çš„æ•°ç»„ã€‚åœ¨ GraphQL schema è¯­è¨€ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å°†ç±»å‹åŒ…åœ¨æ–¹æ‹¬å·ï¼ˆ<code>[</code> å’Œ <code>]</code>ï¼‰ä¸­çš„æ–¹å¼æ¥æ ‡è®°åˆ—è¡¨ã€‚åˆ—è¡¨å¯¹äºå‚æ•°ä¹Ÿæ˜¯ä¸€æ ·çš„è¿ä½œæ–¹å¼ï¼ŒéªŒè¯çš„æ­¥éª¤ä¼šè¦æ±‚å¯¹åº”å€¼ä¸ºæ•°ç»„ã€‚</p>
<p>éç©ºå’Œåˆ—è¡¨ä¿®é¥°ç¬¦å¯ä»¥ç»„åˆä½¿ç”¨ã€‚ä¾‹å¦‚ä½ å¯ä»¥è¦æ±‚ä¸€ä¸ªéç©ºå­—ç¬¦ä¸²çš„æ•°ç»„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myField: [String!]</span><br></pre></td></tr></table></figure>

<p>è¿™è¡¨ç¤º<strong>æ•°ç»„æœ¬èº«</strong>å¯ä»¥ä¸ºç©ºï¼Œä½†æ˜¯å…¶ä¸èƒ½æœ‰ä»»ä½•ç©ºå€¼æˆå‘˜ã€‚ç”¨ JSON ä¸¾ä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myField: <span class="literal">null</span> <span class="comment">// æœ‰æ•ˆ</span></span><br><span class="line">myField: [] <span class="comment">// æœ‰æ•ˆ</span></span><br><span class="line">myField: [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>] <span class="comment">// æœ‰æ•ˆ</span></span><br><span class="line">myField: [<span class="string">&#x27;a&#x27;</span>, <span class="literal">null</span>, <span class="string">&#x27;b&#x27;</span>] <span class="comment">// é”™è¯¯</span></span><br></pre></td></tr></table></figure>

<p>ç„¶åï¼Œæˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ªä¸å¯ä¸ºç©ºçš„å­—ç¬¦ä¸²æ•°ç»„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">myField: [String]!</span><br></pre></td></tr></table></figure>

<p>è¿™è¡¨ç¤ºæ•°ç»„æœ¬èº«ä¸èƒ½ä¸ºç©ºï¼Œä½†æ˜¯å…¶å¯ä»¥åŒ…å«ç©ºå€¼æˆå‘˜ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myField: <span class="literal">null</span> <span class="comment">// é”™è¯¯</span></span><br><span class="line">myField: [] <span class="comment">// æœ‰æ•ˆ</span></span><br><span class="line">myField: [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>] <span class="comment">// æœ‰æ•ˆ</span></span><br><span class="line">myField: [<span class="string">&#x27;a&#x27;</span>, <span class="literal">null</span>, <span class="string">&#x27;b&#x27;</span>] <span class="comment">// æœ‰æ•ˆ</span></span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥æ ¹æ®éœ€æ±‚åµŒå¥—ä»»æ„å±‚éç©ºå’Œåˆ—è¡¨ä¿®é¥°ç¬¦ã€‚</p>
<h3 id="æ¥å£ï¼ˆInterfacesï¼‰"><a href="#æ¥å£ï¼ˆInterfacesï¼‰" class="headerlink" title="æ¥å£ï¼ˆInterfacesï¼‰"></a>æ¥å£ï¼ˆInterfacesï¼‰</h3><p>è·Ÿè®¸å¤šç±»å‹ç³»ç»Ÿä¸€æ ·ï¼ŒGraphQL æ”¯æŒæ¥å£ã€‚ä¸€ä¸ª<strong>æ¥å£</strong>æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»å‹ï¼Œå®ƒåŒ…å«æŸäº›å­—æ®µï¼Œè€Œå¯¹è±¡ç±»å‹å¿…é¡»åŒ…å«è¿™äº›å­—æ®µï¼Œæ‰èƒ½ç®—å®ç°äº†è¿™ä¸ªæ¥å£ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥ç”¨ä¸€ä¸ª <code>Character</code> æ¥å£ç”¨ä»¥è¡¨ç¤ºã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹ä¸‰éƒ¨æ›²ä¸­çš„ä»»ä½•è§’è‰²ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">interface Character &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  friends: [Character]</span><br><span class="line">  appearsIn: [Episode]!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ„å‘³ç€ä»»ä½•<strong>å®ç°</strong> <code>Character</code> çš„ç±»å‹éƒ½è¦å…·æœ‰è¿™äº›å­—æ®µï¼Œå¹¶æœ‰å¯¹åº”å‚æ•°å’Œè¿”å›ç±»å‹ã€‚</p>
<p>ä¾‹å¦‚ï¼Œè¿™é‡Œæœ‰ä¸€äº›å¯èƒ½å®ç°äº† <code>Character</code> çš„ç±»å‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">type Human implements Character &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  friends: [Character]</span><br><span class="line">  appearsIn: [Episode]!</span><br><span class="line">  starships: [Starship]</span><br><span class="line">  totalCredits: Int</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Droid implements Character &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  name: String!</span><br><span class="line">  friends: [Character]</span><br><span class="line">  appearsIn: [Episode]!</span><br><span class="line">  primaryFunction: String</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯è§è¿™ä¸¤ä¸ªç±»å‹éƒ½å…·å¤‡ <code>Character</code> æ¥å£çš„æ‰€æœ‰å­—æ®µï¼Œä½†ä¹Ÿå¼•å…¥äº†å…¶ä»–çš„å­—æ®µ <code>totalCredits</code>ã€<code>starships</code> å’Œ <code>primaryFunction</code>ï¼Œè¿™éƒ½å±äºç‰¹å®šçš„ç±»å‹çš„è§’è‰²ã€‚</p>
<p>å½“ä½ è¦è¿”å›ä¸€ä¸ªå¯¹è±¡æˆ–è€…ä¸€ç»„å¯¹è±¡ï¼Œç‰¹åˆ«æ˜¯ä¸€ç»„ä¸åŒçš„ç±»å‹æ—¶ï¼Œæ¥å£å°±æ˜¾å¾—ç‰¹åˆ«æœ‰ç”¨ã€‚</p>
<p>æ³¨æ„ä¸‹é¢ä¾‹å­çš„æŸ¥è¯¢ä¼šäº§ç”Ÿé”™è¯¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">query HeroForEpisode($ep: Episode!) &#123;</span><br><span class="line">  hero(episode: $ep) &#123;</span><br><span class="line">    name</span><br><span class="line">    primaryFunction</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;ep&quot;</span>: <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;errors&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;Cannot query field \&quot;primaryFunction\&quot; on type \&quot;Character\&quot;. Did you mean to use an inline fragment on \&quot;Droid\&quot;?&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;locations&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;line&quot;</span>: <span class="number">4</span>,</span><br><span class="line">          <span class="attr">&quot;column&quot;</span>: <span class="number">5</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>hero</code> å­—æ®µè¿”å› <code>Character</code> ç±»å‹ï¼Œå–å†³äº <code>episode</code> å‚æ•°ï¼Œå®ƒå¯èƒ½æ˜¯ <code>Human</code> æˆ–è€… <code>Droid</code> ç±»å‹ã€‚ä¸Šé¢çš„æŸ¥è¯¢ä¸­ï¼Œä½ åªèƒ½æŸ¥è¯¢ <code>Character</code> æ¥å£ä¸­å­˜åœ¨çš„å­—æ®µï¼Œè€Œå…¶ä¸­å¹¶ä¸åŒ…å« <code>primaryFunction</code>ã€‚</p>
<p>å¦‚æœè¦æŸ¥è¯¢ä¸€ä¸ªåªå­˜åœ¨äºç‰¹å®šå¯¹è±¡ç±»å‹ä¸Šçš„å­—æ®µï¼Œä½ éœ€è¦ä½¿ç”¨å†…è”ç‰‡æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">query HeroForEpisode($ep: Episode!) &#123;</span><br><span class="line">  hero(episode: $ep) &#123;</span><br><span class="line">    name</span><br><span class="line">    ... on Droid &#123;</span><br><span class="line">      primaryFunction</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;ep&quot;</span>: <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;primaryFunction&quot;</span>: <span class="string">&quot;Astromech&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>ä½ å¯ä»¥åœ¨æŸ¥è¯¢æŒ‡å—çš„ <a target="_blank" rel="noopener" href="https://graphql.cn/learn/queries/#inline-fragments">å†…è”ç‰‡æ®µ</a> ç« èŠ‚äº†è§£æ›´å¤šç›¸å…³ä¿¡æ¯ã€‚</p>
<h3 id="è”åˆç±»å‹ï¼ˆUnion-Typesï¼‰"><a href="#è”åˆç±»å‹ï¼ˆUnion-Typesï¼‰" class="headerlink" title="è”åˆç±»å‹ï¼ˆUnion Typesï¼‰"></a>è”åˆç±»å‹ï¼ˆUnion Typesï¼‰</h3><p>è”åˆç±»å‹å’Œæ¥å£ååˆ†ç›¸ä¼¼ï¼Œä½†æ˜¯å®ƒå¹¶ä¸æŒ‡å®šç±»å‹ä¹‹é—´çš„ä»»ä½•å…±åŒå­—æ®µã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">union SearchResult &#x3D; Human | Droid | Starship</span><br></pre></td></tr></table></figure>

<p>åœ¨æˆ‘ä»¬çš„schemaä¸­ï¼Œä»»ä½•è¿”å›ä¸€ä¸ª <code>SearchResult</code> ç±»å‹çš„åœ°æ–¹ï¼Œéƒ½å¯èƒ½å¾—åˆ°ä¸€ä¸ª <code>Human</code>ã€<code>Droid</code> æˆ–è€… <code>Starship</code>ã€‚æ³¨æ„ï¼Œè”åˆç±»å‹çš„æˆå‘˜éœ€è¦æ˜¯å…·ä½“å¯¹è±¡ç±»å‹ï¼›ä½ ä¸èƒ½ä½¿ç”¨æ¥å£æˆ–è€…å…¶ä»–è”åˆç±»å‹æ¥åˆ›é€ ä¸€ä¸ªè”åˆç±»å‹ã€‚</p>
<p>è¿™æ—¶å€™ï¼Œå¦‚æœä½ éœ€è¦æŸ¥è¯¢ä¸€ä¸ªè¿”å› <code>SearchResult</code> è”åˆç±»å‹çš„å­—æ®µï¼Œé‚£ä¹ˆä½ å¾—ä½¿ç”¨æ¡ä»¶ç‰‡æ®µæ‰èƒ½æŸ¥è¯¢ä»»æ„å­—æ®µã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  search(text: &quot;an&quot;) &#123;</span><br><span class="line">    __typename</span><br><span class="line">    ... on Human &#123;</span><br><span class="line">      name</span><br><span class="line">      height</span><br><span class="line">    &#125;</span><br><span class="line">    ... on Droid &#123;</span><br><span class="line">      name</span><br><span class="line">      primaryFunction</span><br><span class="line">    &#125;</span><br><span class="line">    ... on Starship &#123;</span><br><span class="line">      name</span><br><span class="line">      length</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;search&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;__typename&quot;</span>: <span class="string">&quot;Human&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;height&quot;</span>: <span class="number">1.8</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;__typename&quot;</span>: <span class="string">&quot;Human&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;height&quot;</span>: <span class="number">1.5</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;__typename&quot;</span>: <span class="string">&quot;Starship&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;TIE Advanced x1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;length&quot;</span>: <span class="number">9.2</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>_typename</code> å­—æ®µè§£æä¸º <code>String</code>ï¼Œå®ƒå…è®¸ä½ åœ¨å®¢æˆ·ç«¯åŒºåˆ†ä¸åŒçš„æ•°æ®ç±»å‹ã€‚</p>
<p>æ­¤å¤–ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç”±äº <code>Human</code> å’Œ <code>Droid</code> å…±äº«ä¸€ä¸ªå…¬å…±æ¥å£ï¼ˆ<code>Character</code>ï¼‰ï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªåœ°æ–¹æŸ¥è¯¢å®ƒä»¬çš„å…¬å…±å­—æ®µï¼Œè€Œä¸å¿…åœ¨å¤šä¸ªç±»å‹ä¸­é‡å¤ç›¸åŒçš„å­—æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  search(text: &quot;an&quot;) &#123;</span><br><span class="line">    __typename</span><br><span class="line">    ... on Character &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">    ... on Human &#123;</span><br><span class="line">      height</span><br><span class="line">    &#125;</span><br><span class="line">    ... on Droid &#123;</span><br><span class="line">      primaryFunction</span><br><span class="line">    &#125;</span><br><span class="line">    ... on Starship &#123;</span><br><span class="line">      name</span><br><span class="line">      length</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ <code>name</code> ä»ç„¶éœ€è¦æŒ‡å®šåœ¨ <code>Starship</code> ä¸Šï¼Œå¦åˆ™å®ƒä¸ä¼šå‡ºç°åœ¨ç»“æœä¸­ï¼Œå› ä¸º <code>Starship</code> å¹¶ä¸æ˜¯ä¸€ä¸ª <code>Character</code>ï¼</p>
<h3 id="è¾“å…¥ç±»å‹ï¼ˆInput-Typesï¼‰"><a href="#è¾“å…¥ç±»å‹ï¼ˆInput-Typesï¼‰" class="headerlink" title="è¾“å…¥ç±»å‹ï¼ˆInput Typesï¼‰"></a>è¾“å…¥ç±»å‹ï¼ˆInput Typesï¼‰</h3><p>ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªè®¨è®ºè¿‡å°†ä¾‹å¦‚æšä¸¾å’Œå­—ç¬¦ä¸²ç­‰æ ‡é‡å€¼ä½œä¸ºå‚æ•°ä¼ é€’ç»™å­—æ®µï¼Œä½†æ˜¯ä½ ä¹Ÿèƒ½å¾ˆå®¹æ˜“åœ°ä¼ é€’å¤æ‚å¯¹è±¡ã€‚è¿™åœ¨å˜æ›´ï¼ˆmutationï¼‰ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºæœ‰æ—¶å€™ä½ éœ€è¦ä¼ é€’ä¸€æ•´ä¸ªå¯¹è±¡ä½œä¸ºæ–°å»ºå¯¹è±¡ã€‚åœ¨ GraphQL schema language ä¸­ï¼Œè¾“å…¥å¯¹è±¡çœ‹ä¸Šå»å’Œå¸¸è§„å¯¹è±¡ä¸€æ¨¡ä¸€æ ·ï¼Œé™¤äº†å…³é”®å­—æ˜¯ <code>input</code> è€Œä¸æ˜¯ <code>type</code>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">input ReviewInput &#123;</span><br><span class="line">  stars: Int!</span><br><span class="line">  commentary: String</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥åƒè¿™æ ·åœ¨å˜æ›´ï¼ˆmutationï¼‰ä¸­ä½¿ç”¨è¾“å…¥å¯¹è±¡ç±»å‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mutation CreateReviewForEpisode($ep: Episode!, $review: ReviewInput!) &#123;</span><br><span class="line">  createReview(episode: $ep, review: $review) &#123;</span><br><span class="line">    stars</span><br><span class="line">    commentary</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;ep&quot;</span>: <span class="string">&quot;JEDI&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;review&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;stars&quot;</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">&quot;commentary&quot;</span>: <span class="string">&quot;This is a great movie!&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;createReview&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;stars&quot;</span>: <span class="number">5</span>,</span><br><span class="line">      <span class="attr">&quot;commentary&quot;</span>: <span class="string">&quot;This is a great movie!&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è¾“å…¥å¯¹è±¡ç±»å‹ä¸Šçš„å­—æ®µæœ¬èº«ä¹Ÿå¯ä»¥æŒ‡ä»£è¾“å…¥å¯¹è±¡ç±»å‹ï¼Œä½†æ˜¯ä½ ä¸èƒ½åœ¨ä½ çš„ schema æ··æ·†è¾“å…¥å’Œè¾“å‡ºç±»å‹ã€‚è¾“å…¥å¯¹è±¡ç±»å‹çš„å­—æ®µå½“ç„¶ä¹Ÿä¸èƒ½æ‹¥æœ‰å‚æ•°ã€‚</p>
<h2 id="éªŒè¯"><a href="#éªŒè¯" class="headerlink" title="éªŒè¯"></a>éªŒè¯</h2><p>é€šè¿‡ä½¿ç”¨ç±»å‹ç³»ç»Ÿï¼Œä½ å¯ä»¥é¢„åˆ¤ä¸€ä¸ªæŸ¥è¯¢æ˜¯å¦æœ‰æ•ˆã€‚è¿™è®©æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯å¯ä»¥åœ¨æ— æ•ˆæŸ¥è¯¢åˆ›å»ºæ—¶å°±æœ‰æ•ˆåœ°é€šçŸ¥å¼€å‘è€…ï¼Œè€Œä¸ç”¨ä¾èµ–è¿è¡Œæ—¶æ£€æŸ¥ã€‚</p>
<p>å¯¹äºæˆ‘ä»¬çš„ã€Šæ˜Ÿçƒå¤§æˆ˜ã€‹çš„æ¡ˆä¾‹ï¼Œ<a target="_blank" rel="noopener" href="https://github.com/graphql/graphql-js/blob/master/src/__tests__/starWarsValidation-test.js">starWarsValidation-test.js</a> è¿™ä¸ªæ–‡ä»¶åŒ…å«äº†è‹¥å¹²å¯¹äºå„ç§æ— æ•ˆæŸ¥è¯¢çš„æ¼”ç¤ºï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œç”¨äºæ£€æµ‹å‚è€ƒå®ç°çš„éªŒè¯å™¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    ...NameAndAppearances</span><br><span class="line">    friends &#123;</span><br><span class="line">      ...NameAndAppearances</span><br><span class="line">      friends &#123;</span><br><span class="line">        ...NameAndAppearances</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fragment NameAndAppearances on Character &#123;</span><br><span class="line">  name</span><br><span class="line">  appearsIn</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;friends&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">            <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">            <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="attr">&quot;friends&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;C-3PO&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">            <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">            <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="attr">&quot;friends&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">            <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">            <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">          ],</span><br><span class="line">          <span class="attr">&quot;friends&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;C-3PO&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">                <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">                <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">              ]</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢è¿™ä¸ªæŸ¥è¯¢æ˜¯æœ‰æ•ˆçš„ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€äº›æ— æ•ˆæŸ¥è¯¢â€¦â€¦</p>
<p>ç‰‡æ®µä¸èƒ½å¼•ç”¨å…¶è‡ªèº«æˆ–è€…åˆ›é€ å›ç¯ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´ç»“æœæ— è¾¹ç•Œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç›¸åŒçš„æŸ¥è¯¢ï¼Œä½†æ˜¯æ²¡æœ‰æ˜¾å¼çš„ä¸‰å±‚åµŒå¥—ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    ...NameAndAppearancesAndFriends</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fragment NameAndAppearancesAndFriends on Character &#123;</span><br><span class="line">  name</span><br><span class="line">  appearsIn</span><br><span class="line">  friends &#123;</span><br><span class="line">    ...NameAndAppearancesAndFriends</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;errors&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;Cannot spread fragment \&quot;NameAndAppearancesAndFriends\&quot; within itself.&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;locations&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;line&quot;</span>: <span class="number">11</span>,</span><br><span class="line">          <span class="attr">&quot;column&quot;</span>: <span class="number">5</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æŸ¥è¯¢å­—æ®µçš„æ—¶å€™ï¼Œæˆ‘ä»¬åªèƒ½æŸ¥è¯¢ç»™å®šç±»å‹ä¸Šçš„å­—æ®µã€‚å› æ­¤ç”±äº <code>hero</code> è¿”å› <code>Character</code> ç±»å‹ï¼Œæˆ‘ä»¬åªèƒ½æŸ¥è¯¢ <code>Character</code> ä¸Šçš„å­—æ®µã€‚å› ä¸ºè¿™ä¸ªç±»å‹ä¸Šæ²¡æœ‰ <code>favoriteSpaceship</code> å­—æ®µï¼Œæ‰€ä»¥è¿™ä¸ªæŸ¥è¯¢æ˜¯æ— æ•ˆçš„ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># æ— æ•ˆï¼šfavoriteSpaceship ä¸å­˜åœ¨äº Character ä¹‹ä¸Š</span><br><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    favoriteSpaceship</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;errors&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;Cannot query field \&quot;favoriteSpaceship\&quot; on type \&quot;Character\&quot;.&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;locations&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;line&quot;</span>: <span class="number">4</span>,</span><br><span class="line">          <span class="attr">&quot;column&quot;</span>: <span class="number">5</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>å½“æˆ‘ä»¬æŸ¥è¯¢ä¸€ä¸ªå­—æ®µæ—¶ï¼Œå¦‚æœå…¶è¿”å›å€¼ä¸æ˜¯æ ‡é‡æˆ–è€…æšä¸¾å‹ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦æŒ‡æ˜æƒ³è¦ä»è¿™ä¸ªå­—æ®µä¸­è·å–çš„æ•°æ®ã€‚<code>hero</code> è¿”å› <code>Character</code> ç±»å‹ï¼Œæˆ‘ä»¬ä¹Ÿè¯·æ±‚äº†å…¶ä¸­åƒæ˜¯ <code>name</code> å’Œ<code>appearsIn</code> çš„å­—æ®µï¼›ä½†å¦‚æœå°†å…¶çœç•¥ï¼Œè¿™ä¸ªæŸ¥è¯¢å°±å˜æˆæ— æ•ˆçš„äº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># æ— æ•ˆï¼šhero ä¸æ˜¯æ ‡é‡ï¼Œéœ€è¦æŒ‡æ˜ä¸‹çº§å­—æ®µ</span><br><span class="line">&#123;</span><br><span class="line">  hero</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;errors&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;Field \&quot;hero\&quot; of type \&quot;Character\&quot; must have a selection of subfields. Did you mean \&quot;hero &#123; ... &#125;\&quot;?&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;locations&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;line&quot;</span>: <span class="number">3</span>,</span><br><span class="line">          <span class="attr">&quot;column&quot;</span>: <span class="number">3</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>ç±»ä¼¼åœ°ï¼Œå¦‚æœä¸€ä¸ªå­—æ®µæ˜¯æ ‡é‡ï¼Œè¿›ä¸€æ­¥æŸ¥è¯¢å®ƒä¸Šé¢çš„å­—æ®µä¹Ÿæ²¡æœ‰æ„ä¹‰ï¼Œè¿™æ ·åšä¹Ÿä¼šå¯¼è‡´æŸ¥è¯¢æ— æ•ˆï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># æ— æ•ˆï¼šname æ˜¯æ ‡é‡ï¼Œå› æ­¤ä¸å…è®¸ä¸‹çº§å­—æ®µæŸ¥è¯¢</span><br><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name &#123;</span><br><span class="line">      firstCharacterOfName</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;errors&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;Field \&quot;name\&quot; must not have a selection since type \&quot;String!\&quot; has no subfields.&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;locations&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;line&quot;</span>: <span class="number">4</span>,</span><br><span class="line">          <span class="attr">&quot;column&quot;</span>: <span class="number">10</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡ï¼Œåªæœ‰ç›®æ ‡ç±»å‹ä¸Šçš„å­—æ®µæ‰å¯æŸ¥è¯¢ï¼›å½“æˆ‘ä»¬æŸ¥è¯¢ <code>hero</code> æ—¶ï¼Œå®ƒä¼šè¿”å› <code>Character</code>ï¼Œå› æ­¤åªæœ‰ <code>Character</code> ä¸Šçš„å­—æ®µæ˜¯å¯æŸ¥è¯¢çš„ã€‚ä½†å¦‚æœæˆ‘ä»¬è¦æŸ¥çš„æ˜¯ R2-D2 çš„ primary function å‘¢ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># æ— æ•ˆï¼šprimaryFunction ä¸å­˜åœ¨äº Character ä¹‹ä¸Š</span><br><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    primaryFunction</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;errors&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;message&quot;</span>: <span class="string">&quot;Cannot query field \&quot;primaryFunction\&quot; on type \&quot;Character\&quot;. Did you mean to use an inline fragment on \&quot;Droid\&quot;?&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;locations&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;line&quot;</span>: <span class="number">5</span>,</span><br><span class="line">          <span class="attr">&quot;column&quot;</span>: <span class="number">5</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæŸ¥è¯¢æ˜¯æ— æ•ˆçš„ï¼Œå› ä¸º <code>primaryFunction</code> å¹¶ä¸æ˜¯ <code>Character</code> çš„å­—æ®µã€‚æˆ‘ä»¬éœ€è¦æŸç§æ–¹æ³•æ¥è¡¨ç¤ºï¼šå¦‚æœå¯¹åº”çš„ <code>Character</code> æ˜¯ <code>Droid</code>ï¼Œæˆ‘ä»¬å¸Œæœ›è·å– <code>primaryFunction</code> å­—æ®µï¼Œè€Œåœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œåˆ™å¿½ç•¥æ­¤å­—æ®µã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¹‹å‰å¼•å…¥çš„â€œç‰‡æ®µâ€æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å…ˆåœ¨ <code>Droid</code> ä¸Šå®šä¹‰ä¸€ä¸ªç‰‡æ®µï¼Œç„¶ååœ¨æŸ¥è¯¢ä¸­å¼•å…¥å®ƒï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½åœ¨å®šä¹‰äº† <code>primaryFunction</code> çš„åœ°æ–¹æŸ¥è¯¢å®ƒã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    ...DroidFields</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fragment DroidFields on Droid &#123;</span><br><span class="line">  primaryFunction</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;primaryFunction&quot;</span>: <span class="string">&quot;Astromech&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæŸ¥è¯¢æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯æœ‰ç‚¹çç¢ï¼›å…·åç‰‡æ®µåœ¨æˆ‘ä»¬éœ€è¦å¤šæ¬¡ä½¿ç”¨çš„æ—¶å€™æ›´æœ‰ä»·å€¼ï¼Œå¦‚æœåªä½¿ç”¨ä¸€æ¬¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬åº”è¯¥ä½¿ç”¨å†…è”ç‰‡æ®µè€Œä¸æ˜¯å…·åç‰‡æ®µï¼›è¿™åŒæ ·èƒ½è¡¨ç¤ºæˆ‘ä»¬æƒ³è¦æŸ¥è¯¢çš„ç±»å‹ï¼Œè€Œä¸ç”¨å•ç‹¬å‘½åä¸€ä¸ªç‰‡æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    ... on Droid &#123;</span><br><span class="line">      primaryFunction</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;primaryFunction&quot;</span>: <span class="string">&quot;Astromech&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™åªæ˜¯éªŒè¯ç³»ç»Ÿçš„å†°å±±ä¸€è§’ï¼›äº‹å®ä¸Šéœ€è¦ä¸€å¤§å¥—éªŒè¯è§„åˆ™æ‰èƒ½ä¿è¯ GraphQL æŸ¥è¯¢çš„è¯­ä¹‰æ„ä¹‰ã€‚è§„èŒƒä¸­çš„â€œéªŒè¯â€ç« èŠ‚æœ‰å…³äºæœ¬è¯é¢˜æ›´è¯¦ç»†çš„å†…å®¹ï¼ŒGraphQL.js çš„ <a target="_blank" rel="noopener" href="https://github.com/graphql/graphql-js/blob/master/src/validation">validation</a> ç›®å½•åŒ…å«äº†è§„èŒƒå…¼å®¹çš„ GraphQL éªŒè¯å™¨å®ç°ä»£ç ã€‚</p>
<h2 id="æ‰§è¡Œ"><a href="#æ‰§è¡Œ" class="headerlink" title="æ‰§è¡Œ"></a>æ‰§è¡Œ</h2><p>ä¸€ä¸ª GraphQL æŸ¥è¯¢åœ¨è¢«éªŒè¯åï¼ŒGraphQL æœåŠ¡å™¨ä¼šå°†ä¹‹æ‰§è¡Œï¼Œå¹¶è¿”å›ä¸è¯·æ±‚çš„ç»“æ„ç›¸å¯¹åº”çš„ç»“æœï¼Œè¯¥ç»“æœé€šå¸¸ä¼šæ˜¯ JSON çš„æ ¼å¼ã€‚</p>
<p>GraphQL ä¸èƒ½è„±ç¦»ç±»å‹ç³»ç»Ÿå¤„ç†æŸ¥è¯¢ï¼Œè®©æˆ‘ä»¬ç”¨ä¸€ä¸ªç±»å‹ç³»ç»Ÿçš„ä¾‹å­æ¥è¯´æ˜ä¸€ä¸ªæŸ¥è¯¢çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œåœ¨è¿™ä¸€ç³»åˆ—çš„æ–‡ç« ä¸­æˆ‘ä»¬é‡å¤ä½¿ç”¨äº†è¿™äº›ç±»å‹ï¼Œä¸‹æ–‡æ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">type Query &#123;</span><br><span class="line">  human(id: ID!): Human</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Human &#123;</span><br><span class="line">  name: String</span><br><span class="line">  appearsIn: [Episode]</span><br><span class="line">  starships: [Starship]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">enum Episode &#123;</span><br><span class="line">  NEWHOPE</span><br><span class="line">  EMPIRE</span><br><span class="line">  JEDI</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Starship &#123;</span><br><span class="line">  name: String</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¾‹å­æ¥æè¿°å½“ä¸€ä¸ªæŸ¥è¯¢è¯·æ±‚è¢«æ‰§è¡Œçš„å…¨è¿‡ç¨‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  human(id: 1002) &#123;</span><br><span class="line">    name</span><br><span class="line">    appearsIn</span><br><span class="line">    starships &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;human&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;starships&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Millenium Falcon&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Imperial shuttle&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æ‚¨å¯ä»¥å°† GraphQL æŸ¥è¯¢ä¸­çš„æ¯ä¸ªå­—æ®µè§†ä¸ºè¿”å›å­ç±»å‹çš„çˆ¶ç±»å‹å‡½æ•°æˆ–æ–¹æ³•ã€‚äº‹å®ä¸Šï¼Œè¿™æ­£æ˜¯ GraphQL çš„å·¥ä½œåŸç†ã€‚æ¯ä¸ªç±»å‹çš„æ¯ä¸ªå­—æ®µéƒ½ç”±ä¸€ä¸ª <em>resolver</em> å‡½æ•°æ”¯æŒï¼Œè¯¥å‡½æ•°ç”± GraphQL æœåŠ¡å™¨å¼€å‘äººå‘˜æä¾›ã€‚å½“ä¸€ä¸ªå­—æ®µè¢«æ‰§è¡Œæ—¶ï¼Œç›¸åº”çš„ <em>resolver</em> è¢«è°ƒç”¨ä»¥äº§ç”Ÿä¸‹ä¸€ä¸ªå€¼ã€‚</p>
<p>å¦‚æœå­—æ®µäº§ç”Ÿæ ‡é‡å€¼ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²æˆ–æ•°å­—ï¼Œåˆ™æ‰§è¡Œå®Œæˆã€‚å¦‚æœä¸€ä¸ªå­—æ®µäº§ç”Ÿä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™è¯¥æŸ¥è¯¢å°†ç»§ç»­æ‰§è¡Œè¯¥å¯¹è±¡å¯¹åº”å­—æ®µçš„è§£æå™¨ï¼Œç›´åˆ°ç”Ÿæˆæ ‡é‡å€¼ã€‚GraphQL æŸ¥è¯¢å§‹ç»ˆä»¥æ ‡é‡å€¼ç»“æŸã€‚</p>
<h3 id="æ ¹å­—æ®µ-amp-è§£æå™¨"><a href="#æ ¹å­—æ®µ-amp-è§£æå™¨" class="headerlink" title="æ ¹å­—æ®µ &amp; è§£æå™¨"></a>æ ¹å­—æ®µ &amp; è§£æå™¨</h3><p>æ¯ä¸€ä¸ª GraphQL æœåŠ¡ç«¯åº”ç”¨çš„é¡¶å±‚ï¼Œå¿…æœ‰ä¸€ä¸ªç±»å‹ä»£è¡¨ç€æ‰€æœ‰è¿›å…¥ GraphQL API å¯èƒ½çš„å…¥å£ç‚¹ï¼Œæˆ‘ä»¬å°†å®ƒç§°ä¹‹ä¸º <em>Root</em> ç±»å‹æˆ– <em>Query</em> ç±»å‹ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­æŸ¥è¯¢ç±»å‹æä¾›äº†ä¸€ä¸ªå­—æ®µ <code>human</code>ï¼Œå¹¶ä¸”æ¥å—ä¸€ä¸ªå‚æ•° <code>id</code>ã€‚è¿™ä¸ªå­—æ®µçš„è§£æå™¨å¯èƒ½è¯·æ±‚äº†æ•°æ®åº“ä¹‹åé€šè¿‡æ„é€ å‡½æ•°è¿”å›ä¸€ä¸ª <code>Human</code> å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Query: &#123;</span><br><span class="line">  <span class="function"><span class="title">human</span>(<span class="params">obj, args, context, info</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> context.db.loadHumanByID(args.id).then(</span><br><span class="line">      userData =&gt; <span class="keyword">new</span> Human(userData)</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­ä½¿ç”¨äº† JavaScript è¯­è¨€ï¼Œä½† GraphQL æœåŠ¡ç«¯åº”ç”¨å¯ä»¥è¢« <a target="_blank" rel="noopener" href="https://graphql.cn/code/">å¤šç§è¯­è¨€å®ç°</a>ã€‚è§£æå™¨å‡½æ•°æ¥æ”¶ 4 ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><code>obj</code> ä¸Šä¸€çº§å¯¹è±¡ï¼Œå¦‚æœå­—æ®µå±äºæ ¹èŠ‚ç‚¹æŸ¥è¯¢ç±»å‹é€šå¸¸ä¸ä¼šè¢«ä½¿ç”¨ã€‚</li>
<li><code>args</code> å¯ä»¥æä¾›åœ¨ GraphQL æŸ¥è¯¢ä¸­ä¼ å…¥çš„å‚æ•°ã€‚</li>
<li><code>context</code> ä¼šè¢«æä¾›ç»™æ‰€æœ‰è§£æå™¨ï¼Œå¹¶ä¸”æŒæœ‰é‡è¦çš„ä¸Šä¸‹æ–‡ä¿¡æ¯æ¯”å¦‚å½“å‰ç™»å…¥çš„ç”¨æˆ·æˆ–è€…æ•°æ®åº“è®¿é—®å¯¹è±¡ã€‚</li>
<li><code>info</code> ä¸€ä¸ªä¿å­˜ä¸å½“å‰æŸ¥è¯¢ç›¸å…³çš„å­—æ®µç‰¹å®šä¿¡æ¯ä»¥åŠ schema è¯¦ç»†ä¿¡æ¯çš„å€¼ï¼Œ<a target="_blank" rel="noopener" href="https://graphql.cn/graphql-js/type/#graphqlobjecttype">æ›´å¤šè¯¦æƒ…è¯·å‚è€ƒç±»å‹ GraphQLResolveInfo</a>.</li>
</ul>
<h3 id="å¼‚æ­¥è§£æå™¨"><a href="#å¼‚æ­¥è§£æå™¨" class="headerlink" title="å¼‚æ­¥è§£æå™¨"></a>å¼‚æ­¥è§£æå™¨</h3><p>è®©æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹åœ¨è¿™ä¸ªè§£æå™¨å‡½æ•°ä¸­å‘ç”Ÿäº†ä»€ä¹ˆã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">human</span>(<span class="params">obj, args, context, info</span>)</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> context.db.loadHumanByID(args.id).then(</span><br><span class="line">    userData =&gt; <span class="keyword">new</span> Human(userData)</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>context</code> æä¾›äº†ä¸€ä¸ªæ•°æ®åº“è®¿é—®å¯¹è±¡ï¼Œç”¨æ¥é€šè¿‡æŸ¥è¯¢ä¸­ä¼ é€’çš„å‚æ•° <code>id</code> æ¥æŸ¥è¯¢æ•°æ®ï¼Œå› ä¸ºä»æ•°æ®åº“æ‹‰å–æ•°æ®çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œè¯¥æ–¹æ³•è¿”å›äº†ä¸€ä¸ª <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a> å¯¹è±¡ï¼Œåœ¨ JavaScript è¯­è¨€ä¸­ Promise å¯¹è±¡ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œä½†åœ¨è®¸å¤šè¯­è¨€ä¸­å­˜åœ¨ç›¸åŒçš„æ¦‚å¿µï¼Œé€šå¸¸ç§°ä½œ <em>Futures<em>ã€</em>Tasks</em> æˆ–è€… <em>Defferred</em>ã€‚å½“æ•°æ®åº“è¿”å›æŸ¥è¯¢ç»“æœï¼Œæˆ‘ä»¬å°±èƒ½æ„é€ å¹¶è¿”å›ä¸€ä¸ªæ–°çš„ <code>Human</code> å¯¹è±¡ã€‚</p>
<p>è¿™é‡Œè¦æ³¨æ„çš„æ˜¯ï¼Œåªæœ‰è§£æå™¨èƒ½æ„ŸçŸ¥åˆ° Promise çš„è¿›åº¦ï¼ŒGraphQL æŸ¥è¯¢åªå…³æ³¨ä¸€ä¸ªåŒ…å«ç€ <code>name</code> å±æ€§çš„ <code>human</code> å­—æ®µæ˜¯å¦è¿”å›ï¼Œåœ¨æ‰§è¡ŒæœŸé—´å¦‚æœå¼‚æ­¥æ“ä½œæ²¡æœ‰å®Œæˆï¼Œåˆ™ GraphQL ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œå› æ­¤åœ¨è¿™ä¸ªç¯èŠ‚éœ€è¦å…³æ³¨å¼‚æ­¥å¤„ç†ä¸Šçš„ä¼˜åŒ–ã€‚</p>
<h3 id="ä¸é‡è¦çš„è§£æå™¨"><a href="#ä¸é‡è¦çš„è§£æå™¨" class="headerlink" title="ä¸é‡è¦çš„è§£æå™¨"></a>ä¸é‡è¦çš„è§£æå™¨</h3><p>ç°åœ¨ <code>Human</code> å¯¹è±¡å·²ç»ç”Ÿæˆäº†ï¼Œä½† GraphQL è¿˜æ˜¯ä¼šç»§ç»­é€’å½’æ‰§è¡Œä¸‹å»ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Human: &#123;</span><br><span class="line">  <span class="function"><span class="title">name</span>(<span class="params">obj, args, context, info</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> obj.name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>GraphQL æœåŠ¡ç«¯åº”ç”¨çš„ä¸šåŠ¡å–å†³äºç±»å‹ç³»ç»Ÿçš„ç»“æ„ã€‚åœ¨ <code>human</code> å¯¹è±¡è¿”å›å€¼ä¹‹å‰ï¼Œç”±äºç±»å‹ç³»ç»Ÿç¡®å®šäº† <code>human</code> å­—æ®µå°†è¿”å›ä¸€ä¸ª <code>Human</code> å¯¹è±¡ï¼ŒGraphQL ä¼šæ ¹æ®ç±»å‹ç³»ç»Ÿé¢„è®¾å¥½çš„ <code>Human</code> ç±»å‹å†³å®šå¦‚ä½•è§£æå­—æ®µã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¯¹ name å­—æ®µçš„å¤„ç†éå¸¸çš„æ¸…æ™°ï¼Œname å­—æ®µå¯¹åº”çš„è§£æå™¨è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œè§£æå™¨å›è°ƒå‡½æ•°çš„ obj å‚æ•°æ˜¯ç”±ä¸Šå±‚å›è°ƒå‡½æ•°ç”Ÿæˆçš„ <code>new Human</code> å¯¹è±¡ã€‚åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ› Human å¯¹è±¡ä¼šæ‹¥æœ‰ä¸€ä¸ª <code>name</code> å±æ€§å¯ä»¥è®©æˆ‘ä»¬ç›´æ¥è¯»å–ã€‚</p>
<p>äº‹å®ä¸Šï¼Œè®¸å¤š GraphQL åº“å¯ä»¥è®©ä½ çœç•¥è¿™äº›ç®€å•çš„è§£æå™¨ï¼Œå‡å®šä¸€ä¸ªå­—æ®µæ²¡æœ‰æä¾›è§£æå™¨æ—¶ï¼Œé‚£ä¹ˆåº”è¯¥ä»ä¸Šå±‚è¿”å›å¯¹è±¡ä¸­è¯»å–å’Œè¿”å›å’Œè¿™ä¸ªå­—æ®µåŒåçš„å±æ€§ã€‚</p>
<h3 id="æ ‡é‡å¼ºåˆ¶"><a href="#æ ‡é‡å¼ºåˆ¶" class="headerlink" title="æ ‡é‡å¼ºåˆ¶"></a>æ ‡é‡å¼ºåˆ¶</h3><p>å½“ <code>name</code> å­—æ®µè¢«å¤„ç†åï¼Œ<code>appearsIn</code> å’Œ <code>starships</code> å­—æ®µå¯ä»¥è¢«åŒæ­¥æ‰§è¡Œï¼Œ <code>appearsIn</code> å­—æ®µä¹Ÿå¯ä»¥æœ‰ä¸€ä¸ªç®€å•çš„è§£æå™¨ï¼Œä½†æ˜¯è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Human: &#123;</span><br><span class="line">  <span class="function"><span class="title">appearsIn</span>(<span class="params">obj</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> obj.appearsIn <span class="comment">// returns [ 4, 5, 6 ]</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬çš„ç±»å‹ç³»ç»Ÿå£°æ˜ <code>appearsIn</code> å­—æ®µå°†è¿”å›å…·æœ‰å·²çŸ¥å€¼çš„æšä¸¾å€¼ï¼Œä½†æ˜¯æ­¤å‡½æ•°è¿”å›æ•°å­—ï¼å®é™…ä¸Šï¼Œå¦‚æœæˆ‘ä»¬æŸ¥çœ‹ç»“æœï¼Œæˆ‘ä»¬å°†çœ‹åˆ°æ­£åœ¨è¿”å›é€‚å½“çš„æšä¸¾å€¼ã€‚è¿™æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ</p>
<p>è¿™æ˜¯ä¸€ä¸ªå¼ºåˆ¶æ ‡é‡çš„ä¾‹å­ã€‚å› ä¸ºç±»å‹ç³»ç»Ÿå·²ç»è¢«è®¾å®šï¼Œæ‰€ä»¥è§£æå™¨å‡½æ•°çš„è¿”å›å€¼å¿…é¡»ç¬¦åˆä¸ç±»å‹ç³»ç»Ÿå¯¹åº”çš„ API è§„åˆ™çš„çº¦æŸã€‚åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½åœ¨æœåŠ¡å™¨ä¸Šå®šä¹‰äº†ä¸€ä¸ªæšä¸¾ç±»å‹ï¼Œå®ƒåœ¨å†…éƒ¨ä½¿ç”¨åƒæ˜¯ 4ã€5 å’Œ 6 è¿™æ ·çš„æ•°å­—ï¼Œä½†åœ¨ GraphQL ç±»å‹ç³»ç»Ÿä¸­å°†å®ƒä»¬è¡¨ç¤ºä¸ºæšä¸¾å€¼ã€‚</p>
<h3 id="åˆ—è¡¨è§£æå™¨"><a href="#åˆ—è¡¨è§£æå™¨" class="headerlink" title="åˆ—è¡¨è§£æå™¨"></a>åˆ—è¡¨è§£æå™¨</h3><p>æˆ‘ä»¬å·²ç»çœ‹åˆ°ä¸€ä¸ªå­—æ®µè¿”å›ä¸Šé¢çš„ <code>appearsIn</code> å­—æ®µçš„äº‹ç‰©åˆ—è¡¨æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å®ƒè¿”å›äº†æšä¸¾å€¼çš„<strong>åˆ—è¡¨</strong>ï¼Œå› ä¸ºè¿™æ˜¯ç³»ç»ŸæœŸæœ›çš„ç±»å‹ï¼Œåˆ—è¡¨ä¸­çš„æ¯ä¸ªé¡¹ç›®è¢«å¼ºåˆ¶ä¸ºé€‚å½“çš„æšä¸¾å€¼ã€‚è®©æˆ‘ä»¬çœ‹ä¸‹ <code>startships</code> è¢«è§£æçš„æ—¶å€™ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Human: &#123;</span><br><span class="line">  <span class="function"><span class="title">starships</span>(<span class="params">obj, args, context, info</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> obj.starshipIDs.map(</span><br><span class="line">      id =&gt; context.db.loadStarshipByID(id).then(</span><br><span class="line">        shipData =&gt; <span class="keyword">new</span> Starship(shipData)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è§£æå™¨åœ¨è¿™ä¸ªå­—æ®µä¸­ä¸ä»…ä»…æ˜¯è¿”å›äº†ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå®ƒè¿”å›ä¸€ä¸ª Promises <strong>åˆ—è¡¨</strong>ã€‚<code>Human</code> å¯¹è±¡å…·æœ‰ä»–ä»¬æ­£åœ¨é©¾é©¶çš„ <code>Starships</code> çš„ ids åˆ—è¡¨ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦é€šè¿‡è¿™äº› id æ¥è·å¾—çœŸæ­£çš„ Starship å¯¹è±¡ã€‚</p>
<p>GraphQL å°†å¹¶å‘æ‰§è¡Œè¿™äº› Promiseï¼Œå½“æ‰§è¡Œç»“æŸè¿”å›ä¸€ä¸ªå¯¹è±¡åˆ—è¡¨åï¼Œå®ƒå°†ç»§ç»­å¹¶å‘åŠ è½½åˆ—è¡¨ä¸­æ¯ä¸ªå¯¹è±¡çš„ <code>name</code> å­—æ®µã€‚</p>
<h3 id="äº§ç”Ÿç»“æœ"><a href="#äº§ç”Ÿç»“æœ" class="headerlink" title="äº§ç”Ÿç»“æœ"></a>äº§ç”Ÿç»“æœ</h3><p>å½“æ¯ä¸ªå­—æ®µè¢«è§£ææ—¶ï¼Œç»“æœè¢«æ”¾ç½®åˆ°é”®å€¼æ˜ å°„ä¸­ï¼Œå­—æ®µåç§°ï¼ˆæˆ–åˆ«åï¼‰ä½œä¸ºé”®å€¼æ˜ å°„çš„é”®ï¼Œè§£æå™¨çš„å€¼ä½œä¸ºé”®å€¼æ˜ å°„çš„å€¼ï¼Œè¿™ä¸ªè¿‡ç¨‹ä»æŸ¥è¯¢å­—æ®µçš„åº•éƒ¨å¶å­èŠ‚ç‚¹å¼€å§‹è¿”å›ï¼Œç›´åˆ°æ ¹ Query ç±»å‹çš„èµ·å§‹èŠ‚ç‚¹ã€‚æœ€ååˆå¹¶æˆä¸ºèƒ½å¤Ÿé•œåƒåˆ°åŸå§‹æŸ¥è¯¢ç»“æ„çš„ç»“æœï¼Œç„¶åå¯ä»¥å°†å…¶å‘é€ï¼ˆé€šå¸¸ä¸º JSON æ ¼å¼ï¼‰åˆ°è¯·æ±‚çš„å®¢æˆ·ç«¯ã€‚</p>
<p>è®©æˆ‘ä»¬æœ€åä¸€çœ¼çœ‹çœ‹åŸæ¥çš„æŸ¥è¯¢ï¼Œçœ‹çœ‹è¿™äº›è§£æå‡½æ•°å¦‚ä½•äº§ç”Ÿä¸€ä¸ªç»“æœï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  human(id: 1002) &#123;</span><br><span class="line">    name</span><br><span class="line">    appearsIn</span><br><span class="line">    starships &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;human&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">&quot;starships&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Millenium Falcon&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Imperial shuttle&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å†…çœ"><a href="#å†…çœ" class="headerlink" title="å†…çœ"></a>å†…çœ</h2><p>æˆ‘ä»¬æœ‰æ—¶å€™ä¼šéœ€è¦å»é—® GraphQL Schema å®ƒæ”¯æŒå“ªäº›æŸ¥è¯¢ã€‚GraphQL é€šè¿‡å†…çœç³»ç»Ÿè®©æˆ‘ä»¬å¯ä»¥åšåˆ°è¿™ç‚¹ï¼</p>
<p>åœ¨æˆ‘ä»¬çš„æ˜Ÿæˆ˜ä¾‹å­é‡Œï¼Œæ–‡ä»¶ <a target="_blank" rel="noopener" href="https://github.com/graphql/graphql-js/blob/master/src/__tests__/starWarsIntrospection-test.js">starWarsIntrospection-test.js</a> åŒ…å«äº†ä¸€ç³»åˆ—å±•ç¤ºäº†å†…çœç³»ç»Ÿçš„æŸ¥è¯¢ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶ï¼Œç”¨æ¥æ£€éªŒå‚è€ƒå®ç°çš„å†…çœç³»ç»Ÿã€‚</p>
<p>å¦‚æœæ˜¯æˆ‘ä»¬äº²è‡ªè®¾è®¡äº†ç±»å‹ï¼Œé‚£æˆ‘ä»¬è‡ªç„¶çŸ¥é“å“ªäº›ç±»å‹æ˜¯å¯ç”¨çš„ã€‚ä½†å¦‚æœç±»å‹ä¸æ˜¯æˆ‘ä»¬è®¾è®¡çš„ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æŸ¥è¯¢ <code>__schema</code> å­—æ®µæ¥å‘ GraphQL è¯¢é—®å“ªäº›ç±»å‹æ˜¯å¯ç”¨çš„ã€‚ä¸€ä¸ªæŸ¥è¯¢çš„æ ¹ç±»å‹æ€»æ˜¯æœ‰ <code>__schema</code> è¿™ä¸ªå­—æ®µã€‚ç°åœ¨æ¥è¯•è¯•ï¼ŒæŸ¥è¯¢ä¸€ä¸‹æœ‰å“ªäº›å¯ç”¨çš„ç±»å‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  __schema &#123;</span><br><span class="line">    types &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;__schema&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;types&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Query&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Episode&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Character&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;ID&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;String&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Int&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;FriendsConnection&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;FriendsEdge&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;PageInfo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Boolean&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Review&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;SearchResult&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Human&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;LengthUnit&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Float&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Starship&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Droid&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Mutation&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;ReviewInput&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;__Schema&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;__Type&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;__TypeKind&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;__Field&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;__InputValue&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;__EnumValue&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;__Directive&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;__DirectiveLocation&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å“‡ï¼Œæœ‰å¥½å¤šç±»å‹ï¼å®ƒä»¬éƒ½æ˜¯ä»€ä¹ˆï¼Ÿæˆ‘ä»¬æ¥æ€»ç»“ä¸€ä¸‹ï¼š</p>
<ul>
<li><strong>Query, Character, Human, Episode, Droid</strong> - è¿™äº›æ˜¯æˆ‘ä»¬åœ¨ç±»å‹ç³»ç»Ÿä¸­å®šä¹‰çš„ç±»å‹ã€‚</li>
<li><strong>String, Boolean</strong> - è¿™äº›æ˜¯å†…å»ºçš„æ ‡é‡ï¼Œç”±ç±»å‹ç³»ç»Ÿæä¾›ã€‚</li>
<li><strong>__Schema, __Type, __TypeKind, __Field, __InputValue, __EnumValue, __Directive</strong> - è¿™äº›æœ‰ç€ä¸¤ä¸ªä¸‹åˆ’çº¿çš„ç±»å‹æ˜¯å†…çœç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚</li>
</ul>
<p>ç°åœ¨ï¼Œæ¥è¯•è¯•æ‰¾åˆ°ä¸€ä¸ªå¯ä»¥æ¢ç´¢å‡ºæœ‰å“ªäº›å¯ç”¨æŸ¥è¯¢çš„åœ°æ–¹ã€‚å½“æˆ‘ä»¬è®¾è®¡ç±»å‹ç³»ç»Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬ç¡®å®šäº†ä¸€ä¸ªæ‰€æœ‰æŸ¥è¯¢å¼€å§‹çš„åœ°æ–¹ï¼Œæ¥é—®é—®å†…çœç³»ç»Ÿå®ƒæ˜¯ä»€ä¹ˆï¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  __schema &#123;</span><br><span class="line">    queryType &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;__schema&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;queryType&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Query&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™å’Œæˆ‘ä»¬åœ¨ç±»å‹ç³»ç»Ÿé‚£ç« é‡Œè¯´çš„ä¸€æ ·ï¼Œ<code>Query</code> ç±»å‹æ˜¯æˆ‘ä»¬å¼€å§‹çš„åœ°æ–¹ï¼æ³¨æ„è¿™é‡Œçš„å‘½ååªæ˜¯ä¸€ä¸ªæƒ¯ä¾‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠ <code>Query</code> å–æˆåˆ«çš„åå­—ï¼Œåªè¦æˆ‘ä»¬æŠŠå®ƒå®šä¹‰ä¸ºæ‰€æœ‰æŸ¥è¯¢å‡ºå‘çš„åœ°æ–¹ï¼Œå®ƒä¹Ÿä¾ç„¶ä¼šåœ¨è¿™é‡Œè¢«è¿”å›ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿˜æ˜¯æŠŠå®ƒå‘½åä¸º <code>Query</code> å§ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„æƒ¯ä¾‹ã€‚</p>
<p>æœ‰æ—¶å€™ä¹Ÿéœ€è¦æ£€éªŒä¸€ä¸ªç‰¹å®šçš„ç±»å‹ã€‚æ¥çœ‹çœ‹ <code>Droid</code> ç±»å‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  __type(name: &quot;Droid&quot;) &#123;</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;__type&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Droid&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>å¦‚æœæˆ‘ä»¬æƒ³è¦æ›´äº†è§£ <code>Droid</code> å‘¢ï¼Ÿä¾‹å¦‚ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ¥å£è¿˜æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Ÿ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  __type(name: &quot;Droid&quot;) &#123;</span><br><span class="line">    name</span><br><span class="line">    kind</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;__type&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Droid&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;OBJECT&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><code>kind</code> è¿”å›ä¸€ä¸ªæšä¸¾ç±»å‹ <code>__TypeKind</code>ï¼Œå…¶ä¸­ä¸€ä¸ªå€¼æ˜¯ <code>OBJECT</code>ã€‚å¦‚æœæˆ‘ä»¬æ”¹é—® <code>Character</code>ï¼Œæˆ‘ä»¬ä¼šå‘ç°å®ƒæ˜¯ä¸€ä¸ªæ¥å£ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  __type(name: &quot;Character&quot;) &#123;</span><br><span class="line">    name</span><br><span class="line">    kind</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;__type&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Character&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;INTERFACE&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>å¯¹äºä¸€ä¸ªå¯¹è±¡æ¥è¯´ï¼ŒçŸ¥é“å®ƒæœ‰å“ªäº›å­—æ®µæ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œæ‰€ä»¥æ¥é—®é—®å†…çœç³»ç»Ÿ <code>Droid</code> æœ‰å“ªäº›å­—æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  __type(name: &quot;Droid&quot;) &#123;</span><br><span class="line">    name</span><br><span class="line">    fields &#123;</span><br><span class="line">      name</span><br><span class="line">      type &#123;</span><br><span class="line">        name</span><br><span class="line">        kind</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;__type&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Droid&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;fields&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;id&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;NON_NULL&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;name&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;NON_NULL&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;friends&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;LIST&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;friendsConnection&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;NON_NULL&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;appearsIn&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;NON_NULL&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;primaryFunction&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;String&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;SCALAR&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è¿™äº›æ­£æ˜¯æˆ‘ä»¬ä¸º <code>Droid</code> å®šä¹‰çš„å­—æ®µï¼</p>
<p><code>id</code> çœ‹èµ·æ¥æœ‰ç‚¹å„¿å¥‡æ€ªï¼Œè¿™ä¸ªç±»å‹æ²¡æœ‰åå­—ã€‚è¿™æ˜¯å› ä¸ºå®ƒæ˜¯ä¸€ä¸ª <code>NON_NULL</code> ç±»å‹çš„â€œåŒ…è£…â€ ã€‚å¦‚æœæˆ‘ä»¬è¯·æ±‚å®ƒçš„ <code>ofType</code> å­—æ®µï¼Œæˆ‘ä»¬ä¼šå‘ç°å®ƒæ˜¯ <code>ID</code> ï¼Œå‘Šè¯‰æˆ‘ä»¬è¿™æ˜¯ä¸€ä¸ªéç©ºçš„ IDã€‚</p>
<p>ç›¸ä¼¼åœ°ï¼Œ<code>friends</code> å’Œ <code>appearsIn</code> éƒ½æ²¡æœ‰åå­—ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯ <code>LIST</code> åŒ…è£…ç±»å‹ã€‚æˆ‘ä»¬å¯ä»¥çœ‹çœ‹å®ƒä»¬çš„ <code>ofType</code>ï¼Œå°±èƒ½çŸ¥é“å®ƒä»¬æ˜¯è£…ä»€ä¹ˆä¸œè¥¿çš„åˆ—è¡¨ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  __type(name: &quot;Droid&quot;) &#123;</span><br><span class="line">    name</span><br><span class="line">    fields &#123;</span><br><span class="line">      name</span><br><span class="line">      type &#123;</span><br><span class="line">        name</span><br><span class="line">        kind</span><br><span class="line">        ofType &#123;</span><br><span class="line">          name</span><br><span class="line">          kind</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;__type&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Droid&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;fields&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;id&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;NON_NULL&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ofType&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;ID&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;SCALAR&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;name&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;NON_NULL&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ofType&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;String&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;SCALAR&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;friends&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;LIST&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ofType&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Character&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;INTERFACE&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;friendsConnection&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;NON_NULL&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ofType&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;FriendsConnection&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;OBJECT&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;appearsIn&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;NON_NULL&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ofType&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">              <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;LIST&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;primaryFunction&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;String&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;SCALAR&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ofType&quot;</span>: <span class="literal">null</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>æœ€åæˆ‘ä»¬æ¥çœ‹çœ‹å†…çœç³»ç»Ÿç‰¹åˆ«é€‚åˆç”¨æ¥å¼€å‘å·¥å…·çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬æ¥å‘å†…çœç³»ç»Ÿè¯·æ±‚æ–‡æ¡£ï¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  __type(name: &quot;Droid&quot;) &#123;</span><br><span class="line">    name</span><br><span class="line">    description</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;__type&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Droid&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;An autonomous mechanical character in the Star Wars universe&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡å†…çœç³»ç»Ÿæ¥è§¦åˆ°ç±»å‹ç³»ç»Ÿçš„æ–‡æ¡£ï¼Œå¹¶åšå‡ºæ–‡æ¡£æµè§ˆå™¨ï¼Œæˆ–æ˜¯æä¾›ä¸°å¯Œçš„ IDE ä½“éªŒã€‚</p>
<p>è¿™äº›åªæ˜¯å†…çœç³»ç»Ÿçš„æµ…æµ…ä¸€å±‚ã€‚æˆ‘ä»¬è¿˜å¯ä»¥æŸ¥è¯¢æšä¸¾å€¼ã€æŸä¸ªç±»å‹å®ç°äº†ä»€ä¹ˆæ¥å£ç­‰ç­‰ï¼Œæˆ‘ä»¬ç”šè‡³å¯ä»¥å¯¹å†…çœç³»ç»Ÿå†…çœã€‚å…³äºè¿™ä¸ªä¸»é¢˜çš„è¯¦ç»†è¯´æ˜å¯ä»¥çœ‹è§„èŒƒçš„â€œIntrospectionâ€éƒ¨åˆ†ï¼Œä»¥åŠ GraphQL.js ä¸­çš„ <a target="_blank" rel="noopener" href="https://github.com/graphql/graphql-js/blob/master/src/type/introspection.js">introspection</a> æ–‡ä»¶ï¼Œå®ƒåŒ…å«äº†ç¬¦åˆè§„èŒƒçš„ä¸€ä¸ªå†…çœç³»ç»Ÿçš„å®ç°ã€‚</p>
<h2 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h2><h3 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h3><p>GraphQL æœ€ä½³å®è·µ</p>
<p>GraphQL è§„èŒƒç‰¹æ„å¿½ç•¥äº†ä¸€äº›é¢å‘ API çš„é‡è¦é—®é¢˜ï¼Œä¾‹å¦‚å¤„ç†ç½‘ç»œã€æˆæƒå’Œåˆ†é¡µã€‚è¿™å¹¶ä¸æ„å‘³ç€åœ¨ä½¿ç”¨ GraphQL æ—¶æ²¡æœ‰é’ˆå¯¹è¿™äº›é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œåªæ˜¯å› ä¸ºå®ƒä»¬<strong>å¹¶é</strong> GraphQL å®šä¹‰ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»£ä»¥å·¥ç¨‹ä¸Šé€šè¡Œçš„åšæ³•æ¥å®ç°ã€‚</p>
<p>æœ¬ç« èŠ‚ä¸­çš„æ–‡ç« å¹¶éä¸å¯æ”¹åŠ¨çš„çœŸç†ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ä½¿ç”¨å…¶ä»–æ–¹å¼å¯èƒ½ä¼šæ›´åŠ åˆé€‚ã€‚å…¶ä¸­çš„ä¸€äº›æ–‡ç« ä»‹ç»äº† Facebook åœ¨è®¾è®¡å’Œéƒ¨ç½² GraphQL æœåŠ¡çš„è¿‡ç¨‹ä¸­çš„ä¸€äº›å¼€å‘ç†å¿µï¼Œè€Œå¦å¤–ä¸€äº›åˆ™æ˜¯ä¸ºè§£å†³è¯¸å¦‚æä¾› HTTP æœåŠ¡å’Œæ‰§è¡Œæˆæƒç­‰å¸¸è§é—®é¢˜æå‡ºäº†æ›´å¤šçš„ç­–ç•¥å»ºè®®ã€‚</p>
<p>ä»¥ä¸‹å†…å®¹æ˜¯å¯¹ GraphQL æœåŠ¡çš„ä¸€äº›å¸¸è§çš„æœ€ä½³å®è·µå’Œä¸»è§‚ç«‹åœºçš„ç®€è¦è¯´æ˜ï¼Œè€Œæœ¬ç« èŠ‚ä¸­çš„æ–‡ç« å°†å¯¹è¿™äº›ä¸»é¢˜è¿›è¡Œæ›´æ·±å…¥çš„è®¨è®ºã€‚</p>
<h4 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h4><p>GraphQL é€šå¸¸é€šè¿‡å•å…¥å£æ¥æä¾› HTTP æœåŠ¡çš„å®Œæ•´åŠŸèƒ½ï¼Œè¿™ä¸€å®ç°æ–¹å¼ä¸æš´éœ²ä¸€ç»„ URL ä¸”æ¯ä¸ª URL åªæš´éœ²ä¸€ä¸ªèµ„æºçš„ REST API ä¸åŒã€‚è™½ç„¶ GraphQL ä¹Ÿå¯ä»¥æš´éœ²å¤šä¸ªèµ„æº URL æ¥ä½¿ç”¨ï¼Œä½†è¿™å¯èƒ½å¯¼è‡´æ‚¨åœ¨ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/graphql/graphiql">GraphiQL</a> ç­‰å·¥å…·æ—¶é‡åˆ°å›°éš¾ã€‚</p>
<p>äº†è§£æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://graphql.cn/learn/serving-over-http/">æä¾› HTTP æœåŠ¡</a>ã€‚</p>
<h4 id="JSONï¼ˆä½¿ç”¨-GZIP-å‹ç¼©ï¼‰"><a href="#JSONï¼ˆä½¿ç”¨-GZIP-å‹ç¼©ï¼‰" class="headerlink" title="JSONï¼ˆä½¿ç”¨ GZIP å‹ç¼©ï¼‰"></a>JSONï¼ˆä½¿ç”¨ GZIP å‹ç¼©ï¼‰</h4><p>GraphQL æœåŠ¡é€šå¸¸è¿”å› JSON æ ¼å¼çš„æ•°æ®ï¼Œä½† GraphQL è§„èŒƒ <a target="_blank" rel="noopener" href="http://spec.graphql.cn/#sec-Serialization-Format-">å¹¶æœªè¦æ±‚è¿™ä¸€ç‚¹</a>ã€‚å¯¹äºæœŸæœ›æ›´å¥½çš„ç½‘ç»œæ€§èƒ½çš„ API å±‚æ¥è¯´ï¼Œä½¿ç”¨ JSON ä¼¼ä¹æ˜¯ä¸€ä¸ªå¥‡æ€ªçš„é€‰æ‹©ï¼Œä½†ç”±äºå®ƒä¸»è¦æ˜¯æ–‡æœ¬ï¼Œå› è€Œåœ¨ GZIP å‹ç¼©åè¡¨ç°éå¸¸å¥½ã€‚</p>
<p>æ¨èä»»ä½•åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹çš„ GraphQL æœåŠ¡éƒ½å¯ç”¨ GZIPï¼Œå¹¶æ¨èåœ¨å®¢æˆ·ç«¯è¯·æ±‚å¤´ä¸­åŠ å…¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Accept-Encoding: gzip</span><br></pre></td></tr></table></figure>

<p>å®¢æˆ·ç«¯å’Œ API å¼€å‘äººå‘˜ä¹Ÿéå¸¸ç†Ÿæ‚‰ JSONï¼Œæ˜“äºé˜…è¯»å’Œè°ƒè¯•ã€‚äº‹å®ä¸Šï¼ŒGraphQL è¯­æ³•éƒ¨åˆ†åœ°å—åˆ° JSON è¯­æ³•çš„å¯å‘ã€‚</p>
<h4 id="ç‰ˆæœ¬æ§åˆ¶"><a href="#ç‰ˆæœ¬æ§åˆ¶" class="headerlink" title="ç‰ˆæœ¬æ§åˆ¶"></a>ç‰ˆæœ¬æ§åˆ¶</h4><p>è™½ç„¶æ²¡æœ‰ä»€ä¹ˆå¯ä»¥é˜»æ­¢ GraphQL æœåŠ¡åƒä»»ä½•å…¶ä»– REST API ä¸€æ ·è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ï¼Œä½† GraphQL å¼ºçƒˆè®¤ä¸ºå¯ä»¥é€šè¿‡ GraphQL schema çš„æŒç»­æ¼”è¿›æ¥é¿å…ç‰ˆæœ¬æ§åˆ¶ã€‚</p>
<p>ä¸ºä»€ä¹ˆå¤§å¤šæ•° API æœ‰ç‰ˆæœ¬ï¼Ÿå½“æŸä¸ª API å…¥å£èƒ½å¤Ÿè¿”å›çš„æ•°æ®è¢«é™åˆ¶ï¼Œåˆ™<strong>ä»»ä½•æ›´æ”¹</strong>éƒ½å¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªç ´åæ€§å˜æ›´ï¼Œè€Œç ´åæ€§å˜æ›´éœ€è¦å‘å¸ƒä¸€ä¸ªæ–°çš„ç‰ˆæœ¬ã€‚å¦‚æœå‘ API æ·»åŠ æ–°åŠŸèƒ½éœ€è¦æ–°ç‰ˆæœ¬ï¼Œé‚£ä¹ˆåœ¨ç»å¸¸å‘å¸ƒç‰ˆæœ¬å¹¶æ‹¥æœ‰è®¸å¤šå¢é‡ç‰ˆæœ¬ä¸ä¿è¯ API çš„å¯ç†è§£æ€§å’Œå¯ç»´æŠ¤æ€§ä¹‹é—´å°±éœ€è¦æƒè¡¡ã€‚</p>
<p>ç›¸æ¯”ä¹‹ä¸‹ï¼ŒGraphQL åªè¿”å›æ˜¾å¼è¯·æ±‚çš„æ•°æ®ï¼Œå› æ­¤å¯ä»¥é€šè¿‡å¢åŠ æ–°ç±»å‹å’ŒåŸºäºè¿™äº›æ–°ç±»å‹çš„æ–°å­—æ®µæ·»åŠ æ–°åŠŸèƒ½ï¼Œè€Œä¸ä¼šé€ æˆç ´åæ€§å˜æ›´ã€‚è¿™æ ·å¯ä»¥è¡ç”Ÿå‡ºå§‹ç»ˆé¿å…ç ´åæ€§å˜æ›´å¹¶æä¾›æ— ç‰ˆæœ¬ API çš„é€šç”¨åšæ³•ã€‚</p>
<h4 id="å¯ä»¥ä¸ºç©ºçš„æ€§è´¨"><a href="#å¯ä»¥ä¸ºç©ºçš„æ€§è´¨" class="headerlink" title="å¯ä»¥ä¸ºç©ºçš„æ€§è´¨"></a>å¯ä»¥ä¸ºç©ºçš„æ€§è´¨</h4><p>å¤§å¤šæ•°èƒ½å¤Ÿè¯†åˆ« â€œnullâ€ çš„ç±»å‹ç³»ç»Ÿéƒ½æä¾›æ™®é€šç±»å‹å’Œè¯¥ç±»å‹<strong>å¯ä»¥ä¸ºç©º</strong>çš„ç‰ˆæœ¬ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œç±»å‹ä¸åŒ…æ‹¬ â€œnullâ€ï¼Œé™¤éæ˜ç¡®å£°æ˜ã€‚ä½†åœ¨ GraphQL ç±»å‹ç³»ç»Ÿä¸­ï¼Œé»˜è®¤æƒ…å†µä¸‹æ¯ä¸ªå­—æ®µéƒ½<strong>å¯ä»¥ä¸ºç©º</strong>ã€‚è¿™æ˜¯å› ä¸ºåœ¨ç”±æ•°æ®åº“å’Œå…¶ä»–æœåŠ¡æ”¯æŒçš„è”ç½‘æœåŠ¡ä¸­å¯èƒ½ä¼šå‡ºç°è®¸å¤šé—®é¢˜ï¼Œæ¯”å¦‚æ•°æ®åº“å¯èƒ½ä¼šå®•æœºï¼Œå¼‚æ­¥æ“ä½œå¯èƒ½ä¼šå¤±è´¥ï¼Œå¼‚å¸¸å¯èƒ½ä¼šè¢«æŠ›å‡ºã€‚é™¤äº†ç³»ç»Ÿæ•…éšœä¹‹å¤–ï¼Œæˆæƒé€šå¸¸å¯ä»¥æ˜¯ç»†ç²’åº¦çš„ï¼Œè¯·æ±‚ä¸­çš„å„ä¸ªå­—æ®µå¯ä»¥å…·æœ‰ä¸åŒçš„æˆæƒè§„åˆ™ã€‚</p>
<p>é€šè¿‡é»˜è®¤è®¾ç½®æ¯ä¸ªå­—æ®µ<strong>å¯ä»¥ä¸ºç©º</strong>ï¼Œä»¥ä¸Šä»»ä½•åŸå› éƒ½å¯èƒ½å¯¼è‡´è¯¥å­—æ®µè¿”å› â€œnullâ€ï¼Œè€Œä¸æ˜¯å¯¼è‡´è¯·æ±‚å®Œå…¨å¤±è´¥ã€‚ä½œä¸ºæ›¿ä»£ï¼ŒGraphQL æä¾› <a target="_blank" rel="noopener" href="https://graphql.cn/learn/schema/#lists-and-non-null">non-null</a> è¿™ä¸€å˜ä½“ç±»å‹æ¥ä¿è¯å½“å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚æ—¶ï¼Œè¯¥å­—æ®µæ°¸è¿œä¸ä¼šè¿”å› â€œnullâ€ã€‚ç›¸åï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯ï¼Œåˆ™ä¸Šä¸€ä¸ªçˆ¶çº§å­—æ®µå°†ä¸º â€œnullâ€ã€‚</p>
<p>åœ¨è®¾è®¡ GraphQL schema æ—¶ï¼Œè¯·åŠ¡å¿…è€ƒè™‘æ‰€æœ‰å¯èƒ½å¯¼è‡´é”™è¯¯çš„æƒ…å†µä¸‹ï¼Œâ€œnullâ€ æ˜¯å¦å¯ä»¥ä½œä¸ºè·å–å¤±è´¥çš„å­—æ®µåˆç†çš„è¿”å›å€¼ã€‚é€šå¸¸å®ƒæ˜¯ï¼Œä½†å¶å°”ï¼Œå®ƒä¸æ˜¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯·ä½¿ç”¨éç©ºç±»å‹è¿›è¡Œä¿è¯ã€‚</p>
<h4 id="åˆ†é¡µ"><a href="#åˆ†é¡µ" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h4><p>GraphQL ç±»å‹ç³»ç»Ÿå…è®¸æŸäº›å­—æ®µè¿”å› <a target="_blank" rel="noopener" href="https://graphql.cn/learn/schema/#lists-and-non-null">å€¼çš„åˆ—è¡¨</a>ï¼Œä½†æ˜¯ä¸ºé•¿åˆ—è¡¨åˆ†é¡µçš„åŠŸèƒ½åˆ™äº¤ç»™ API è®¾è®¡è€…è‡ªè¡Œå®ç°ã€‚ä¸º API è®¾è®¡åˆ†é¡µåŠŸèƒ½æœ‰å¾ˆå¤šç§å„æœ‰åˆ©å¼Šçš„æ–¹æ¡ˆã€‚</p>
<p>é€šå¸¸å½“å­—æ®µè¿”å›é•¿åˆ—è¡¨æ—¶ï¼Œå¯ä»¥æ¥æ”¶å‚æ•° â€œfirstâ€ å’Œ â€œafterâ€ æ¥æŒ‡å®šåˆ—è¡¨çš„ç‰¹å®šåŒºåŸŸï¼Œå…¶ä¸­ â€œafterâ€ æ˜¯åˆ—è¡¨ä¸­æ¯ä¸ªå€¼çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚</p>
<p>æœ€ç»ˆåœ¨å…·æœ‰åŠŸèƒ½ä¸°å¯Œçš„åˆ†é¡µçš„ API è®¾è®¡ä¸­ï¼Œè¡ç”Ÿå‡ºä¸€ç§ç§°ä¸º â€œConnectionsâ€ çš„æœ€ä½³å®è·µæ¨¡å¼ã€‚GraphQL çš„ä¸€äº›å®¢æˆ·ç«¯å·¥å…·ï¼ˆå¦‚ <a target="_blank" rel="noopener" href="https://facebook.github.io/relay/">Relay</a>ï¼‰é‡‡ç”¨äº† Connections æ¨¡å¼ï¼Œå½“ GraphQL API ä½¿ç”¨æ­¤æ¨¡å¼æ—¶ï¼Œå¯ä»¥è‡ªåŠ¨ä¸ºå®¢æˆ·ç«¯åˆ†é¡µæä¾›æ”¯æŒã€‚</p>
<p>äº†è§£æ›´å¤šï¼š<a target="_blank" rel="noopener" href="https://graphql.cn/learn/pagination/">åˆ†é¡µ</a>ã€‚</p>
<h4 id="æœåŠ¡å™¨ç«¯çš„æ‰¹å¤„ç†ä¸ç¼“å­˜"><a href="#æœåŠ¡å™¨ç«¯çš„æ‰¹å¤„ç†ä¸ç¼“å­˜" class="headerlink" title="æœåŠ¡å™¨ç«¯çš„æ‰¹å¤„ç†ä¸ç¼“å­˜"></a>æœåŠ¡å™¨ç«¯çš„æ‰¹å¤„ç†ä¸ç¼“å­˜</h4><p>GraphQL çš„è®¾è®¡æ–¹å¼ä¾¿äºæ‚¨åœ¨æœåŠ¡å™¨ä¸Šç¼–å†™æ•´æ´çš„ä»£ç ï¼Œæ¯ç§ç±»å‹çš„æ¯ä¸ªå­—æ®µéƒ½æœ‰ä¸€ä¸ªä¸“ç”¨ä¸”ç›®æ ‡å”¯ä¸€çš„å‡½æ•°æ¥è§£æè¯¥å€¼ã€‚ç„¶è€Œå½“è€ƒè™‘ä¸å®Œå–„æ—¶ï¼Œä¸€ä¸ªè¿‡äºç®€å•çš„ GraphQL æœåŠ¡å¯èƒ½ä¼šåƒ â€œèŠå¤©â€ ä¸€æ ·åå¤ä»æ‚¨çš„æ•°æ®åº“åŠ è½½æ•°æ®ã€‚</p>
<p>è¿™é€šå¸¸å¯ä»¥é€šè¿‡æ‰¹å¤„ç†æŠ€æœ¯æ¥è§£å†³ï¼Œè¿™ä¸€æŠ€æœ¯èƒ½å¤Ÿæ”¶é›†çŸ­æ—¶é—´å†…æ¥è‡ªåç«¯çš„å¤šä¸ªæ•°æ®è¯·æ±‚ï¼Œç„¶åé€šè¿‡è¯¸å¦‚ Facebook çš„ <a target="_blank" rel="noopener" href="https://github.com/facebook/dataloader">DataLoader</a> ç­‰å·¥å…·ï¼Œå°†å…¶æ‰“åŒ…æˆå•ä¸ªè¯·æ±‚å†å‘é€åˆ°åº•å±‚æ•°æ®åº“æˆ–å¾®æœåŠ¡ã€‚</p>
<h3 id="å…³äº-Graphs-çš„æ€è€ƒ"><a href="#å…³äº-Graphs-çš„æ€è€ƒ" class="headerlink" title="å…³äº Graphs çš„æ€è€ƒ"></a>å…³äº Graphs çš„æ€è€ƒ</h3><h4 id="ä¸€åˆ‡çš†æ˜¯å›¾"><a href="#ä¸€åˆ‡çš†æ˜¯å›¾" class="headerlink" title="ä¸€åˆ‡çš†æ˜¯å›¾ *"></a>ä¸€åˆ‡çš†æ˜¯å›¾ <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Turtles_all_the_way_down">*</a></h4><blockquote>
<p>ä½¿ç”¨ GraphQLï¼Œä½ å¯ä»¥å°†ä½ æ‰€æœ‰çš„ä¸šåŠ¡å»ºæ¨¡ä¸ºå›¾</p>
</blockquote>
<p>å›¾æ˜¯å°†å¾ˆå¤šçœŸå®ä¸–ç•Œç°è±¡å˜æˆæ¨¡å‹çš„å¼ºå¤§å·¥å…·ï¼Œå› ä¸ºå®ƒä»¬å’Œæˆ‘ä»¬è‡ªç„¶çš„å¿ƒæ™ºæ¨¡å‹å’ŒåŸºæœ¬è¿‡ç¨‹çš„å£å¤´æè¿°å¾ˆç›¸ä¼¼ã€‚é€šè¿‡ GraphQLï¼Œä½ ä¼šæŠŠè‡ªå·±çš„ä¸šåŠ¡é¢†åŸŸé€šè¿‡å®šä¹‰ schema å»ºæ¨¡æˆä¸€å¼ å›¾ï¼›åœ¨ä½ çš„ schema é‡Œï¼Œä½ å®šä¹‰ä¸åŒç±»å‹çš„èŠ‚ç‚¹ä»¥åŠå®ƒä»¬ä¹‹é—´æ˜¯å¦‚ä½•è¿æ¥çš„ã€‚åœ¨å®¢æˆ·ç«¯è¿™è¾¹ï¼Œè¿™åˆ›å»ºäº†ä¸€ç§ç±»ä¼¼äºé¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ¨¡å¼ï¼šå¼•ç”¨å…¶ä»–ç±»å‹çš„ç±»å‹ã€‚åœ¨æœåŠ¡å™¨ç«¯ï¼Œç”±äº GraphQL å®šä¹‰äº†æ¥å£ï¼Œä½ å¯ä»¥åœ¨ä»»ä½•åç«¯è‡ªç”±çš„ä½¿ç”¨å®ƒï¼ˆæ— è®ºæ–°æ—§ï¼ï¼‰ã€‚</p>
<h4 id="å…±åŒè¯­è¨€"><a href="#å…±åŒè¯­è¨€" class="headerlink" title="å…±åŒè¯­è¨€"></a>å…±åŒè¯­è¨€</h4><blockquote>
<p>å‘½åæ˜¯æ„å»ºç›´è§‚æ¥å£ä¸­ä¸€ä¸ªå›°éš¾ä½†é‡è¦çš„éƒ¨åˆ†</p>
</blockquote>
<p>è€ƒè™‘ä¸‹æŠŠä½ çš„ GraphQL schema ä½œä¸ºä¸€ç§ç»™ä½ çš„å›¢é˜Ÿå’Œç”¨æˆ·çš„æ²Ÿé€šçš„å…±åŒè¯­è¨€ã€‚ä¸ºäº†å»ºç«‹ä¸€ä¸ªå¥½çš„ schemaï¼Œä½ å¿…é¡»æ£€æŸ¥ä½ ç”¨æ¥æè¿°ä¸šåŠ¡çš„æ—¥å¸¸è¯­è¨€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè®©æˆ‘ä»¬å°è¯•ç”¨ç®€å•çš„æ–‡å­—æè¿°ä¸€ä¸ªç”µå­é‚®ä»¶åº”ç”¨ç¨‹åºï¼š</p>
<ul>
<li>ä¸€ä¸ªç”¨æˆ·å¯ä»¥æœ‰å¤šä¸ªé‚®ç®±è´¦å·</li>
<li>æ¯ä¸ªç”µå­é‚®ä»¶å¸æˆ·éƒ½æœ‰åœ°å€ã€æ”¶ä»¶ç®±ã€è‰ç¨¿ç®±ã€åˆ é™¤çš„é‚®ä»¶å’Œå‘é€çš„é‚®ä»¶</li>
<li>æ¯å°é‚®ä»¶éƒ½æœ‰å‘é€äººã€æ¥æ”¶æ—¥æœŸã€ä¸»é¢˜å’Œæ­£æ–‡</li>
<li>æ²¡æœ‰æ”¶ä»¶äººåœ°å€ï¼Œç”¨æˆ·æ— æ³•å‘é€ç”µå­é‚®ä»¶</li>
</ul>
<p>å‘½åæ˜¯æ„å»ºç›´è§‚çš„æ¥å£ä¸­ä¸€ä¸ªå›°éš¾ä½†é‡è¦çš„éƒ¨åˆ†ï¼Œæ‰€ä»¥èŠ±æ—¶é—´ä»”ç»†åœ°è€ƒè™‘å¯¹äºä½ çš„é—®é¢˜åŸŸå’Œç”¨æˆ·ä»€ä¹ˆäº‹æœ‰æ„ä¹‰çš„ã€‚æ‚¨çš„å›¢é˜Ÿåº”è¯¥å¯¹è¿™äº›ä¸šåŠ¡é¢†åŸŸçš„è§„åˆ™å½¢æˆå…±åŒçš„ç†è§£å’Œå…±è¯†ï¼Œå› ä¸ºæ‚¨éœ€è¦ä¸º GraphQL schema ä¸­çš„èŠ‚ç‚¹å’Œå…³ç³»é€‰æ‹©ç›´è§‚ï¼Œè€ç”¨çš„åç§°ã€‚è¯•ç€å»æƒ³è±¡ä¸€äº›ä½ æƒ³æ‰§è¡Œçš„æŸ¥è¯¢ï¼š</p>
<p>è·å–æˆ‘æ‰€æœ‰å¸æˆ·çš„æ”¶ä»¶ç®±é‡Œæœªè¯»é‚®ä»¶çš„æ•°é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  accounts &#123;</span><br><span class="line">    inbox &#123;</span><br><span class="line">      unreadEmailCount</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è·å–ä¸»è´¦æˆ·çš„å‰äºŒåå°è‰ç¨¿é‚®ä»¶çš„â€œé¢„è§ˆä¿¡æ¯â€</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  mainAccount &#123;</span><br><span class="line">    drafts(first: 20) &#123;</span><br><span class="line">      ...previewInfo</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fragment previewInfo on Email &#123;</span><br><span class="line">  subject</span><br><span class="line">  bodyPreviewSentence</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="ä¸šåŠ¡é€»è¾‘å±‚"><a href="#ä¸šåŠ¡é€»è¾‘å±‚" class="headerlink" title="ä¸šåŠ¡é€»è¾‘å±‚"></a>ä¸šåŠ¡é€»è¾‘å±‚</h4><blockquote>
<p>ä½ çš„ä¸šåŠ¡é€»è¾‘å±‚åº”ä½œä¸ºæ‰§è¡Œä¸šåŠ¡åŸŸè§„åˆ™çš„å”¯ä¸€æ­£ç¡®æ¥æº</p>
</blockquote>
<p>ä½ åº”è¯¥åœ¨å“ªé‡Œå®šä¹‰çœŸæ­£çš„ä¸šåŠ¡é€»è¾‘ï¼Ÿä½ åº”è¯¥åœ¨å“ªé‡ŒéªŒè¯ï¼Œæ£€æŸ¥ç”¨æˆ·æƒé™ï¼Ÿå°±æ˜¯åœ¨ä¸“é—¨çš„ä¸šåŠ¡é€»è¾‘å±‚é‡Œã€‚ä½ çš„ä¸šåŠ¡é€»è¾‘å±‚åº”ä½œä¸ºæ‰§è¡Œä¸šåŠ¡åŸŸè§„åˆ™çš„å”¯ä¸€æ­£ç¡®æ¥æºã€‚</p>
<p><img src="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/blog/microserive/graphql.png" alt=""></p>
<p>åœ¨ä¸Šå›¾ä¸­ï¼Œç³»ç»Ÿä¸­çš„æ‰€æœ‰å…¥å£ç‚¹ï¼ˆRESTã€GraphQLå’ŒRPCï¼‰éƒ½å°†ä½¿ç”¨ç›¸åŒçš„éªŒè¯ã€æˆæƒå’Œé”™è¯¯å¤„ç†è§„åˆ™è¿›è¡Œå¤„ç†ã€‚</p>
<h4 id="ä½¿ç”¨æ—§æœ‰çš„æ•°æ®"><a href="#ä½¿ç”¨æ—§æœ‰çš„æ•°æ®" class="headerlink" title="ä½¿ç”¨æ—§æœ‰çš„æ•°æ®"></a>ä½¿ç”¨æ—§æœ‰çš„æ•°æ®</h4><blockquote>
<p>å¸Œæœ›æ„å»ºä¸€ä¸ªæè¿°å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨æ•°æ®çš„ GraphQL schemaï¼Œè€Œä¸æ˜¯é•œåƒæ—§æœ‰çš„æ•°æ®åº“ schemaã€‚</p>
</blockquote>
<p>æœ‰æ—¶å€™ï¼Œä½ ä¼šå‘ç°è‡ªå·±æ­£åœ¨ä½¿ç”¨ä¸èƒ½å®Œå…¨åæ˜ å®¢æˆ·ç«¯æ¶ˆè´¹æ•°æ®çš„æ—§æœ‰çš„æ•°æ®æºã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ›´å€¾å‘äºæ„å»ºä¸€ä¸ªæè¿°å®¢æˆ·ç«¯å¦‚ä½•ä½¿ç”¨æ•°æ®çš„ GraphQL schemaï¼Œè€Œä¸æ˜¯é•œåƒæ—§æœ‰çš„æ•°æ®åº“ schemaã€‚</p>
<p>æ„å»ºä¸€ä¸ªè¡¨è¾¾â€œæ˜¯ä»€ä¹ˆâ€è€Œä¸æ˜¯â€œæ€ä¹ˆåšâ€çš„ GraphQL schemaã€‚ç„¶åï¼Œæ‚¨å¯ä»¥æ”¹è¿›æ‰§è¡Œçš„å…·ä½“ç»†èŠ‚ï¼Œè€Œä¸ä¼šç ´åä¸æ—§å®¢æˆ·ç«¯çš„æ¥å£ã€‚</p>
<h4 id="ä¸€æ¬¡ä¸€æ­¥"><a href="#ä¸€æ¬¡ä¸€æ­¥" class="headerlink" title="ä¸€æ¬¡ä¸€æ­¥"></a>ä¸€æ¬¡ä¸€æ­¥</h4><blockquote>
<p>æ›´é¢‘ç¹åœ°è¿›è¡ŒéªŒè¯å’Œè·å¾—åé¦ˆ</p>
</blockquote>
<p>ä¸è¦è¯•å›¾ä¸€æ¬¡å°±åšä¸€ä¸ªæ¨¡å‹æ¥æ„å»ºæ•´ä¸ªä¸šåŠ¡åŸŸã€‚ è€Œæ˜¯ä¸€æ¬¡åªæ„å»ºä¸€ä¸ªåœºæ™¯æ‰€éœ€çš„éƒ¨åˆ† schemaã€‚æ¸æ¸åœ°æ‹“å±• schemaï¼Œä½ è¦æ›´é¢‘ç¹åœ°è¿›è¡ŒéªŒè¯å’Œè·å¾—åé¦ˆï¼Œä»¥ä¾¿å¯»æ‰¾åˆ°æ„å»ºçš„æ­£ç¡®è§£å†³æ–¹æ¡ˆã€‚</p>
<h3 id="é€šè¿‡-HTTP-æä¾›æœåŠ¡"><a href="#é€šè¿‡-HTTP-æä¾›æœåŠ¡" class="headerlink" title="é€šè¿‡ HTTP æä¾›æœåŠ¡"></a>é€šè¿‡ HTTP æä¾›æœåŠ¡</h3><p>ä½¿ç”¨ GraphQL æ—¶ï¼Œæœ€å¸¸è§è¢«é€‰ç”¨çš„å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨åè®®æ˜¯æ— å¤„ä¸åœ¨çš„ HTTPã€‚ä»¥ä¸‹æ˜¯è®¾ç½® GraphQL æœåŠ¡å™¨ä»¥é€šè¿‡ HTTP è¿›è¡Œæ“ä½œçš„ä¸€äº›å‡†åˆ™ã€‚</p>
<h4 id="ç½‘ç»œè¯·æ±‚ç®¡é“"><a href="#ç½‘ç»œè¯·æ±‚ç®¡é“" class="headerlink" title="ç½‘ç»œè¯·æ±‚ç®¡é“"></a>ç½‘ç»œè¯·æ±‚ç®¡é“</h4><p>å¤§å¤šæ•°ç°ä»£ Web æ¡†æ¶ä½¿ç”¨ä¸€ä¸ªç®¡é“æ¨¡å‹ï¼Œé€šè¿‡ä¸€ç»„ä¸­é—´ä»¶ï¼ˆä¹Ÿç§°ä¸ºè¿‡æ»¤å™¨/æ’ä»¶ï¼‰å †æ ˆä¼ é€’è¯·æ±‚ã€‚å½“è¯·æ±‚æµç»ç®¡é“æ—¶ï¼Œå®ƒå¯ä»¥è¢«æ£€æŸ¥ã€è½¬æ¢ã€ä¿®æ”¹ã€æˆ–æ˜¯è¿”å›å“åº”å¹¶ç»ˆæ­¢ã€‚GraphQL åº”å½“è¢«æ”¾ç½®åœ¨æ‰€æœ‰èº«ä»½éªŒè¯ä¸­é—´ä»¶ä¹‹åï¼Œä»¥ä¾¿ä½ åœ¨ HTTP å…¥å£ç«¯ç‚¹å¤„ç†å™¨ä¸­èƒ½å¤Ÿè®¿é—®åˆ°ç›¸åŒçš„ä¼šè¯å’Œç”¨æˆ·ä¿¡æ¯ã€‚</p>
<h4 id="URI-å’Œè·¯ç”±"><a href="#URI-å’Œè·¯ç”±" class="headerlink" title="URI å’Œè·¯ç”±"></a>URI å’Œè·¯ç”±</h4><p>HTTP é€šå¸¸ä¸ REST ç›¸å…³è”ï¼ŒREST ä½¿ç”¨â€œèµ„æºâ€ä½œä¸ºå…¶æ ¸å¿ƒæ¦‚å¿µã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒGraphQL çš„æ¦‚å¿µæ¨¡å‹æ˜¯ä¸€ä¸ªå®ä½“å›¾ã€‚å› æ­¤ï¼ŒGraphQL ä¸­çš„å®ä½“æ— æ³•é€šè¿‡ URL è¯†åˆ«ã€‚ç›¸åï¼ŒGraphQL æœåŠ¡å™¨åœ¨å•ä¸ª URL /å…¥å£ç«¯ç‚¹ï¼ˆé€šå¸¸æ˜¯ <code>/graphql</code>ï¼‰ä¸Šè¿è¡Œï¼Œå¹¶ä¸”æ‰€æœ‰æä¾›æœåŠ¡çš„ GraphQL è¯·æ±‚éƒ½åº”è¢«å¯¼å‘æ­¤å…¥å£ç«¯ç‚¹ã€‚</p>
<h4 id="HTTP-æ–¹æ³•ã€æ ‡é¢˜å’Œæ­£æ–‡"><a href="#HTTP-æ–¹æ³•ã€æ ‡é¢˜å’Œæ­£æ–‡" class="headerlink" title="HTTP æ–¹æ³•ã€æ ‡é¢˜å’Œæ­£æ–‡"></a>HTTP æ–¹æ³•ã€æ ‡é¢˜å’Œæ­£æ–‡</h4><p>ä½ çš„ GraphQL HTTP æœåŠ¡å™¨åº”å½“èƒ½å¤Ÿå¤„ç† HTTP GET å’Œ POST æ–¹æ³•ã€‚</p>
<h5 id="GET-è¯·æ±‚"><a href="#GET-è¯·æ±‚" class="headerlink" title="GET è¯·æ±‚"></a>GET è¯·æ±‚</h5><p>åœ¨æ”¶åˆ°ä¸€ä¸ª HTTP GET è¯·æ±‚æ—¶ï¼Œåº”å½“åœ¨ â€œqueryâ€ æŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆquery stringï¼‰ä¸­æŒ‡å®š GraphQL æŸ¥è¯¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬è¦æ‰§è¡Œä»¥ä¸‹ GraphQL æŸ¥è¯¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  me &#123;</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤è¯·æ±‚å¯ä»¥é€šè¿‡ HTTP GET å‘é€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;myapi&#x2F;graphql?query&#x3D;&#123;me&#123;name&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>æŸ¥è¯¢å˜é‡å¯ä»¥ä½œä¸º JSON ç¼–ç çš„å­—ç¬¦ä¸²å‘é€åˆ°åä¸º <code>variables</code> çš„é™„åŠ æŸ¥è¯¢å‚æ•°ä¸­ã€‚å¦‚æœæŸ¥è¯¢åŒ…å«å¤šä¸ªå…·åæ“ä½œï¼Œåˆ™å¯ä»¥ä½¿ç”¨ä¸€ä¸ª <code>operationName</code> æŸ¥è¯¢å‚æ•°æ¥æ§åˆ¶å“ªä¸€ä¸ªåº”å½“æ‰§è¡Œã€‚</p>
<h5 id="POST-è¯·æ±‚"><a href="#POST-è¯·æ±‚" class="headerlink" title="POST è¯·æ±‚"></a>POST è¯·æ±‚</h5><p>æ ‡å‡†çš„ GraphQL POST è¯·æ±‚åº”å½“ä½¿ç”¨ <code>application/json</code> å†…å®¹ç±»å‹ï¼ˆcontent typeï¼‰ï¼Œå¹¶åŒ…å«ä»¥ä¸‹å½¢å¼ JSON ç¼–ç çš„è¯·æ±‚ä½“ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;query&quot;</span>: <span class="string">&quot;...&quot;</span>,</span><br><span class="line">  <span class="string">&quot;operationName&quot;</span>: <span class="string">&quot;...&quot;</span>,</span><br><span class="line">  <span class="string">&quot;variables&quot;</span>: &#123; <span class="string">&quot;myVariable&quot;</span>: <span class="string">&quot;someValue&quot;</span>, ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>operationName</code> å’Œ <code>variables</code> æ˜¯å¯é€‰å­—æ®µã€‚ä»…å½“æŸ¥è¯¢ä¸­å­˜åœ¨å¤šä¸ªæ“ä½œæ—¶æ‰éœ€è¦ <code>operationName</code>ã€‚</p>
<p>é™¤äº†ä¸Šè¾¹è¿™ç§è¯·æ±‚ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å»ºè®®æ”¯æŒå¦å¤–ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>å¦‚æœå­˜åœ¨ â€œqueryâ€ è¿™ä¸€æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°ï¼ˆå¦‚ä¸Šé¢çš„ GET ç¤ºä¾‹ä¸­ï¼‰ï¼Œåˆ™åº”å½“ä»¥ä¸ HTTP GET ç›¸åŒçš„æ–¹å¼è¿›è¡Œè§£æå’Œå¤„ç†ã€‚</li>
<li>å¦‚æœå­˜åœ¨ â€œapplication/graphqlâ€ Content-Type å¤´ï¼Œåˆ™å°† HTTP POST è¯·æ±‚ä½“å†…å®¹è§†ä¸º GraphQL æŸ¥è¯¢å­—ç¬¦ä¸²ã€‚</li>
</ul>
<p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ express-graphqlï¼Œé‚£ä¹ˆä½ å·²ç»ç›´æ¥è·å¾—äº†è¿™äº›æ”¯æŒã€‚</p>
<h4 id="å“åº”"><a href="#å“åº”" class="headerlink" title="å“åº”"></a>å“åº”</h4><p>æ— è®ºä½¿ç”¨ä»»ä½•æ–¹æ³•å‘é€æŸ¥è¯¢å’Œå˜é‡ï¼Œå“åº”éƒ½åº”å½“ä»¥ JSON æ ¼å¼åœ¨è¯·æ±‚æ­£æ–‡ä¸­è¿”å›ã€‚å¦‚è§„èŒƒä¸­æ‰€è¿°ï¼ŒæŸ¥è¯¢ç»“æœå¯èƒ½ä¼šæ˜¯ä¸€äº›æ•°æ®å’Œä¸€äº›é”™è¯¯ï¼Œå¹¶ä¸”åº”å½“ç”¨ä»¥ä¸‹å½¢å¼çš„ JSON å¯¹è±¡è¿”å›ï¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;data&quot;</span>: &#123; ... &#125;,</span><br><span class="line">  <span class="string">&quot;errors&quot;</span>: [ ... ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæ²¡æœ‰è¿”å›é”™è¯¯ï¼Œå“åº”ä¸­ä¸åº”å½“å‡ºç° <code>&quot;errors&quot;</code> å­—æ®µã€‚å¦‚æœæ²¡æœ‰è¿”å›æ•°æ®ï¼Œåˆ™ <a target="_blank" rel="noopener" href="http://spec.graphql.cn//#sec-Data-">æ ¹æ® GraphQL è§„èŒƒ</a>ï¼Œåªèƒ½åœ¨æ‰§è¡ŒæœŸé—´å‘ç”Ÿé”™è¯¯æ—¶æ‰èƒ½åŒ…å« <code>&quot;data&quot;</code> å­—æ®µã€‚</p>
<h4 id="GraphiQL"><a href="#GraphiQL" class="headerlink" title="GraphiQL"></a>GraphiQL</h4><p>GraphiQL åœ¨æµ‹è¯•å’Œå¼€å‘è¿‡ç¨‹ä¸­éå¸¸æœ‰ç”¨ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸‹åº”å½“é»˜è®¤è¢«ç¦ç”¨ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ express-graphqlï¼Œå¯ä»¥æ ¹æ® NODE_ENV ç¯å¢ƒå˜é‡è¿›è¡Œåˆ‡æ¢ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(&#39;&#x2F;graphql&#39;, graphqlHTTP(&#123;</span><br><span class="line">  schema: MySessionAwareGraphQLSchema,</span><br><span class="line">  graphiql: process.env.NODE_ENV &#x3D;&#x3D;&#x3D; &#39;development&#39;,</span><br><span class="line">&#125;));</span><br></pre></td></tr></table></figure>

<h4 id="Node"><a href="#Node" class="headerlink" title="Node"></a>Node</h4><p>å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ NodeJSï¼Œæˆ‘ä»¬æ¨èä½¿ç”¨ <a target="_blank" rel="noopener" href="https://github.com/graphql/express-graphql">express-graphql</a> æˆ– <a target="_blank" rel="noopener" href="https://github.com/apollostack/graphql-server">graphql-server</a>ã€‚</p>
<h3 id="æˆæƒ"><a href="#æˆæƒ" class="headerlink" title="æˆæƒ"></a>æˆæƒ</h3><blockquote>
<p>å°†æˆæƒé€»è¾‘å§”æ‰˜ç»™ä¸šåŠ¡é€»è¾‘å±‚</p>
</blockquote>
<p>æˆæƒæ˜¯ä¸€ç§ä¸šåŠ¡é€»è¾‘ï¼Œæè¿°ç»™å®šçš„ç”¨æˆ·ã€ä¼šè¯ã€ä¸Šä¸‹æ–‡æ˜¯å¦å…·æœ‰æ‰§è¡Œæ“ä½œçš„æƒé™æˆ–æŸ¥çœ‹ä¸€æ¡æ•°æ®çš„æƒé™ã€‚ä¾‹å¦‚ï¼š</p>
<p><strong>â€œåªæœ‰ä½œè€…æ‰èƒ½çœ‹åˆ°ä»–ä»¬è‡ªå·±çš„è‰ç¨¿â€</strong></p>
<p>åº”å½“åœ¨ <a target="_blank" rel="noopener" href="https://graphql.cn/learn/thinking-in-graphs/#ä¸šåŠ¡é€»è¾‘å±‚">ä¸šåŠ¡é€»è¾‘å±‚</a> å®æ–½è¿™ç§è¡Œä¸ºã€‚åœ¨ GraphQL å±‚ä¸­æ”¾ç½®æˆæƒé€»è¾‘æ˜¯å¾ˆå¸å¼•äººçš„ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> postType = <span class="keyword">new</span> GraphQLObjectType(&#123;</span><br><span class="line">  name: <span class="string">&#x27;Post&#x27;</span>,</span><br><span class="line">  fields: &#123;</span><br><span class="line">    body: &#123;</span><br><span class="line">      type: GraphQLString,</span><br><span class="line">      resolve: <span class="function">(<span class="params">post, args, context, &#123; rootValue &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// åªæœ‰å½“ç”¨æˆ·æ˜¯å¸–å­çš„ä½œè€…æ—¶æ‰è¿”å›å¸–å­æ­£æ–‡</span></span><br><span class="line">        <span class="keyword">if</span> (context.user &amp;&amp; (context.user.id === post.authorId)) &#123;</span><br><span class="line">          <span class="keyword">return</span> post.body;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬é€šè¿‡æ£€æŸ¥å¸–å­çš„ <code>authorId</code> å­—æ®µæ˜¯å¦ç­‰äºå½“å‰ç”¨æˆ·çš„ <code>id</code> æ¥å®šä¹‰â€œä½œè€…æ‹¥æœ‰ä¸€ä¸ªå¸–å­â€ã€‚ä½ èƒ½å‘ç°å…¶ä¸­çš„é—®é¢˜å—ï¼Ÿæˆ‘ä»¬éœ€è¦å¤åˆ¶è¿™æ®µä»£ç åˆ°æœåŠ¡ä¸­çš„æ¯ä¸€ä¸ªå…¥å£ç«¯ç‚¹ã€‚ä¸€æ—¦æˆ‘ä»¬æ— æ³•ä¿è¯æˆæƒé€»è¾‘çš„å®Œå…¨åŒæ­¥ï¼Œç”¨æˆ·å¯èƒ½åœ¨ä½¿ç”¨ä¸åŒçš„ API æ—¶çœ‹åˆ°ä¸åŒçš„æ•°æ®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¡®å®šæˆæƒçš„ <a target="_blank" rel="noopener" href="https://graphql.cn/learn/thinking-in-graphs/#ä¸šåŠ¡é€»è¾‘å±‚">å”¯ä¸€çœŸå®æ¥æº</a> æ¥é¿å…è¿™ç§æƒ…å†µã€‚</p>
<p>åœ¨å­¦ä¹  GraphQL æˆ–åŸå‹è®¾è®¡æ—¶ï¼Œåœ¨è§£æå™¨å†…å®šä¹‰æˆæƒé€»è¾‘æ˜¯å¯ä»¥æ¥å—çš„ã€‚ç„¶è€Œï¼Œå¯¹äºç”Ÿäº§ä»£ç åº“æ¥è¯´ï¼Œè¿˜æ˜¯å°†æˆæƒé€»è¾‘å§”æ‰˜ç»™ä¸šåŠ¡é€»è¾‘å±‚ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æˆæƒé€»è¾‘åœ¨ postRepository ä¸­</span></span><br><span class="line"><span class="keyword">var</span> postRepository = <span class="built_in">require</span>(<span class="string">&#x27;postRepository&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> postType = <span class="keyword">new</span> GraphQLObjectType(&#123;</span><br><span class="line">  name: <span class="string">&#x27;Post&#x27;</span>,</span><br><span class="line">  fields: &#123;</span><br><span class="line">    body: &#123;</span><br><span class="line">      type: GraphQLString,</span><br><span class="line">      resolve: <span class="function">(<span class="params">post, args, context, &#123; rootValue &#125;</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> postRepository.getBody(context.user, post);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸šåŠ¡é€»è¾‘å±‚è¦æ±‚è°ƒç”¨è€…æä¾›ä¸€ä¸ªç”¨æˆ·å¯¹è±¡ã€‚å¦‚æœæ‚¨ä½¿ç”¨ GraphQL.jsï¼Œæ‚¨åº”å½“åœ¨è§£æå™¨çš„ <code>context</code> å‚æ•°æˆ–æ˜¯ç¬¬å››ä¸ªå‚æ•°ä¸­çš„ <code>rootValue</code> ä¸Šå¡«å…… User å¯¹è±¡ã€‚</p>
<p>æˆ‘ä»¬å»ºè®®å°†å®Œå…¨æ··åˆ <a target="_blank" rel="noopener" href="https://graphql.cn/learn/authorization/#note1">[1]</a> çš„ User å¯¹è±¡ä¼ é€’ç»™ä¸šåŠ¡é€»è¾‘å±‚ï¼Œè€Œéä¼ é€’ä¸é€æ˜çš„ token æˆ– API å¯†é’¥ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¯·æ±‚å¤„ç†ç®¡é“çš„ä¸åŒé˜¶æ®µå¤„ç† <a target="_blank" rel="noopener" href="https://graphql.cn/graphql-js/authentication-and-express-middleware/">èº«ä»½éªŒè¯</a> å’Œæˆæƒçš„ä¸åŒé—®é¢˜ã€‚</p>
<ol>
<li>â€œæ··åˆï¼ˆhydratedï¼‰â€ä¸€ä¸ªå¯¹è±¡æ˜¯æŒ‡ï¼šå¯¹ä¸€ä¸ªå­˜å‚¨åœ¨å†…å­˜ä¸­ä¸”å°šæœªåŒ…å«ä»»ä½•åŸŸæ•°æ®ï¼ˆâ€œçœŸå®â€æ•°æ®ï¼‰çš„å¯¹è±¡ï¼Œä½¿ç”¨åŸŸæ•°æ®ï¼ˆä¾‹å¦‚æ¥è‡ªæ•°æ®åº“ã€ç½‘ç»œæˆ–æ–‡ä»¶ç³»ç»Ÿçš„æ•°æ®ï¼‰è¿›è¡Œå¡«å……ã€‚ <a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/6991135/what-does-it-mean-to-hydrate-an-object">*</a></li>
</ol>
<h3 id="åˆ†é¡µ-1"><a href="#åˆ†é¡µ-1" class="headerlink" title="åˆ†é¡µ"></a>åˆ†é¡µ</h3><blockquote>
<p>ä¸åŒçš„åˆ†é¡µæ¨¡å‹å¯ä»¥å®ç°ä¸åŒçš„å®¢æˆ·ç«¯åŠŸèƒ½</p>
</blockquote>
<p>åœ¨ GraphQL ä¸­ä¸€ä¸ªå¸¸è§çš„ç”¨ä¾‹æ˜¯éå†å¯¹è±¡é›†åˆä¹‹é—´çš„å…³ç³»ã€‚åœ¨ GraphQL ä¸­æœ‰è®¸å¤šä¸åŒçš„æ–¹å¼æ¥å±•ç¤ºè¿™äº›å…³ç³»ï¼Œä¸ºå®¢æˆ·ç«¯å¼€å‘äººå‘˜æä¾›äº†ä¸€ç»„ä¸åŒçš„åŠŸèƒ½ã€‚</p>
<h4 id="å¤æ•°"><a href="#å¤æ•°" class="headerlink" title="å¤æ•°"></a>å¤æ•°</h4><p>æš´éœ²å¯¹è±¡ä¹‹é—´è¿æ¥çš„æœ€ç®€å•æ–¹æ³•æ˜¯è¿”å›ä¸€ä¸ªå¤æ•°ç±»å‹çš„å­—æ®µã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³å¾—åˆ°ä¸€ä¸ª R2-D2 çš„æœ‹å‹åˆ—è¡¨ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¯·æ±‚æ‰€æœ‰çš„æœ‹å‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    friends &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;data&quot;: &#123;</span><br><span class="line">    &quot;hero&quot;: &#123;</span><br><span class="line">      &quot;name&quot;: &quot;R2-D2&quot;,</span><br><span class="line">      &quot;friends&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;Luke Skywalker&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;Han Solo&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;name&quot;: &quot;Leia Organa&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h4><p>ä½†æ˜¯ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿæ„è¯†åˆ°å®¢æˆ·ç«¯å¯èƒ½éœ€è¦å…¶ä»–è¡Œä¸ºã€‚å®¢æˆ·å¯èƒ½å¸Œæœ›èƒ½å¤ŸæŒ‡å®šä»–ä»¬æƒ³è¦è·å–çš„æœ‹å‹æ•°é‡ï¼›ä¹Ÿè®¸ä»–ä»¬åªè¦å‰ä¸¤ä¸ªã€‚æ‰€ä»¥æˆ‘ä»¬æƒ³è¦æš´éœ²ä¸€äº›ç±»ä¼¼çš„ä¸œè¥¿ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    friends(first:2) &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½†å³ä½¿æˆ‘ä»¬ä»…ä»…è·å¾—å‰ä¸¤ä¸ªç»“æœï¼Œæˆ‘ä»¬å¯èƒ½ä»ç„¶æƒ³è¦åœ¨åˆ—è¡¨ä¸­åˆ†é¡µï¼šä¸€æ—¦å®¢æˆ·ç«¯è·å–å‰ä¸¤ä¸ªæœ‹å‹ï¼Œä»–ä»¬å¯èƒ½ä¼šå‘é€ç¬¬äºŒä¸ªè¯·æ±‚æ¥è¯·æ±‚æ¥ä¸‹æ¥çš„ä¸¤ä¸ªæœ‹å‹ã€‚æˆ‘ä»¬å¦‚ä½•å¯ç”¨è¿™ä¸ªè¡Œä¸ºï¼Ÿ</p>
<h4 id="åˆ†é¡µå’Œè¾¹"><a href="#åˆ†é¡µå’Œè¾¹" class="headerlink" title="åˆ†é¡µå’Œè¾¹"></a>åˆ†é¡µå’Œè¾¹</h4><p>æˆ‘ä»¬æœ‰å¾ˆå¤šç§æ–¹æ³•æ¥å®ç°åˆ†é¡µï¼š</p>
<ul>
<li>æˆ‘ä»¬å¯ä»¥åƒè¿™æ · <code>friends(first:2 offset:2)</code> æ¥è¯·æ±‚åˆ—è¡¨ä¸­æ¥ä¸‹æ¥çš„ä¸¤ä¸ªç»“æœã€‚</li>
<li>æˆ‘ä»¬å¯ä»¥åƒè¿™æ · <code>friends(first:2 after:$friendId)</code>, æ¥è¯·æ±‚æˆ‘ä»¬ä¸Šä¸€æ¬¡è·å–åˆ°çš„æœ€åä¸€ä¸ªæœ‹å‹ä¹‹åçš„ä¸¤ä¸ªç»“æœã€‚</li>
<li>æˆ‘ä»¬å¯ä»¥åƒè¿™æ · <code>friends(first:2 after:$friendCursor)</code>, ä»æœ€åä¸€é¡¹ä¸­è·å–ä¸€ä¸ªæ¸¸æ ‡å¹¶ä½¿ç”¨å®ƒæ¥åˆ†é¡µã€‚</li>
</ul>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬å‘ç°<strong>åŸºäºæ¸¸æ ‡çš„åˆ†é¡µ</strong>æ˜¯æœ€å¼ºå¤§çš„åˆ†é¡µã€‚ç‰¹åˆ«å½“æ¸¸æ ‡æ˜¯ä¸é€æ˜çš„æ—¶ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åŸºäºæ¸¸æ ‡çš„åˆ†é¡µï¼ˆé€šè¿‡ä¸ºæ¸¸æ ‡è®¾ç½®åç§»æˆ– IDï¼‰æ¥å®ç°åŸºäºåç§»æˆ–åŸºäº ID çš„åˆ†é¡µï¼Œå¹¶ä¸”å¦‚æœåˆ†é¡µæ¨¡å‹åœ¨å°†æ¥å‘ç”Ÿå˜åŒ–ï¼Œåˆ™ä½¿ç”¨æ¸¸æ ‡å¯ä»¥æä¾›é¢å¤–çš„çµæ´»æ€§ã€‚éœ€è¦æé†’çš„æ˜¯ï¼Œæ¸¸æ ‡æ˜¯ä¸é€æ˜çš„ï¼Œå¹¶ä¸”å®ƒä»¬çš„æ ¼å¼ä¸åº”è¯¥è¢«ä¾èµ–ï¼Œæˆ‘ä»¬å»ºè®®ç”¨ base64 ç¼–ç å®ƒä»¬ã€‚</p>
<p>è¿™å¯¼è‡´æˆ‘ä»¬é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬å¦‚ä½•ä»å¯¹è±¡ä¸­è·å–æ¸¸æ ‡ï¼Ÿæˆ‘ä»¬ä¸å¸Œæœ›æ¸¸æ ‡æ”¾ç½®åœ¨ <code>User</code> ç±»å‹ä¸Šï¼›å®ƒæ˜¯è¿æ¥çš„å±æ€§ï¼Œè€Œä¸æ˜¯å¯¹è±¡çš„å±æ€§ã€‚æ‰€ä»¥æˆ‘ä»¬å¯èƒ½æƒ³è¦å¼•å…¥ä¸€ä¸ªæ–°çš„é—´æ¥å±‚ï¼›æˆ‘ä»¬çš„ <code>friends</code> å­—æ®µåº”è¯¥ç»™æˆ‘ä»¬ä¸€ä¸ªè¾¹ï¼ˆedgeï¼‰çš„åˆ—è¡¨ï¼Œè¾¹åŒæ—¶å…·æœ‰æ¸¸æ ‡å’Œåº•å±‚èŠ‚ç‚¹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    friends(first:2) &#123;</span><br><span class="line">      edges &#123;</span><br><span class="line">        node &#123;</span><br><span class="line">          name</span><br><span class="line">        &#125;</span><br><span class="line">        cursor</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå­˜åœ¨é’ˆå¯¹äºè¾¹è€Œä¸æ˜¯é’ˆå¯¹äºæŸä¸€ä¸ªå¯¹è±¡çš„ä¿¡æ¯ï¼Œåˆ™è¾¹è¿™ä¸ªæ¦‚å¿µä¹Ÿè¢«è¯æ˜æ˜¯æœ‰ç”¨çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨ API ä¸­æš´éœ²â€œå‹è°Šæ—¶é—´â€ï¼Œå°†å…¶æ”¾ç½®åœ¨è¾¹é‡Œæ˜¯å¾ˆè‡ªç„¶çš„ã€‚</p>
<h4 id="åˆ—è¡¨çš„ç»“å°¾ã€è®¡æ•°ä»¥åŠè¿æ¥"><a href="#åˆ—è¡¨çš„ç»“å°¾ã€è®¡æ•°ä»¥åŠè¿æ¥" class="headerlink" title="åˆ—è¡¨çš„ç»“å°¾ã€è®¡æ•°ä»¥åŠè¿æ¥"></a>åˆ—è¡¨çš„ç»“å°¾ã€è®¡æ•°ä»¥åŠè¿æ¥</h4><p>ç°åœ¨æˆ‘ä»¬æœ‰èƒ½åŠ›ä½¿ç”¨æ¸¸æ ‡å¯¹è¿æ¥è¿›è¡Œåˆ†é¡µï¼Œä½†æ˜¯æˆ‘ä»¬å¦‚ä½•çŸ¥é“ä½•æ—¶åˆ°è¾¾è¿æ¥çš„ç»“å°¾ï¼Ÿæˆ‘ä»¬å¿…é¡»ç»§ç»­æŸ¥è¯¢ï¼Œç›´åˆ°æˆ‘ä»¬æ”¶åˆ°ä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œä½†æ˜¯æˆ‘ä»¬çœŸçš„å¸Œæœ›è¿æ¥èƒ½å¤Ÿå‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆæ—¶å€™åˆ°è¾¾ç»“å°¾ï¼Œè¿™æ ·æˆ‘ä»¬ä¸éœ€è¦é¢å¤–çš„è¯·æ±‚ã€‚åŒæ ·çš„ï¼Œå¦‚æœæˆ‘ä»¬æƒ³çŸ¥é“å…³äºè¿æ¥æœ¬èº«çš„é™„åŠ ä¿¡æ¯æ€ä¹ˆåŠï¼›ä¾‹å¦‚ï¼ŒR2-D2 æœ‰å¤šå°‘ä¸ªæœ‹å‹ï¼Ÿ</p>
<p>ä¸ºäº†è§£å†³è¿™ä¸¤ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬çš„ <code>friends</code> å­—æ®µå¯ä»¥è¿”å›ä¸€ä¸ªè¿æ¥å¯¹è±¡ã€‚è¿æ¥å¯¹è±¡å°†æ‹¥æœ‰ä¸€ä¸ªå­˜æ”¾è¾¹çš„å­—æ®µä»¥åŠå…¶ä»–ä¿¡æ¯ï¼ˆå¦‚æ€»è®¡æ•°å’Œæœ‰å…³ä¸‹ä¸€é¡µæ˜¯å¦å­˜åœ¨çš„ä¿¡æ¯ï¼‰ã€‚æ‰€ä»¥æˆ‘ä»¬çš„æœ€ç»ˆæŸ¥è¯¢å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    friends(first:2) &#123;</span><br><span class="line">      totalCount</span><br><span class="line">      edges &#123;</span><br><span class="line">        node &#123;</span><br><span class="line">          name</span><br><span class="line">        &#125;</span><br><span class="line">        cursor</span><br><span class="line">      &#125;</span><br><span class="line">      pageInfo &#123;</span><br><span class="line">        endCursor</span><br><span class="line">        hasNextPage</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä¹Ÿå¯èƒ½åœ¨è¿™ä¸ª <code>PageInfo</code> å¯¹è±¡ä¸­åŒ…å« <code>endCursor</code> å’Œ <code>startCursor</code>ã€‚è¿™æ ·ï¼Œå¦‚æœæˆ‘ä»¬ä¸éœ€è¦è¾¹æ‰€åŒ…å«çš„ä»»ä½•é™„åŠ ä¿¡æ¯ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦æŸ¥è¯¢è¾¹ï¼Œå› ä¸ºæˆ‘ä»¬ä» <code>pageInfo</code> è·å–äº†åˆ†é¡µæ‰€éœ€çš„æ¸¸æ ‡ã€‚è¿™å¯¼è‡´è¿æ¥çš„æ½œåœ¨å¯ç”¨æ€§æ”¹è¿›ï¼›ç›¸æ¯”äºä»…æš´éœ² <code>edges</code> åˆ—è¡¨ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æš´éœ²ä¸€ä¸ªä»…åŒ…å«èŠ‚ç‚¹çš„ä¸“ç”¨åˆ—è¡¨ï¼Œä»¥é¿å…ä½¿ç”¨é—´æ¥å±‚ã€‚</p>
<h4 id="å®Œæ•´çš„è¿æ¥æ¨¡å‹"><a href="#å®Œæ•´çš„è¿æ¥æ¨¡å‹" class="headerlink" title="å®Œæ•´çš„è¿æ¥æ¨¡å‹"></a>å®Œæ•´çš„è¿æ¥æ¨¡å‹</h4><p>æ˜¾ç„¶ï¼Œè¿™æ¯”æˆ‘ä»¬åŸæ¥åªæœ‰å¤æ•°çš„è®¾è®¡æ›´å¤æ‚ï¼ä½†æ˜¯é€šè¿‡é‡‡ç”¨è¿™ç§è®¾è®¡ï¼Œæˆ‘ä»¬å·²ç»ä¸ºå®¢æˆ·è§£é”äº†è®¸å¤šåŠŸèƒ½ï¼š</p>
<ul>
<li>ä¸ºåˆ—è¡¨åˆ†é¡µçš„èƒ½åŠ›ã€‚</li>
<li>è¯·æ±‚æœ‰å…³è¿æ¥æœ¬èº«çš„ä¿¡æ¯çš„èƒ½åŠ›ï¼Œå¦‚ <code>totalCount</code> æˆ– <code>pageInfo</code>ã€‚</li>
<li>è¯·æ±‚æœ‰å…³è¾¹æœ¬èº«çš„ä¿¡æ¯çš„èƒ½åŠ›ï¼Œå¦‚ <code>cursor</code> æˆ– <code>friendshipTime</code>ã€‚</li>
<li>æ”¹å˜æˆ‘ä»¬åç«¯å¦‚ä½•å®ç°åˆ†é¡µçš„èƒ½åŠ›ï¼Œå› ä¸ºç”¨æˆ·ä»…ä½¿ç”¨ä¸é€æ˜çš„æ¸¸æ ‡ã€‚</li>
</ul>
<p>è¦æŸ¥çœ‹æ­¤æ“ä½œï¼Œåœ¨ç¤ºä¾‹ schema ä¸­æœ‰ä¸€ä¸ªé™„åŠ å­—æ®µï¼Œç§°ä¸º <code>friendsConnection</code>ï¼Œå®ƒæš´éœ²äº†æ‰€æœ‰è¿™äº›æ¦‚å¿µã€‚ä½ å¯ä»¥åœ¨ç¤ºä¾‹æŸ¥è¯¢ä¸­æŸ¥çœ‹å®ƒã€‚å°è¯•å°† <code>after</code> å‚æ•°ä» <code>friendsConnection</code> ç§»é™¤ä»¥æŸ¥çœ‹åˆ†é¡µå¦‚ä½•å—åˆ°å½±å“ã€‚å¦å¤–ï¼Œå°è¯•ç”¨è¿æ¥ä¸Šçš„ <code>friends</code> è¾…åŠ©å­—æ®µæ›¿æ¢ <code>edges</code> å­—æ®µï¼Œå½“é€‚ç”¨äºå®¢æˆ·ç«¯æ—¶ï¼Œè¿™æ ·å¯ä»¥ç›´æ¥è®¿é—®æœ‹å‹åˆ—è¡¨è€Œæ— éœ€é¢å¤–çš„è¾¹è¿™ä¸€å±‚ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    friendsConnection(first:2 after:&quot;Y3Vyc29yMQ&#x3D;&#x3D;&quot;) &#123;</span><br><span class="line">      totalCount</span><br><span class="line">      edges &#123;</span><br><span class="line">        node &#123;</span><br><span class="line">          name</span><br><span class="line">        &#125;</span><br><span class="line">        cursor</span><br><span class="line">      &#125;</span><br><span class="line">      pageInfo &#123;</span><br><span class="line">        endCursor</span><br><span class="line">        hasNextPage</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;friendsConnection&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">&quot;totalCount&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">&quot;edges&quot;</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;node&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;cursor&quot;</span>: <span class="string">&quot;Y3Vyc29yMg==&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">&quot;node&quot;</span>: &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;cursor&quot;</span>: <span class="string">&quot;Y3Vyc29yMw==&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;pageInfo&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;endCursor&quot;</span>: <span class="string">&quot;Y3Vyc29yMw==&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;hasNextPage&quot;</span>: <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="è¿æ¥è§„èŒƒ"><a href="#è¿æ¥è§„èŒƒ" class="headerlink" title="è¿æ¥è§„èŒƒ"></a>è¿æ¥è§„èŒƒ</h4><p>ä¸ºäº†ç¡®ä¿è¯¥æ¨¡å¼çš„ä¸€è‡´å®ç°ï¼ŒRelay é¡¹ç›®å…·æœ‰æ­£å¼çš„<a target="_blank" rel="noopener" href="https://facebook.github.io/relay/graphql/connections.htm">è§„èŒƒ</a>ï¼Œä½ å¯ä»¥éµå¾ªè¯¥è§„èŒƒæ¥æ„å»ºä½¿ç”¨åŸºäºæ¸¸æ ‡çš„è¿æ¥æ¨¡å¼çš„ GraphQL APIã€‚</p>
<h3 id="å…¨å±€å¯¹è±¡è¯†åˆ«"><a href="#å…¨å±€å¯¹è±¡è¯†åˆ«" class="headerlink" title="å…¨å±€å¯¹è±¡è¯†åˆ«"></a>å…¨å±€å¯¹è±¡è¯†åˆ«</h3><blockquote>
<p>ä¸€è‡´çš„å¯¹è±¡è®¿é—®å®ç°äº†ç®€å•çš„ç¼“å­˜å’Œå¯¹è±¡æŸ¥æ‰¾</p>
</blockquote>
<p>ä¸ºäº†æä¾›ç»™ GraphQL å®¢æˆ·ç«¯é€‰é¡¹ä»¥ä¼˜é›…åœ°å¤„ç†ç¼“å­˜å’Œæ•°æ®é‡æ–°è·å–ï¼ŒGraphQL æœåŠ¡ç«¯éœ€è¦ä»¥æ ‡å‡†åŒ–çš„æ–¹å¼å…¬å¼€å¯¹è±¡æ ‡è¯†ç¬¦ã€‚</p>
<p>ä¸ºæ­¤å®¢æˆ·ç«¯éœ€è¦é€šè¿‡ä»¥ ID è¯·æ±‚å¯¹è±¡çš„æ ‡å‡†æœºåˆ¶è¿›è¡ŒæŸ¥è¯¢ã€‚ç„¶ååœ¨å“åº”ä¸­ï¼Œschema å°†éœ€è¦æä¾›ä¸€ç§æä¾›è¿™äº› ID çš„æ ‡å‡†æ–¹å¼ã€‚</p>
<p>å› ä¸ºé™¤äº† ID ä¹‹å¤–ï¼Œå¯¹å¯¹è±¡çŸ¥ä¹‹ç”šå°‘ï¼Œæ‰€ä»¥æˆ‘ä»¬ç§°å®ƒä»¬ä¸ºå¯¹è±¡â€œèŠ‚ç‚¹â€ã€‚è¿™æ˜¯ä¸€ä¸ªæŸ¥è¯¢èŠ‚ç‚¹çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  node(id: &quot;4&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    ... on User &#123;</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>GraphQL schema çš„æ ¼å¼å…è®¸é€šè¿‡æ ¹æŸ¥è¯¢å¯¹è±¡ä¸Šçš„ <code>node</code> å­—æ®µè·å–ä»»ä½•å¯¹è±¡ã€‚è¿”å›çš„å¯¹è±¡ç¬¦åˆ â€œNodeâ€ <a target="_blank" rel="noopener" href="https://graphql.cn/learn/schema/#interfaces">æ¥å£</a>ã€‚</li>
<li>å¯ä»¥å®‰å…¨åœ°ä»å“åº”ä¸­æå–å‡º <code>id</code> å­—æ®µï¼Œå¹¶å¯ä»¥é€šè¿‡ç¼“å­˜å’Œé‡æ–°è·å–å°†å…¶å­˜å‚¨ä»¥ä¾›é‡ç”¨ã€‚</li>
<li>å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨æ¥å£ç‰‡æ®µæ¥æå–ç‰¹å®šäºç±»å‹çš„ã€ç¬¦åˆèŠ‚ç‚¹æ¥å£çš„å…¶ä»–ä¿¡æ¯ã€‚åœ¨æœ¬ç¤ºä¾‹ä¸­ä¸º â€œUserâ€ã€‚</li>
</ul>
<p>Node æ¥å£å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># å…·æœ‰å…¨å±€å”¯ä¸€ ID çš„å¯¹è±¡</span><br><span class="line">interface Node &#123;</span><br><span class="line">  # å¯¹è±¡çš„ ID</span><br><span class="line">  id: ID!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>User é€šè¿‡ä»¥ä¸‹æ–¹å¼ç¬¦åˆæ¥å£ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type User implements Node &#123;</span><br><span class="line">  id: ID!</span><br><span class="line">  # å…¨å</span><br><span class="line">  name: String!</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="è§„èŒƒ"><a href="#è§„èŒƒ" class="headerlink" title="è§„èŒƒ"></a>è§„èŒƒ</h4><p>ä¸‹é¢çš„æ‰€æœ‰å†…å®¹ä»¥æ›´åŠ æ­£å¼çš„è¦æ±‚æè¿°äº†å›´ç»•å¯¹è±¡æ ‡è¯†çš„è§„èŒƒï¼Œä»¥ç¡®ä¿åœ¨æœåŠ¡ç«¯å®ç°ä¹‹é—´çš„ä¸€è‡´æ€§ã€‚ è¿™äº›è§„èŒƒæ˜¯åŸºäºæœåŠ¡ç«¯å¦‚ä½•ä¸ <a target="_blank" rel="noopener" href="https://facebook.github.io/relay/">Relay</a> API å®¢æˆ·ç«¯å…¼å®¹æ¥å†™çš„ï¼Œä½†æ˜¯å¯¹ä»»ä½•å®¢æˆ·ç«¯éƒ½æœ‰ç”¨ã€‚</p>
<h4 id="ä¿ç•™ç±»å‹"><a href="#ä¿ç•™ç±»å‹" class="headerlink" title="ä¿ç•™ç±»å‹"></a>ä¿ç•™ç±»å‹</h4><p>ä¸æ­¤è§„èŒƒå…¼å®¹çš„ GraphQL æœåŠ¡ç«¯å¿…é¡»ä¿ç•™æŸäº›ç±»å‹å’Œç±»å‹åç§°ï¼Œä»¥æ”¯æŒä¸€è‡´çš„å¯¹è±¡æ ‡è¯†æ¨¡å‹ã€‚ç‰¹åˆ«åœ°ï¼Œæ­¤è§„èŒƒä¸ºä»¥ä¸‹ç±»å‹åˆ›å»ºäº†å‡†åˆ™ï¼š</p>
<ul>
<li>ä¸€ä¸ªåä¸º <code>Node</code> çš„æ¥å£ã€‚</li>
<li>æ ¹æŸ¥è¯¢ç±»å‹ä¸Šçš„ <code>node</code> å­—æ®µã€‚</li>
</ul>
<h4 id="Node-æ¥å£"><a href="#Node-æ¥å£" class="headerlink" title="Node æ¥å£"></a>Node æ¥å£</h4><p>æœåŠ¡ç«¯å¿…é¡»æä¾›ä¸€ä¸ªåä¸º <code>Node</code> çš„æ¥å£ã€‚è¯¥æ¥å£å¿…é¡»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåä¸º <code>id</code> çš„å­—æ®µï¼Œè¯¥å­—æ®µè¿”å›éç©ºçš„ <code>ID</code>ã€‚</p>
<p>è¿™ä¸ª <code>id</code> åº”å½“æ˜¯è¯¥å¯¹è±¡çš„å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œå¹¶ä¸”åªè¦ç»™å‡ºè¿™ä¸ª <code>id</code>ï¼ŒæœåŠ¡ç«¯å°±åº”è¯¥èƒ½å¤Ÿé‡æ–°è·å–è¯¥å¯¹è±¡ã€‚</p>
<h5 id="å†…çœ-1"><a href="#å†…çœ-1" class="headerlink" title="å†…çœ"></a>å†…çœ</h5><p>æ­£ç¡®å®ç°ä¸Šè¿°æ¥å£çš„æœåŠ¡ç«¯å°†æ¥å—å¦‚ä¸‹çš„å†…çœæŸ¥è¯¢ï¼Œå¹¶è¿”å›æä¾›çš„å“åº”ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  __type(name: &quot;Node&quot;) &#123;</span><br><span class="line">    name</span><br><span class="line">    kind</span><br><span class="line">    fields &#123;</span><br><span class="line">      name</span><br><span class="line">      type &#123;</span><br><span class="line">        kind</span><br><span class="line">        ofType &#123;</span><br><span class="line">          name</span><br><span class="line">          kind</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿”å›</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;__type&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Node&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;INTERFACE&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;fields&quot;</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;id&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">          <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;NON_NULL&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;ofType&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;ID&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;SCALAR&quot;</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Node-æ ¹å­—æ®µ"><a href="#Node-æ ¹å­—æ®µ" class="headerlink" title="Node æ ¹å­—æ®µ"></a>Node æ ¹å­—æ®µ</h4><p>æœåŠ¡ç«¯å¿…é¡»æä¾›ä¸€ä¸ªåä¸º <code>node</code>ï¼Œä¸”è¿”å› <code>Node</code> æ¥å£çš„æ ¹å­—æ®µã€‚è¯¥æ ¹å­—æ®µå¿…é¡»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå‚æ•°ï¼Œå³åä¸º <code>id</code> çš„éç©ºIDã€‚</p>
<p>å¦‚æœä¸€ä¸ªæŸ¥è¯¢è¿”å›çš„å¯¹è±¡å®ç°äº† <code>Node</code>ï¼Œé‚£ä¹ˆå½“æœåŠ¡ç«¯åœ¨ <code>Node</code> çš„ <code>id</code> å­—æ®µä¸­è¿”å›çš„å€¼ä½œä¸º <code>id</code> å‚æ•°ä¼ é€’ç»™ <code>node</code> çš„æ ¹å­—æ®µæ—¶ï¼Œè¯¥æ ¹å­—æ®µåº”è¯¥é‡æ–°è·å–ç›¸åŒçš„å¯¹è±¡ã€‚</p>
<p>æœåŠ¡ç«¯å¿…é¡»å°½æœ€å¤§åŠªåŠ›æ¥è·å–æ­¤æ•°æ®ï¼Œä½†å¹¶éæ€»èƒ½æˆåŠŸã€‚ä¾‹å¦‚ï¼ŒæœåŠ¡ç«¯å¯èƒ½ä¼šè¿”å›ä¸€ä¸ªå¸¦æœ‰æœ‰æ•ˆ <code>id</code> çš„ <code>User</code>ï¼Œä½†æ˜¯å½“å‘å‡ºä½¿ç”¨ <code>node</code> æ ¹å­—æ®µé‡æ–°è·å–è¯¥ç”¨æˆ·çš„è¯·æ±‚æ—¶ï¼Œè¯¥ç”¨æˆ·çš„æ•°æ®åº“å¯èƒ½ä¸å¯ç”¨ï¼Œæˆ–è€…è¯¥ç”¨æˆ·å¯èƒ½å·²åˆ é™¤äº†ä»–çš„ å¸æˆ·ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢è¯¥å­—æ®µçš„ç»“æœåº”ä¸º <code>null</code>ã€‚</p>
<h5 id="å†…çœ-2"><a href="#å†…çœ-2" class="headerlink" title="å†…çœ"></a>å†…çœ</h5><p>æ­£ç¡®å®ç°ä¸Šè¿°éœ€æ±‚çš„æœåŠ¡ç«¯å°†æ¥å—å¦‚ä¸‹çš„å†…çœæŸ¥è¯¢ï¼Œå¹¶è¿”å›åŒ…å«æ‰€æä¾›å“åº”çš„å“åº”ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  __schema &#123;</span><br><span class="line">    queryType &#123;</span><br><span class="line">      fields &#123;</span><br><span class="line">        name</span><br><span class="line">        type &#123;</span><br><span class="line">          name</span><br><span class="line">          kind</span><br><span class="line">        &#125;</span><br><span class="line">        args &#123;</span><br><span class="line">          name</span><br><span class="line">          type &#123;</span><br><span class="line">            kind</span><br><span class="line">            ofType &#123;</span><br><span class="line">              name</span><br><span class="line">              kind</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿”å›</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;__schema&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;queryType&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;fields&quot;</span>: [</span><br><span class="line">        <span class="comment">// è¯¥æ•°ç»„å¯èƒ½è¿˜æœ‰å…¶ä»–æ¡ç›®</span></span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;node&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Node&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;INTERFACE&quot;</span></span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">&quot;args&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;id&quot;</span>,</span><br><span class="line">              <span class="attr">&quot;type&quot;</span>: &#123;</span><br><span class="line">                <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;NON_NULL&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;ofType&quot;</span>: &#123;</span><br><span class="line">                  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;ID&quot;</span>,</span><br><span class="line">                  <span class="attr">&quot;kind&quot;</span>: <span class="string">&quot;SCALAR&quot;</span></span><br><span class="line">                &#125;</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="å­—æ®µç¨³å®šæ€§"><a href="#å­—æ®µç¨³å®šæ€§" class="headerlink" title="å­—æ®µç¨³å®šæ€§"></a>å­—æ®µç¨³å®šæ€§</h4><p>å¦‚æœä¸€ä¸ªæŸ¥è¯¢ä¸­å‡ºç°ä¸¤ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”éƒ½ä½¿ç”¨ç›¸åŒçš„IDæ¥å®ç° <code>Node</code>ï¼Œåˆ™è¿™ä¸¤ä¸ªå¯¹è±¡å¿…é¡»ç›¸ç­‰ã€‚</p>
<p>å‡ºäºæ­¤å®šä¹‰çš„ç›®çš„ï¼Œå¯¹è±¡ç›¸ç­‰æ€§å®šä¹‰å¦‚ä¸‹ï¼š</p>
<ul>
<li>å¦‚æœåœ¨ä¸¤ä¸ªå¯¹è±¡ä¸Šéƒ½æŸ¥è¯¢äº†ä¸€ä¸ªå­—æ®µï¼Œåˆ™åœ¨ç¬¬ä¸€ä¸ªå¯¹è±¡ä¸ŠæŸ¥è¯¢è¯¥å­—æ®µçš„ç»“æœå¿…é¡»ç­‰äºåœ¨ç¬¬äºŒä¸ªå¯¹è±¡ä¸ŠæŸ¥è¯¢è¯¥å­—æ®µçš„ç»“æœã€‚<ul>
<li>å¦‚æœè¯¥å­—æ®µè¿”å›ä¸€ä¸ªæ ‡é‡ï¼Œåˆ™ç›¸ç­‰æ€§å®šä¹‰ä¸ºè¯¥æ ‡é‡çš„ç›¸ç­‰æ€§ã€‚</li>
<li>å¦‚æœè¯¥å­—æ®µè¿”å›ä¸€ä¸ªæšä¸¾ï¼Œåˆ™ç›¸ç­‰æ€§å®šä¹‰ä¸ºä¸¤ä¸ªå­—æ®µéƒ½è¿”å›ç›¸åŒçš„æšä¸¾å€¼ã€‚</li>
<li>å¦‚æœè¯¥å­—æ®µè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™æŒ‰ç…§ä¸Šè¿°æ–¹æ³•é€’å½’å®šä¹‰ç›¸ç­‰æ€§ã€‚</li>
</ul>
</li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  fourNode: node(id: &quot;4&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    ... on User &#123;</span><br><span class="line">      name</span><br><span class="line">      userWithIdOneGreater &#123;</span><br><span class="line">        id</span><br><span class="line">        name</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  fiveNode: node(id: &quot;5&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    ... on User &#123;</span><br><span class="line">      name</span><br><span class="line">      userWithIdOneLess &#123;</span><br><span class="line">        id</span><br><span class="line">        name</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯èƒ½ä¼šè¿”å›ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;fourNode&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;4&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Mark Zuckerberg&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;userWithIdOneGreater&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;5&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Chris Hughes&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;fiveNode&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Chris Hughes&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;userWithIdOneLess&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;4&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Mark Zuckerberg&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç”±äº <code>fourNode.id</code> ä¸ <code>fiveNode.userWithIdOneLess.id</code> ç›¸åŒï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸Šè¿°æ¡ä»¶ä¿è¯ <code>fourNode.name</code> å¿…é¡»ä¸ <code>fiveNode.userWithIdOneLess.name</code> ç›¸åŒï¼Œå¹¶ä¸”ç¡®å®å¦‚æ­¤ã€‚</p>
<h4 id="å¤æ•°è¯†åˆ«æ ¹å­—æ®µ"><a href="#å¤æ•°è¯†åˆ«æ ¹å­—æ®µ" class="headerlink" title="å¤æ•°è¯†åˆ«æ ¹å­—æ®µ"></a>å¤æ•°è¯†åˆ«æ ¹å­—æ®µ</h4><p>æƒ³è±¡ä¸€ä¸‹ä¸€ä¸ªåä¸º <code>username</code> çš„æ ¹å­—æ®µï¼Œè¯¥æ ¹å­—æ®µä½¿ç”¨ç”¨æˆ·çš„ç”¨æˆ·åä¸ºå‚æ•°å¹¶è¿”å›å¯¹åº”çš„ç”¨æˆ·ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  username(username: &quot;zuck&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯èƒ½ä¼šè¿”å›ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;username&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;4&quot;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ˜¾ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†å“åº”ä¸­çš„å¯¹è±¡ï¼ˆID ä¸º 4 çš„ç”¨æˆ·ï¼‰ä¸è¯·æ±‚é“¾æ¥èµ·æ¥ï¼Œä»¥ç”¨æˆ·å â€œzuckâ€ è¯†åˆ«å¯¹è±¡ã€‚ç°åœ¨æƒ³è±¡ä¸€ä¸‹ä¸€ä¸ªåä¸º <code>usernames</code> çš„æ ¹å­—æ®µï¼Œå®ƒåŒ…å«ä¸€ä¸ªç”¨æˆ·ååˆ—è¡¨å¹¶è¿”å›ä¸€ä¸ªå¯¹è±¡åˆ—è¡¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  usernames(usernames: [&quot;zuck&quot;, &quot;moskov&quot;]) &#123;</span><br><span class="line">    id</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¯èƒ½ä¼šè¿”å›ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;usernames&quot;</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;4&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;6&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºäº†ä½¿å®¢æˆ·ç«¯èƒ½å¤Ÿå°†ç”¨æˆ·åé“¾æ¥åˆ°å“åº”ï¼Œå®ƒéœ€è¦çŸ¥é“å“åº”ä¸­çš„æ•°ç»„å°†ä¸ä½œä¸ºå‚æ•°ä¼ é€’çš„æ•°ç»„å¤§å°ç›¸åŒï¼Œå¹¶ä¸”å“åº”ä¸­çš„é¡ºåºå°†ä¸å‚æ•°ä¸­çš„é¡ºåºåŒ¹é…ã€‚æˆ‘ä»¬ç§°è¿™äº›ä¸º<strong>å¤æ•°è¯†åˆ«æ ¹å­—æ®µ</strong>ï¼Œå…¶è¦æ±‚å¦‚ä¸‹æ‰€è¿°ã€‚</p>
<h4 id="å­—æ®µ"><a href="#å­—æ®µ" class="headerlink" title="å­—æ®µ"></a>å­—æ®µ</h4><p>ç¬¦åˆæ­¤è§„èŒƒçš„æœåŠ¡ç«¯å¯èƒ½ä¼šå…¬å¼€æ¥å—è¾“å…¥å‚æ•°åˆ—è¡¨çš„æ ¹å­—æ®µï¼Œå¹¶è¿”å›å“åº”åˆ—è¡¨ã€‚ä¸ºäº†ä½¿ç¬¦åˆè§„èŒƒçš„å®¢æˆ·ç«¯ä½¿ç”¨è¿™äº›å­—æ®µï¼Œè¿™äº›å­—æ®µå¿…é¡»æ˜¯<strong>å¤æ•°è¯†åˆ«æ ¹å­—æ®µ</strong>ï¼Œå¹¶ä¸”å¿…é¡»æ»¡è¶³ä»¥ä¸‹è¦æ±‚ã€‚</p>
<p>æ³¨æ„ï¼šç¬¦åˆè§„èŒƒçš„æœåŠ¡ç«¯ä¹Ÿå¯èƒ½ä¼šå…¬å¼€ä¸æ˜¯<strong>å¤æ•°è¯†åˆ«æ ¹å­—æ®µ</strong>çš„æ ¹å­—æ®µã€‚ç¬¦åˆè§„èŒƒçš„å®¢æˆ·ç«¯å°†æ— æ³•åœ¨å…¶æŸ¥è¯¢ä¸­å°†è¿™äº›å­—æ®µç”¨ä½œæ ¹å­—æ®µã€‚</p>
<p><strong>å¤æ•°è¯†åˆ«æ ¹å­—æ®µ</strong>å¿…é¡»æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå‚æ•°ã€‚è¯¥å‚æ•°çš„ç±»å‹å¿…é¡»æ˜¯éç©ºçš„éç©ºå€¼åˆ—è¡¨ã€‚åœ¨æˆ‘ä»¬çš„ <code>usernames</code> ç¤ºä¾‹ä¸­ï¼Œè¯¥å­—æ®µå°†ä½¿ç”¨åä¸º <code>usernames</code> çš„å•ä¸€å‚æ•°ï¼Œå…¶ç±»å‹ï¼ˆä½¿ç”¨æˆ‘ä»¬çš„ç±»å‹ç³»ç»Ÿé€Ÿè®°ï¼‰å°†ä¸º <code>[String!]!</code>ã€‚</p>
<p><strong>å¤æ•°è¯†åˆ«æ ¹å­—æ®µ</strong>çš„è¿”å›ç±»å‹å¿…é¡»æ˜¯åˆ—è¡¨ï¼Œæˆ–è€…åŒ…å«ä¸€ä¸ªåˆ—è¡¨çš„éç©ºåŒ…è£…å™¨ã€‚è¯¥åˆ—è¡¨å¿…é¡»åŒ…è£… <code>Node</code> æ¥å£ï¼Œä¸€ä¸ªå®ç° <code>Node</code> æ¥å£çš„å¯¹è±¡æˆ–æ˜¯åŒ…å«è¿™äº›ç±»å‹çš„éç©ºåŒ…è£…å™¨ã€‚</p>
<p>æ¯å½“ä½¿ç”¨<strong>å¤æ•°è¯†åˆ«æ ¹å­—æ®µ</strong>æ—¶ï¼Œå“åº”ä¸­åˆ—è¡¨çš„é•¿åº¦å¿…é¡»ä¸å‚æ•°ä¸­åˆ—è¡¨çš„é•¿åº¦ç›¸åŒã€‚å“åº”ä¸­çš„æ¯ä¸ªé¡¹ç›®éƒ½å¿…é¡»ä¸è¾“å…¥ä¸­çš„é¡¹ç›®ç›¸å¯¹åº”ã€‚ æ›´æ­£å¼åœ°æ¥è¯´ï¼Œå¦‚æœä¼ é€’ç»™æ ¹å­—æ®µä¸€ä¸ªè¾“å…¥åˆ—è¡¨ <code>Lin</code> ä½¿å¾—è¾“å‡ºå€¼ä¸º <code>Lout</code>ï¼Œé‚£ä¹ˆå¯¹äºä»»æ„ç½®æ¢ <code>P</code>ï¼Œä¼ é€’æ ¹å­—æ®µ <code>P(Lin)</code> å¿…é¡»ä½¿å¾—è¾“å‡ºå€¼ä¸º <code>P(Lout)</code>ã€‚</p>
<p>å› æ­¤ï¼Œå»ºè®®æœåŠ¡ç«¯ä¸è¦å°†ä¸ºå“åº”ç±»å‹æ·»åŠ éç©ºåŒ…è£…å™¨ï¼Œå› ä¸ºå¦‚æœæ— æ³•ä¸ºè¾“å…¥ä¸­çš„ç»™å®šæ¡ç›®è·å–å¯¹è±¡ï¼Œå®ƒä»ç„¶å¿…é¡»åœ¨è¾“å‡ºä¸­ä¸ºè¯¥è¾“å…¥æ¡ç›®æä¾›ä¸€ä¸ªå€¼ï¼›å¯¹è¿™ç§æƒ…å†µæ¥è¯´ <code>null</code> æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„å€¼ã€‚</p>
<h3 id="ç¼“å­˜"><a href="#ç¼“å­˜" class="headerlink" title="ç¼“å­˜"></a>ç¼“å­˜</h3><blockquote>
<p>æä¾›å¯¹è±¡çš„æ ‡è¯†ç¬¦ä»¥ä¾¿å®¢æˆ·ç«¯æ„å»ºä¸°å¯Œçš„ç¼“å­˜</p>
</blockquote>
<p>åœ¨åŸºäºå…¥å£ç«¯ç‚¹çš„ API ä¸­ï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨ HTTP ç¼“å­˜æ¥ç¡®å®šä¸¤ä¸ªèµ„æºæ˜¯å¦ç›¸åŒï¼Œä»è€Œè½»æ¾é¿å…é‡æ–°è·å–èµ„æºã€‚è¿™äº› API ä¸­çš„ URL æ˜¯<strong>å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦</strong>ï¼Œå®¢æˆ·ç«¯å¯ä»¥åˆ©ç”¨å®ƒæ¥æ„å»ºç¼“å­˜ã€‚ç„¶è€Œï¼Œåœ¨ GraphQL ä¸­ï¼Œæ²¡æœ‰ç±»ä¼¼ URL çš„åŸºå…ƒèƒ½å¤Ÿä¸ºç»™å®šå¯¹è±¡æä¾›å…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ã€‚è¿™é‡Œæä¾›ä¸º API æš´éœ²è¿™ç§æ ‡è¯†ç¬¦ä»¥ä¾›å®¢æˆ·ç«¯ä½¿ç”¨çš„æœ€ä½³å®è·µã€‚</p>
<h4 id="å…¨å±€å”¯ä¸€-ID"><a href="#å…¨å±€å”¯ä¸€-ID" class="headerlink" title="å…¨å±€å”¯ä¸€ ID"></a>å…¨å±€å”¯ä¸€ ID</h4><p>ä¸€ä¸ªå¯è¡Œçš„æ¨¡å¼æ˜¯å°†ä¸€ä¸ªå­—æ®µï¼ˆå¦‚ <code>id</code>ï¼‰ä¿ç•™ä¸ºå…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ã€‚è¿™äº›æ–‡æ¡£ä¸­ä½¿ç”¨çš„ç¤ºä¾‹æ¨¡å¼ä½¿ç”¨æ­¤æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  starship(id:&quot;3003&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">  &#125;</span><br><span class="line">  droid(id:&quot;2001&quot;) &#123;</span><br><span class="line">    id</span><br><span class="line">    name</span><br><span class="line">    friends &#123;</span><br><span class="line">      id</span><br><span class="line">      name</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;starship&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;3003&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Imperial shuttle&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;droid&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;2001&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;friends&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;1000&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Luke Skywalker&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;1002&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Han Solo&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          <span class="attr">&quot;id&quot;</span>: <span class="string">&quot;1003&quot;</span>,</span><br><span class="line">          <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;Leia Organa&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>è¿™æ˜¯å‘å®¢æˆ·ç«¯å¼€å‘äººå‘˜æä¾›çš„å¼ºå¤§å·¥å…·ã€‚ä¸åŸºäºèµ„æºçš„ API ä½¿ç”¨ URL ä½œä¸ºå…¨å±€å”¯ä¸€ä¸»é”®çš„æ–¹å¼ç›¸åŒï¼Œè¯¥ç³»ç»Ÿä¸­æä¾› <code>id</code> å­—æ®µä½œä¸ºå…¨å±€å”¯ä¸€ä¸»é”®ã€‚</p>
<p>å¦‚æœåç«¯ä½¿ç”¨ç±»ä¼¼ UUID çš„æ ‡è¯†ç¬¦ï¼Œé‚£ä¹ˆæš´éœ²è¿™ä¸ªå…¨å±€å”¯ä¸€ ID å¯èƒ½éå¸¸ç®€å•ï¼å¦‚æœåç«¯å¯¹äºæ¯ä¸ªå¯¹è±¡å¹¶æœªåˆ†é…å…¨å±€å”¯ä¸€ IDï¼Œåˆ™ GraphQL å±‚å¯èƒ½éœ€è¦æ„é€ æ­¤ IDã€‚é€šå¸¸æ¥è¯´ï¼Œå°†ç±»å‹çš„åç§°é™„åŠ åˆ° ID å¹¶å°†å…¶ç”¨ä½œæ ‡è¯†ç¬¦éƒ½å¾ˆç®€å•ï¼›æœåŠ¡å™¨å¯èƒ½ä¼šé€šè¿‡ base64 ç¼–ç ä½¿è¯¥ ID ä¸é€æ˜ã€‚</p>
<p>å¯é€‰åœ°ï¼Œæ­¤ ID ä¹‹åå¯ä»¥å’Œ <a target="_blank" rel="noopener" href="https://graphql.cn/learn/global-object-identification">å…¨å±€å¯¹è±¡æ ‡è¯†</a> çš„ <code>node</code> æ¨¡å¼ä¸€èµ·ä½¿ç”¨ã€‚</p>
<h4 id="ä¸ç°æœ‰-API-çš„å…¼å®¹"><a href="#ä¸ç°æœ‰-API-çš„å…¼å®¹" class="headerlink" title="ä¸ç°æœ‰ API çš„å…¼å®¹"></a>ä¸ç°æœ‰ API çš„å…¼å®¹</h4><p>ä¸ºäº†è¿™ä¸€ç›®çš„è€Œä½¿ç”¨ <code>id</code> å­—æ®µçš„ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚ä½•è®©ä½¿ç”¨ GraphQL API çš„å®¢æˆ·ç«¯èƒ½å¤Ÿä¸ç°æœ‰çš„ API å¹¶å­˜ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ç°æœ‰çš„ API æ¥å—äº†ç‰¹å®šç±»å‹çš„ IDï¼Œä½†æ˜¯æˆ‘ä»¬çš„ GraphQL API ä½¿ç”¨äº†å…¨å±€å”¯ä¸€ IDï¼Œé‚£ä¹ˆåŒæ—¶ä½¿ç”¨ä¸¤è€…å¯èƒ½æ¯”è¾ƒæ£˜æ‰‹ã€‚</p>
<p>åœ¨è¿™äº›æƒ…å†µä¸‹ï¼ŒGraphQL API å¯ä»¥åœ¨å•ç‹¬çš„å­—æ®µä¸­æš´éœ²ä»¥å‰çš„ API çš„ IDã€‚è¿™åŒæ—¶å¸¦ç»™æˆ‘ä»¬ä¸¤æ–¹é¢çš„å¥½å¤„ï¼š</p>
<ul>
<li>GraphQL å®¢æˆ·ç«¯å¯ä»¥ç»§ç»­ä¾é ä¸€è‡´çš„æœºåˆ¶æ¥è·å–å…¨å±€å”¯ä¸€ IDã€‚</li>
<li>å½“å®¢æˆ·ç«¯éœ€è¦ä½¿ç”¨æˆ‘ä»¬ä»¥å‰çš„ API æ—¶ä¹Ÿå¯ä»¥ä»å¯¹è±¡ä¸­è·å– <code>previousApiId</code> å¹¶ä½¿ç”¨å®ƒã€‚</li>
</ul>
<h4 id="å¤‡é€‰æ–¹æ¡ˆ"><a href="#å¤‡é€‰æ–¹æ¡ˆ" class="headerlink" title="å¤‡é€‰æ–¹æ¡ˆ"></a>å¤‡é€‰æ–¹æ¡ˆ</h4><p>è™½ç„¶å…¨å±€å”¯ä¸€ ID åœ¨è¿‡å»å·²ç»è¢«è¯æ˜æ˜¯ä¸€ç§å¼ºå¤§çš„æ¨¡å¼ï¼Œä½†å®ƒä»¬å¹¶ä¸æ˜¯å”¯ä¸€å¯ä»¥ä½¿ç”¨çš„æ¨¡å¼ï¼Œä¹Ÿä¸é€‚ç”¨äºæ¯ç§æƒ…å†µã€‚å®¢æˆ·ç«¯éœ€è¦çš„çœŸæ­£å…³é”®åŠŸèƒ½æ˜¯ä¸ºå…¶ç¼“å­˜å¯¼å‡ºå…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦çš„èƒ½åŠ›ã€‚æœåŠ¡å™¨å¯ä»¥å¯¼å‡ºæ­¤ ID ä»¥ç®€åŒ–å®¢æˆ·ç«¯ï¼Œè€Œå®¢æˆ·ç«¯åŒæ ·ä¹Ÿå¯ä»¥å¯¼å‡ºæ ‡è¯†ç¬¦ã€‚é€šå¸¸ï¼Œå°†å¯¹è±¡çš„ç±»å‹ï¼ˆé€šè¿‡ <code>__typename</code> æŸ¥è¯¢ï¼‰ä¸æŸäº›ç±»å‹å”¯ä¸€æ ‡è¯†ç¬¦ç›¸ç»“åˆå°±å¾ˆç®€å•ã€‚</p>
<p>å¦å¤–ï¼Œå¦‚æœä½¿ç”¨ GraphQL API æ›¿æ¢ç°æœ‰çš„ APIï¼Œé‚£ä¹ˆå¦‚æœ GraphQL ä¸­çš„å…¶ä»–æ‰€æœ‰å­—æ®µéƒ½ç›¸åŒï¼Œ<strong>åª</strong>æ›´æ¢äº†å…¨å±€å”¯ä¸€çš„ <code>id</code>ï¼Œè¿™å¯èƒ½ä¼šä»¤äººå›°æƒ‘ã€‚è¿™å¯èƒ½æ˜¯ä¸ºä»€ä¹ˆä¸é€‰ç”¨ <code>id</code> ä½œä¸ºå…¨å±€å”¯ä¸€å­—æ®µçš„å¦ä¸€ä¸ªåŸå› ã€‚</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:null">Blank</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="http://wangyangyangisme.github.io/posts/260dbad6/">http://wangyangyangisme.github.io/posts/260dbad6/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="http://wangyangyangisme.github.io" target="_blank">Blank</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/cover/microservice/1975ab13a16d7203e5f79efb3e499123.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/posts/1391286a/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/cover/microservice/b45a976cf0d74608645a7327efbef5e5.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info">gqlgenæ–‡æ¡£</div></div></a></div><div class="next-post pull-right"><a href="/posts/12f3861c/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/cover/microservice/dc2b938ad73884759e1fba950951d998.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">å¾®æœåŠ¡ä¸‹ä½¿ç”¨GraphQLæ„å»ºBFF</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> è¯„è®º</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/theme/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Blank</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">294</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">28</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">48</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xxxxx" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xxxxxx@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank" title="RSS"><i class="fas fa-rss"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>å…¬å‘Š</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#GraphQL%E6%96%87%E6%A1%A3"><span class="toc-text">GraphQLæ–‡æ¡£</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#GraphQL-%E5%85%A5%E9%97%A8"><span class="toc-text">GraphQL å…¥é—¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%8F%98%E6%9B%B4"><span class="toc-text">æŸ¥è¯¢å’Œå˜æ›´</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%EF%BC%88Fields%EF%BC%89"><span class="toc-text">å­—æ®µï¼ˆFieldsï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%EF%BC%88Arguments%EF%BC%89"><span class="toc-text">å‚æ•°ï¼ˆArgumentsï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%AB%E5%90%8D%EF%BC%88Aliases%EF%BC%89"><span class="toc-text">åˆ«åï¼ˆAliasesï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%87%E6%AE%B5%EF%BC%88Fragments%EF%BC%89"><span class="toc-text">ç‰‡æ®µï¼ˆFragmentsï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E7%89%87%E6%AE%B5%E5%86%85%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"><span class="toc-text">åœ¨ç‰‡æ®µå†…ä½¿ç”¨å˜é‡</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E5%90%8D%E7%A7%B0%EF%BC%88Operation-name%EF%BC%89"><span class="toc-text">æ“ä½œåç§°ï¼ˆOperation nameï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%EF%BC%88Variables%EF%BC%89"><span class="toc-text">å˜é‡ï¼ˆVariablesï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%AE%9A%E4%B9%89%EF%BC%88Variable-definitions%EF%BC%89"><span class="toc-text">å˜é‡å®šä¹‰ï¼ˆVariable definitionsï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%8F%98%E9%87%8F%EF%BC%88Default-variables%EF%BC%89"><span class="toc-text">é»˜è®¤å˜é‡ï¼ˆDefault variablesï¼‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E4%BB%A4%EF%BC%88Directives%EF%BC%89"><span class="toc-text">æŒ‡ä»¤ï¼ˆDirectivesï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E6%9B%B4%EF%BC%88Mutations%EF%BC%89"><span class="toc-text">å˜æ›´ï¼ˆMutationsï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E6%9B%B4%E4%B8%AD%E7%9A%84%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%EF%BC%88Multiple-fields-in-mutations%EF%BC%89"><span class="toc-text">å˜æ›´ä¸­çš„å¤šä¸ªå­—æ®µï¼ˆMultiple fields in mutationsï¼‰</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E8%81%94%E7%89%87%E6%AE%B5%EF%BC%88Inline-Fragments%EF%BC%89"><span class="toc-text">å†…è”ç‰‡æ®µï¼ˆInline Fragmentsï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E5%AD%97%E6%AE%B5%EF%BC%88Meta-fields%EF%BC%89"><span class="toc-text">å…ƒå­—æ®µï¼ˆMeta fieldsï¼‰</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Schema-%E5%92%8C%E7%B1%BB%E5%9E%8B"><span class="toc-text">Schema å’Œç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F%EF%BC%88Type-System%EF%BC%89"><span class="toc-text">ç±»å‹ç³»ç»Ÿï¼ˆType Systemï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E5%9E%8B%E8%AF%AD%E8%A8%80%EF%BC%88Type-Language%EF%BC%89"><span class="toc-text">ç±»å‹è¯­è¨€ï¼ˆType Languageï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E5%92%8C%E5%AD%97%E6%AE%B5%EF%BC%88Object-Types-and-Fields%EF%BC%89"><span class="toc-text">å¯¹è±¡ç±»å‹å’Œå­—æ®µï¼ˆObject Types and Fieldsï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%EF%BC%88Arguments%EF%BC%89-1"><span class="toc-text">å‚æ•°ï¼ˆArgumentsï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%8F%98%E6%9B%B4%E7%B1%BB%E5%9E%8B%EF%BC%88The-Query-and-Mutation-Types%EF%BC%89"><span class="toc-text">æŸ¥è¯¢å’Œå˜æ›´ç±»å‹ï¼ˆThe Query and Mutation Typesï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E9%87%8F%E7%B1%BB%E5%9E%8B%EF%BC%88Scalar-Types%EF%BC%89"><span class="toc-text">æ ‡é‡ç±»å‹ï¼ˆScalar Typesï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B%EF%BC%88Enumeration-Types%EF%BC%89"><span class="toc-text">æšä¸¾ç±»å‹ï¼ˆEnumeration Typesï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%92%8C%E9%9D%9E%E7%A9%BA%EF%BC%88Lists-and-Non-Null%EF%BC%89"><span class="toc-text">åˆ—è¡¨å’Œéç©ºï¼ˆLists and Non-Nullï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%EF%BC%88Interfaces%EF%BC%89"><span class="toc-text">æ¥å£ï¼ˆInterfacesï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%81%94%E5%90%88%E7%B1%BB%E5%9E%8B%EF%BC%88Union-Types%EF%BC%89"><span class="toc-text">è”åˆç±»å‹ï¼ˆUnion Typesï¼‰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E7%B1%BB%E5%9E%8B%EF%BC%88Input-Types%EF%BC%89"><span class="toc-text">è¾“å…¥ç±»å‹ï¼ˆInput Typesï¼‰</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AA%8C%E8%AF%81"><span class="toc-text">éªŒè¯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C"><span class="toc-text">æ‰§è¡Œ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B9%E5%AD%97%E6%AE%B5-amp-%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-text">æ ¹å­—æ®µ &amp; è§£æå™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-text">å¼‚æ­¥è§£æå™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E9%87%8D%E8%A6%81%E7%9A%84%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-text">ä¸é‡è¦çš„è§£æå™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E9%87%8F%E5%BC%BA%E5%88%B6"><span class="toc-text">æ ‡é‡å¼ºåˆ¶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="toc-text">åˆ—è¡¨è§£æå™¨</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%A7%E7%94%9F%E7%BB%93%E6%9E%9C"><span class="toc-text">äº§ç”Ÿç»“æœ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%86%85%E7%9C%81"><span class="toc-text">å†…çœ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5"><span class="toc-text">æœ€ä½³å®è·µ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-text">ä»‹ç»</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP"><span class="toc-text">HTTP</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#JSON%EF%BC%88%E4%BD%BF%E7%94%A8-GZIP-%E5%8E%8B%E7%BC%A9%EF%BC%89"><span class="toc-text">JSONï¼ˆä½¿ç”¨ GZIP å‹ç¼©ï¼‰</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%88%E6%9C%AC%E6%8E%A7%E5%88%B6"><span class="toc-text">ç‰ˆæœ¬æ§åˆ¶</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%AF%E4%BB%A5%E4%B8%BA%E7%A9%BA%E7%9A%84%E6%80%A7%E8%B4%A8"><span class="toc-text">å¯ä»¥ä¸ºç©ºçš„æ€§è´¨</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5"><span class="toc-text">åˆ†é¡µ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E7%9A%84%E6%89%B9%E5%A4%84%E7%90%86%E4%B8%8E%E7%BC%93%E5%AD%98"><span class="toc-text">æœåŠ¡å™¨ç«¯çš„æ‰¹å¤„ç†ä¸ç¼“å­˜</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-Graphs-%E7%9A%84%E6%80%9D%E8%80%83"><span class="toc-text">å…³äº Graphs çš„æ€è€ƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E5%88%87%E7%9A%86%E6%98%AF%E5%9B%BE"><span class="toc-text">ä¸€åˆ‡çš†æ˜¯å›¾ </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B1%E5%90%8C%E8%AF%AD%E8%A8%80"><span class="toc-text">å…±åŒè¯­è¨€</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%B1%82"><span class="toc-text">ä¸šåŠ¡é€»è¾‘å±‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%97%A7%E6%9C%89%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-text">ä½¿ç”¨æ—§æœ‰çš„æ•°æ®</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E6%AC%A1%E4%B8%80%E6%AD%A5"><span class="toc-text">ä¸€æ¬¡ä¸€æ­¥</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-HTTP-%E6%8F%90%E4%BE%9B%E6%9C%8D%E5%8A%A1"><span class="toc-text">é€šè¿‡ HTTP æä¾›æœåŠ¡</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E7%AE%A1%E9%81%93"><span class="toc-text">ç½‘ç»œè¯·æ±‚ç®¡é“</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#URI-%E5%92%8C%E8%B7%AF%E7%94%B1"><span class="toc-text">URI å’Œè·¯ç”±</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP-%E6%96%B9%E6%B3%95%E3%80%81%E6%A0%87%E9%A2%98%E5%92%8C%E6%AD%A3%E6%96%87"><span class="toc-text">HTTP æ–¹æ³•ã€æ ‡é¢˜å’Œæ­£æ–‡</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#GET-%E8%AF%B7%E6%B1%82"><span class="toc-text">GET è¯·æ±‚</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#POST-%E8%AF%B7%E6%B1%82"><span class="toc-text">POST è¯·æ±‚</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94"><span class="toc-text">å“åº”</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GraphiQL"><span class="toc-text">GraphiQL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Node"><span class="toc-text">Node</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8E%88%E6%9D%83"><span class="toc-text">æˆæƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%86%E9%A1%B5-1"><span class="toc-text">åˆ†é¡µ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E6%95%B0"><span class="toc-text">å¤æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%87%E7%89%87"><span class="toc-text">åˆ‡ç‰‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E5%92%8C%E8%BE%B9"><span class="toc-text">åˆ†é¡µå’Œè¾¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E7%9A%84%E7%BB%93%E5%B0%BE%E3%80%81%E8%AE%A1%E6%95%B0%E4%BB%A5%E5%8F%8A%E8%BF%9E%E6%8E%A5"><span class="toc-text">åˆ—è¡¨çš„ç»“å°¾ã€è®¡æ•°ä»¥åŠè¿æ¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%8C%E6%95%B4%E7%9A%84%E8%BF%9E%E6%8E%A5%E6%A8%A1%E5%9E%8B"><span class="toc-text">å®Œæ•´çš„è¿æ¥æ¨¡å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E8%A7%84%E8%8C%83"><span class="toc-text">è¿æ¥è§„èŒƒ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%AF%B9%E8%B1%A1%E8%AF%86%E5%88%AB"><span class="toc-text">å…¨å±€å¯¹è±¡è¯†åˆ«</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%84%E8%8C%83"><span class="toc-text">è§„èŒƒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%9D%E7%95%99%E7%B1%BB%E5%9E%8B"><span class="toc-text">ä¿ç•™ç±»å‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Node-%E6%8E%A5%E5%8F%A3"><span class="toc-text">Node æ¥å£</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E7%9C%81-1"><span class="toc-text">å†…çœ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Node-%E6%A0%B9%E5%AD%97%E6%AE%B5"><span class="toc-text">Node æ ¹å­—æ®µ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%86%85%E7%9C%81-2"><span class="toc-text">å†…çœ</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5%E7%A8%B3%E5%AE%9A%E6%80%A7"><span class="toc-text">å­—æ®µç¨³å®šæ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%8D%E6%95%B0%E8%AF%86%E5%88%AB%E6%A0%B9%E5%AD%97%E6%AE%B5"><span class="toc-text">å¤æ•°è¯†åˆ«æ ¹å­—æ®µ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E6%AE%B5"><span class="toc-text">å­—æ®µ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%93%E5%AD%98"><span class="toc-text">ç¼“å­˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E5%94%AF%E4%B8%80-ID"><span class="toc-text">å…¨å±€å”¯ä¸€ ID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8E%E7%8E%B0%E6%9C%89-API-%E7%9A%84%E5%85%BC%E5%AE%B9"><span class="toc-text">ä¸ç°æœ‰ API çš„å…¼å®¹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%87%E9%80%89%E6%96%B9%E6%A1%88"><span class="toc-text">å¤‡é€‰æ–¹æ¡ˆ</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/1043496/" title="dockerç®¡ç†å·¥å…·"><img src="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/cover/docker/4d51cecf7d26dfa720682ee0425872d5.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="dockerç®¡ç†å·¥å…·"/></a><div class="content"><a class="title" href="/posts/1043496/" title="dockerç®¡ç†å·¥å…·">dockerç®¡ç†å·¥å…·</a><time datetime="2021-05-18T16:43:15.907Z" title="å‘è¡¨äº 2021-05-19 00:43:15">2021-05-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2fcceac/" title="GitHub Actionså…¥é—¨æ•™ç¨‹"><img src="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/cover/common/5b98715a7f1913ebe1de182fb77cf843.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GitHub Actionså…¥é—¨æ•™ç¨‹"/></a><div class="content"><a class="title" href="/posts/2fcceac/" title="GitHub Actionså…¥é—¨æ•™ç¨‹">GitHub Actionså…¥é—¨æ•™ç¨‹</a><time datetime="2021-05-18T15:00:40.000Z" title="å‘è¡¨äº 2021-05-18 23:00:40">2021-05-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/54deb0e2/" title="å›¾è§£è®¾è®¡æ¨¡å¼"><img src="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/cover/common/cb75d9300b44131b6a0afbab792f48cd.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="å›¾è§£è®¾è®¡æ¨¡å¼"/></a><div class="content"><a class="title" href="/posts/54deb0e2/" title="å›¾è§£è®¾è®¡æ¨¡å¼">å›¾è§£è®¾è®¡æ¨¡å¼</a><time datetime="2021-05-16T15:30:56.000Z" title="å‘è¡¨äº 2021-05-16 23:30:56">2021-05-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/88f78d2f/" title="é¢å‘å¯¹è±¡çš„è®¾è®¡è¿‡ç¨‹"><img src="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/cover/common/6d6dbbdcfa655b5d965f52adb35443ae.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="é¢å‘å¯¹è±¡çš„è®¾è®¡è¿‡ç¨‹"/></a><div class="content"><a class="title" href="/posts/88f78d2f/" title="é¢å‘å¯¹è±¡çš„è®¾è®¡è¿‡ç¨‹">é¢å‘å¯¹è±¡çš„è®¾è®¡è¿‡ç¨‹</a><time datetime="2021-05-16T15:24:56.000Z" title="å‘è¡¨äº 2021-05-16 23:24:56">2021-05-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/bfac6395/" title="å·¥å‚æ¨¡å¼ | Goè®¾è®¡æ¨¡å¼å®æˆ˜"><img src="https://cdn.jsdelivr.net/gh/wangyangyangisme/CDN@latest/cover/common/296967057d2691c0c7ed919799d75416.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="å·¥å‚æ¨¡å¼ | Goè®¾è®¡æ¨¡å¼å®æˆ˜"/></a><div class="content"><a class="title" href="/posts/bfac6395/" title="å·¥å‚æ¨¡å¼ | Goè®¾è®¡æ¨¡å¼å®æˆ˜">å·¥å‚æ¨¡å¼ | Goè®¾è®¡æ¨¡å¼å®æˆ˜</a><time datetime="2021-05-16T06:31:03.000Z" title="å‘è¡¨äº 2021-05-16 14:31:03">2021-05-16</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Blank</div><div class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://wangyangyangisme.github.io/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="æ”¾å¤§å­—ä½“"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="ç¼©å°å­—ä½“"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="ç®€ç¹è½¬æ¢">ç¹</button><button id="darkmode" type="button" title="æµ…è‰²å’Œæ·±è‰²æ¨¡å¼è½¬æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      true && mermaid.init()
    })
  }
}</script><script>function loadValine () {
  function initValine () {
    const valine = new Valine(Object.assign({
      el: '#vcomment',
      appId: '49gEIIGN7uRbL6vHhieSpBzM-MdYXbMMI',
      appKey: 'uqts0urLKwikYQ0fKmIkMHBE',
      placeholder: 'è¯·ç•™ä¸‹ä½ çš„è„šå°',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: true,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
      requiredFields: ["nick,mail"],
      visitor: false
    }, null))
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !true) {
  if (true) btf.loadComment(document.getElementById('vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script></div><div class="aplayer no-destroy" data-id="000PeZCQ1i4XVs" data-server="tencent" data-type="artist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="false" muted></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script>(function(d, w, c) {
    w.ChatraID = '';
    var s = d.createElement('script');
    w[c] = w[c] || function() {
        (w[c].q = w[c].q || []).push(arguments);
    };
    s.async = true;
    s.src = 'https://call.chatra.io/chatra.js';
    if (d.head) d.head.appendChild(s);
})(document, window, 'Chatra');

if (false) {
  var chatBtnFn = () => {
    var chatBtn = document.getElementById("chat_btn")
    chatBtn.addEventListener("click", function(){
      Chatra('openChat')
    });
  }
  chatBtnFn()
} else {
  if (true) {
    function chatBtnHide () {
      Chatra('hide')
    }
    function chatBtnShow () {
      Chatra('show')
    }
  }
}</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>let pjaxSelectors = [
  'title',
  '#config-diff',
  '#body-wrap',
  '#rightside-config-hide',
  '#rightside-config-show',
  '.js-pjax'
]

if (false) {
  pjaxSelectors.unshift('meta[property="og:image"]', 'meta[property="og:title"]', 'meta[property="og:url"]')
}

var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {

  // removeEventListener toc scroll 
  window.removeEventListener('scroll', window.tocScrollFn)

  typeof preloader === 'object' && preloader.initLoading()
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')

})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof chatBtnFn === 'function' && chatBtnFn()
  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // Analytics
  if (false) {
    MtaH5.pgv()
  }

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()

  typeof preloader === 'object' && preloader.endLoading()
})

document.addEventListener('pjax:error', (e) => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>